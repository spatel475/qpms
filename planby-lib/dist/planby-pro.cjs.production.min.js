"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,n=require("@emotion/react"),i=e(require("@emotion/styled/base")),r=require("react"),o=e(r),a=require("date-fns"),s=require("date-fns-tz"),l=require("use-debounce");function u(){u=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=Object.create((t&&t.prototype instanceof v?t:v).prototype),a=new E(i||[]);return r(o,"_invoke",{value:H(e,n,a)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var x={};d(x,a,(function(){return this}));var w=Object.getPrototypeOf,D=w&&w(w(I([])));D&&D!==n&&i.call(D,a)&&(x=D);var M=b.prototype=v.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function W(e,t){function n(r,o,a,s){var l=h(e[r],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return o=o?o.then(r,r):r()}})}function H(t,n,i){var r=f;return function(o,a){if(r===p)throw Error("Generator is already running");if(r===m){if("throw"===o)throw a;return{value:e,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var l=L(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=p;var u=h(t,n,i);if("normal"===u.type){if(r=i.done?m:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=m,i.method="throw",i.arg=u.arg)}}}function L(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=h(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,r(M,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:y,configurable:!0}),y.displayName=d(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,d(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},T(W.prototype),d(W.prototype,s,(function(){return this})),t.AsyncIterator=W,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new W(c(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(M),d(M,l,"Generator"),d(M,a,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=I,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:I(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function d(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){d(o,i,r,a,s,"next",e)}function s(e){d(o,i,r,a,s,"throw",e)}a(void 0)}))}}function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||(r[n]=e[n]);return r}function p(e,t){return t||(t=e.slice(0)),e.raw=t,e}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var v,y=n.css(t||(t=p(['\n  @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap");\n\n  .planby {\n    font-family: "Inter", system-ui, -apple-system,\n      /* Firefox supports this but not yet system-ui */ "Segoe UI", Roboto,\n      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"; /* 2 */\n  }\n'])));!function(e){e[e.Sidebar=9]="Sidebar",e[e.EpgCornerBox=10]="EpgCornerBox",e[e.Line=9]="Line",e[e.Loader=12]="Loader",e[e.Program=1]="Program",e[e.Timeline=9]="Timeline",e[e.Area=2]="Area"}(v||(v={}));var b=["isVerticalMode","program","overlap"],x=function(e){return new Array(e).fill("")},w=function(){return"undefined"!=typeof window?r.useLayoutEffect:r.useEffect},D=function(e){return new Date(e)},M=function(e){return Math.abs(e)},T=function(e){var t=e.replace(/T.*/,"");return s.toDate(t)},W=function(e){return h({},e,{top:e.left,left:e.top,width:e.height,height:e.width})},H={},L=function(e){return H[e.data.channelUuid]||(H[e.data.channelUuid]={}),H},O=function(e){return H=e},k={},E=function(e){var t=e.uuid,n=e.first,i=e.last;k[t]={first:void 0===n?0:n,last:void 0===i?0:i,uuid:t}},I=function(e){return k[e]},C={},S=function(){return C},R={enabled:!1,zone:"",mode:""},V=function(){return R},z=function(e){var t=V(),n=new Date(e);return t.enabled&&"utc"===t.mode?s.utcToZonedTime(n,t.zone).getTime():n.getTime()},P=function(e){var t=V(),n=e?new Date(e):new Date;return t.enabled&&"utc"===t.mode?s.utcToZonedTime(n,t.zone):n},N=function(e,t){void 0===t&&(t="yyyy-MM-dd HH:mm:ss");var n=V();if(n.enabled&&"utc"===n.mode){var i=s.utcToZonedTime(e,n.zone);return s.format(i,t,{timeZone:n.zone})}return a.format(e,t)},U=function(e){var t=V();return t.enabled&&"utc"===t.mode?s.zonedTimeToUtc(e,t.zone):e},j=function(e,t){return e*t/60},X=function(e,t,n,i,r){var o=a.getTime(D(t))>a.getTime(D(i)),s=a.getTime(D(e))<a.getTime(D(n));if(s&&o){var l=a.differenceInMinutes(A(D(i)),D(n));return j(l,r)}if(s){var u=a.differenceInMinutes(A(D(t)),D(n));return j(u,r)}if(o){var d=a.differenceInMinutes(D(i),A(D(e)));return d<0?0:j(d,r)}var c=a.differenceInMinutes(A(D(t)),A(D(e)));return j(c,r)},B=function(e){return s.toDate(e).getTime()},Y=function(e,t){var n=z(P()),i=z(e),r=z(t);return n>=i&&r>n},F=function(e){return a.format(new Date(e),"yyyy-MM-dd HH:mm:ss").replace(/\s/g,"T")},G=function(e){return N(new Date(e),"yyyy-MM-dd HH:mm:ss").replace(/\s/g,"T")},A=function(e){return a.roundToNearestMinutes(new Date(e))},_=function(e){return e.filter((function(e){return a.isWithinInterval(new Date,{start:new Date(e.startTimeHour),end:new Date(e.endTimeHour)})})).length>0},J=function(e){var t=e.hourWidth,n=e.sidebarWidth,i=e.cb,r=e.hoursInDays.filter((function(e){return a.isWithinInterval(new Date,{start:new Date(e.startTimeHour),end:new Date(e.endTimeHour)})}));if(0===r.length)return null==i||i(!1),0;var o=r[0];return X(a.startOfDay(new Date(o.startTimeHour)),new Date,o.startTimeHour,o.endTimeHour,t)+n+o.prevItemDiffInHours*t},q=["hoursInDays"],Z=function(e,t,n){return Array.from({length:24},(function(i,r){if(0===r){var o=e?"MM/dd":"dd.MM",s=a.parse(n[t],"yyyy-MM-dd",new Date);return 0===t?r:a.format(s,o)}return r}))},K=function(e,t){var n=t.hoursInDays,i=f(t,q);return"week"===e?ee(i):"month"===e?te(i):n.length>0?$(t):Q(i)},$=function(e){var t=e.isBaseTimeFormat,n=e.days,i=e.hoursInDays;return x(e.numberOfDays).reduce((function(e,r,o){var a=Z(t,o,n),s=i[o],l=a.slice(s.startTime,s.endTime);return o>0&&(l[0]=a[0]),[].concat(e,l)}),[])},Q=function(e){var t=e.isBaseTimeFormat,n=e.days,i=e.numberOfHoursInDay,r=e.offsetStartHoursRange;return x(e.numberOfDays).reduce((function(e,i,o){var a=Z(t,o,n);return[].concat(e,0===o?a.slice(r):a)}),[]).slice(0,i)},ee=function(e){var t=e.days;return x(e.numberOfDays).map((function(e,n){var i=a.parse(t[n],"yyyy-MM-dd",new Date);return a.format(i,"yyyy-MM-dd")}))},te=function(e){var t=e.months;return x(e.numberOfMonths).map((function(e,n){var i=a.parse(t[n],"yyyy-MM-dd",new Date);return a.format(i,"yyyy-MM-dd")}))},ne=function(e){var t=e.weekDayWidth;return e.months.reduce((function(e,n,i){var r=a.getDaysInMonth(s.toDate(n))*t;if(0===i)return e.data.push({width:r,left:0}),e.offsetLeft=0,e;var o=e.offsetLeft+e.data[i-1].width;return e.data.push({width:r,left:o}),e.offsetLeft=o,e}),{data:[],offsetLeft:0}).data};function ie(e,t){for(var n,i=new Date(e.data.since),r=new Date(e.data.till),o=0,a=g(t);!(n=a()).done;){var s=n.value;if(e.data.id!==s.data.id){var l=new Date(s.data.since),u=new Date(s.data.till);(i<=u&&r>=l||l<=r&&u>=i)&&o++}}return o}var re=function(e,t,n){var i=h({},e),r=i.data,o=i.position,a=r.channelPosition,s=r.overlapTimes,l=o.height,u=h({},e,{position:{width:o.width,height:l,top:a.top+(null!=s?s:t.length+1)*l,left:o.left}}),d=function(e,t,n){for(var i=new Date(e.data.since),r=new Date(e.data.till),o=n,a=0;a<o+1;a++){for(var s,l=(e.data.channelPosition.top>0?e.data.channelPosition.top:0)+e.position.height*a,u=!1,d=!1,c=g(t);!(s=c()).done;){var h=s.value;if(e.data.id!==h.data.id&&l===h.position.top){var f=new Date(h.data.since),p=new Date(h.data.till);if(i<p&&r>f||f<r&&p>i){(i<=p&&r>=f||f<=r&&p>=i)&&(d=!0),u=!0;break}}}if(!u)return d?a+4:a}return o}(u,t,n);return u.position=h({},u.position,{top:a.top+u.position.height*d}),[u,d+1]},oe=function(e,t,n){return t>n[e.data.channelUuid]?t:n[e.data.channelUuid]};function ae(e,t,n){for(var i,r=h({},t),o={},a=g(n);!(i=a()).done;)r[i.value.data.channelUuid]=[];for(var s=function(){var t,i=h({},n[l]),a=new Date(i.data.since),s=new Date(i.data.till);if(null!=i&&null!=(t=i.data)&&t.parentChannelUuid){var u,d=S()[null==i||null==(u=i.data)?void 0:u.parentChannelUuid];if(null==d||!d.isOpen)return 1}e&&(i.position=W(i.position));for(var c=function(){var t=h({},n[f]);if(i.data.channelUuid!==t.data.channelUuid)return 1;e&&(t.position=W(t.position));var l=new Date(t.data.since),u=new Date(t.data.till);if(a<u&&s>l||l<s&&u>a){if(r[i.data.channelUuid]&&r[t.data.channelUuid]&&i.data.channelUuid===t.data.channelUuid){t.data.overlapLinkedId=i.data.overlapLinkedId;var d=r[i.data.channelUuid],c=d.some((function(e){return e.data.id===i.data.id})),p=d.some((function(e){return e.data.id===t.data.id})),m=r[i.data.channelUuid].length;if(p||0!==m)if(!p&&m>1){var g=0;if(!c){g=ie(t,d),t.data.overlapTimes=g;var v=re(i,d,o[i.data.channelUuid]),y=v[1];d.push(v[0]),o[i.data.channelUuid]=oe(i,y,o)}g=ie(t,d),t.data.overlapTimes=g;var b=re(t,d,o[i.data.channelUuid]),x=b[1];d.push(b[0]),o[i.data.channelUuid]=oe(i,x,o)}else if(p&&m>1){var w=ie(t,d);t.data.overlapTimes=w;var D=re(t,d,o[i.data.channelUuid]);o[i.data.channelUuid]=oe(i,D[1],o)}else m>1&&d.push(t);else t.position.top=i.data.channelPosition.top+i.position.height,r[i.data.channelUuid]=[i,t],o[i.data.channelUuid]=o[i.data.channelUuid]?o[i.data.channelUuid]:2}}else r[i.data.channelUuid]&&0===r[i.data.channelUuid].length&&(o[i.data.channelUuid]=0,r[i.data.channelUuid]=[])},f=l+1;f<n.length;f++)c()},l=0;l<n.length-1;l++)s();return{overlaps:r,channelOverlaps:o}}var se,le,ue,de,ce,he,fe,pe,me,ge,ve,ye,be,xe,we,De,Me,Te,We,He,Le,Oe,ke,Ee,Ie,Ce,Se,Re,Ve,ze,Pe,Ne,Ue,je=function(e){var t=e.initialPositionLeft,n=e.left,i=e.initialWidth,r=e.width,o=e.hourWidth,s=e.startDate,l=e.since,u=e.till,d=0;if(s){var c=new Date(s).getTime();new Date(l).getTime()<c&&(d=a.differenceInMinutes(new Date(s),new Date(l)))}var h=(n-t)/o,f=function(e){var t=e.initialWidth,n=e.width;return t||n?(n-t)/e.hourWidth*60:0}({initialWidth:i,width:r,hourWidth:o});return function(e,t){var n=V();if(n.enabled&&"utc"===n.mode){var i=U(e),r=U(t);return{since:i.toISOString(),till:r.toISOString()}}return{since:a.format(e,"yyyy-MM-dd HH:mm:ss").replace(" ","T"),till:a.format(t,"yyyy-MM-dd HH:mm:ss").replace(" ","T")}}(a.addMinutes(new Date(l),60*h+d),a.addMinutes(new Date(u),60*h+f+d))},Xe=function(e){var t,n=e.isDrop,i=void 0!==n&&n,r=e.isBaseTimeFormat,o=e.index,a=e.item,s=e.grid,l=e.mode,u=e.dayWidth,d=e.hourWidth,c=e.sidebarWidth,f=e.days,p=e.hoursInDays,m=e.months,g=e.numberOfDays,v=e.numberOfHoursInDay,y=e.numberOfMonths,b=e.offsetStartHoursRange,x=e.timelineDividers,w=e.dataAttributes,D=a.position,M=a.channel,T="day"===l.type;t=h({},D,e.isVerticalMode?{top:D.left,left:D.top-c,edgeEnd:D.left+d-c}:{top:D.top,left:D.left-c,edgeEnd:D.edgeEnd-c});var W=K(l.type,{isBaseTimeFormat:r,days:f,hoursInDays:p,months:m,numberOfDays:g,numberOfHoursInDay:v,numberOfMonths:y,offsetStartHoursRange:b}),H=T?t.left+o*(d/x):t.left,L={since:"00:00:00",till:"00:00:00",date:"",channelUuid:M.uuid};if(T){var O=Be({left:H,edgeEnd:T?H+d/x:t.edgeEnd,timeSlots:W,channel:M,days:f,dayWidth:u,hourWidth:d,index:o});i?null==s.onGridItemDrop||s.onGridItemDrop(h({},O,w)):null==s.onGridItemClick||s.onGridItemClick(O)}if("week"===l.type){var k=h({},L,{date:W[Math.floor(H/(24*d))]});i?null==s.onGridItemDrop||s.onGridItemDrop(h({},k,w)):null==s.onGridItemClick||s.onGridItemClick(k)}if("month"===l.type){var E=h({},L,{date:W[Math.floor(H/(24*d*30))]});i?null==s.onGridItemDrop||s.onGridItemDrop(h({},E,w)):null==s.onGridItemClick||s.onGridItemClick(E)}},Be=function(e){var t=e.left,n=e.edgeEnd,i=e.channel,r=e.days,o=e.hourWidth,a=e.dayWidth,s=e.index,l="",u=e.timeSlots.map((function(e){return"number"==typeof e?e:0})),d=Math.floor(t/o),c=Math.floor(n/o),h=function(e){return u[e]<10?"0"+u[e]:u[e]},f=h(d),p=h(c),m=s+1===0?"00":15*(s+1);return l=p+":"+m+":00",60===m&&(l=p?(u[d+1]<10?"0"+u[d+1]:u[c])+":00:00 ":"00:00:00"),{since:f+":"+(0===s?"00":15*s)+":00",till:l,date:r[Math.floor(t/(a/(r.length-1)))],channelUuid:i.uuid}},Ye=i("div",{target:"e1mhijim5"})("padding:5px;height:",(function(e){var t=e.height;return t?t+"px":"100%"}),";width:",(function(e){var t=e.width;return t?t+"px":"100%"}),";*,::before,::after{box-sizing:border-box;}"),Fe=i("div",{target:"e1mhijim4"})({name:"qjsha7",styles:"height:100%;width:100%;display:flex;flex-direction:column;position:relative;border-radius:6px;overflow:hidden"}),Ge=i("div",{target:"e1mhijim3"})("position:relative;height:100%;width:100%;overflow:auto;scroll-behavior:smooth;background:",(function(e){return e.theme.primary[900]}),";",(function(e){return e.isRTL&&"transform: scale(-1,1)"}),";::-webkit-scrollbar{width:10px;height:10px;}::-webkit-scrollbar-thumb{background:",(function(e){return e.theme.scrollbar.thumb.bg}),";border:10px none ",(function(e){return e.theme.white}),";border-radius:20px;}::-webkit-scrollbar-thumb:hover{background:",(function(e){return e.theme.white}),";}::-webkit-scrollbar-track{background:",(function(e){return e.theme.primary[900]}),";border:22px none ",(function(e){return e.theme.white}),";border-radius:0px;}::-webkit-scrollbar-corner{background:",(function(e){return e.theme.primary[900]}),";}"),Ae=i("div",{target:"e1mhijim2"})("position:absolute;top:",(function(e){var t=e.top;return void 0===t?0:t}),"px;background:",(function(e){return e.theme.primary[900]}),";z-index:",v.EpgCornerBox,";",(function(e){var t=e.left;return e.isRTL?"right:0px;":" left: "+(void 0===t?0:t)+"px"}),";"),_e=i("div",{target:"e1mhijim1"})("position:relative;left:",(function(e){return e.isSidebar?e.sidebarWidth:0}),"px;height:",(function(e){return e.contentHeight}),"px;width:",(function(e){return e.dayWidth}),"px;background:",(function(e){return e.theme.primary[900]}),";",(function(e){return e.isVerticalMode&&"\n      left: "+(e.isTimeline?e.timelineHeight:0)+"px;\n      width: "+e.contentHeight+"px;\n      height: "+e.dayWidth+"px;\n    "}),";"),Je=i("div",{target:"e1mhijim0"})("position:absolute;top:",(function(e){return e.isTimeline?e.timelineHeight:0}),"px;left:",(function(e){return e.isSidebar?e.sidebarWidth:0}),"px;height:100%;width:",(function(e){return e.dayWidth}),"px;",(function(e){return e.isVerticalMode&&"\n     top: "+(e.isSidebar?e.sidebarWidth:0)+"px;\n     left: "+(e.isTimeline?e.timelineHeight:0)+"px;\n     width: 100%;\n     height: "+e.dayWidth+"px;\n    "}),";"),qe=i("div",{target:"e1psuwkz0"})((function(e){var t=e.isVerticalMode,i=e.isTimeline,r=e.isRTL,o=e.sidebarWidth,a=e.timelineHeight,s=e.contentHeight,l=e.bottom,u=e.theme;return n.css(se||(se=p(["\n    position: sticky;\n    background-color: ",";\n\n    ",";\n\n    ","\n\n    ","\n  "])),u.primary[900],r&&"& > div { transform: scale(-1,1) }",t&&n.css(le||(le=p(["\n      top: 0;\n      left: ","px;\n      height: ","px;\n      width: ","px;\n    "])),i?a:0,o,s),!t&&n.css(ue||(ue=p(["\n      left: 0;\n      bottom: ","px;\n      float: left;\n      width: ","px;\n    "])),l,o))})," z-index:",v.Sidebar,";"),Ze=i("div",{target:"eqmxcnp1"})((function(e){var t=e.isVerticalMode,i=e.top,r=e.height,o=e.groupTree,a=e.theme;return n.css(de||(de=p(["\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: ",";\n    cursor: ",";\n\n    ","\n    ",";\n  "])),a.primary[900],o?"pointer":"default",t&&n.css(ce||(ce=p(["\n      top: 0;\n      left: ","px;\n      width: ","px;\n      height: 100%;\n    "])),i,r),!t&&n.css(he||(he=p(["\n      top: ","px;\n      height: ","px;\n      width: 100%;\n    "])),i,r))}),";"),Ke=i("img",{target:"eqmxcnp0"})({name:"vfop22",styles:"max-height:60px;max-width:60px;position:relative"}),$e=i("div",{target:"e1cx08bt7"})("border:1px solid #171923;position:relative;display:flex;font-size:11px;height:100%;border-radius:8px;padding:10px ",(function(e){return e.width<30?4:20}),"px;overflow:hidden;cursor:pointer;transition:all 0.4s ease-in-out;background:",(function(e){var t=e.theme.primary;return"linear-gradient(to right, "+t[600]+", "+t[600]+")"}),";z-index:",v.Program,";&:hover{background:",(function(e){var t=e.theme.gradient;return"linear-gradient(to right, "+t.blue[900]+", "+t.blue[600]+")"}),";}",(function(e){var t=e.theme.gradient;return e.isLive&&"background: linear-gradient(to "+(e.isVerticalMode?"bottom":"right")+", "+t.blue[900]+", "+t.blue[600]+","+t.blue[300]+")"}),";"),Qe=i("div",{target:"e1cx08bt6"})("width:100%;display:flex;justify-content:flex-start;",(function(e){return e.isVerticalMode&&"flex-direction: column;"}),";"),et="\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n",tt=i("p",{target:"e1cx08bt5"})("font-size:14px;text-align:left;margin-top:0;margin-bottom:5px;font-weight:500;color:",(function(e){return e.theme.grey[300]}),";",et,";"),nt=i("span",{target:"e1cx08bt4"})("display:block;font-size:12.5px;font-weight:400;color:",(function(e){return e.theme.text.grey[500]}),";text-align:left;",et,";"),it=i("img",{target:"e1cx08bt3"})("margin-right:15px;border-radius:6px;width:100px;",(function(e){return e.isVerticalMode&&"width: 100%; margin-bottom: 10px"}),";"),rt=i("div",{target:"e1cx08bt2"})("overflow:hidden;",(function(e){return e.isRTL&&"transform: scale(-1,1); \n     display: flex; \n     flex-direction: column; \n     align-items: flex-end"}),";"),ot=i("div",{target:"e1cx08bt1"})("position:absolute;padding:",(function(e){return 0===e.width?0:4}),"px;z-index:",(function(e){return e.isDragging||e.isResizing?3*v.Program:v.Program}),";overflow:hidden;",(function(e){return(!e.isDragging||!e.isResizing)&&" &:hover {\n    z-index: "+2*v.Program+";\n\n    "+at+" {\n      opacity: 1;\n    }\n  }"})," ",(function(e){return(e.isDragging||e.isResizing)&&" \n    border-radius: 10px;\n    background: "+e.theme.green[200]+";\n    \n    "+$e+"{\n      user-select: none;\n      cursor: move;\n  }\n  "}),";"),at=i("div",{target:"e1cx08bt0"})("position:absolute;opacity:0;",(function(e){return!e.isResize&&"display: none;"})," ",(function(e){var t=e.left;return e.isVerticalMode&&"\n    "+(t?"top: 0;":"bottom: 0;")+"\n    left:0;\n    height:25px;\n    width: 100%;\n  cursor: "+(t?"n-resize":"s-resize")+";\n  "})," ",(function(e){var t=e.left;return!e.isVerticalMode&&"\n    top: 0;\n    bottom: 0;\n    "+(t?"left: 0;":"right: 0;")+"\n    width: 25px;\n    cursor: "+(t?"w-resize":"e-resize")+";\n    "}),' &:after{content:"";position:absolute;margin:auto;border-radius:8px;background:',(function(e){return e.theme.green[200]}),";",(function(e){return!e.isVerticalMode&&"   top: 0;\n      bottom: 0;\n      height: 50%;\n      width: 4px;\n        "+(e.left?"left: 9px;":"right: 9px;")+"\n        "})," ",(function(e){return e.isVerticalMode&&"\n      "+(e.left?"top: 9px;":"bottom: 9px;")+"\n     left:50%;\n      height: 4px;\n      width: 50%;\n      transform: translateX(-50%);\n     \n        "}),";}"),st=i("span",{target:"e1bnz7pf6"})("position:absolute;top:13px;left:",(function(e){var t=e.isRTL,n=e.isBaseTimeFormat;return e.isVerticalMode?t?n?9:17:n?9:14:e.isWeekMonthMode?0:t&&n?"-32":"-18"}),"px;color:",(function(e){return e.theme.text.grey[300]}),";",(function(e){return e.isRTL&&"\n      transform: scale(-1, 1);\n    "})," ",(function(e){return e.isNewDay&&"color: "+e.theme.teal[100]+"; font-weight: 600"}),";",(function(e){var t=e.isRTL;return e.isVerticalMode&&n.css(fe||(fe=p(["\n      top: -10px;\n      left: 50%;\n      transform: translate(-50%, 0%) ",";\n    "])),t?"scale(-1,1)":"")}),";"),lt=i("div",{target:"e1bnz7pf5"})("display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%;transform:",(function(e){return e.isRTL?"scale(-1,1)":"scale(1,1)"}),";span{color:",(function(e){return e.theme.text.grey[300]}),";font-size:16px;}",(function(e){var t=e.theme;return"modern"===e.styleType&&n.css(pe||(pe=p(["\n      span:first-of-type {\n        font-weight: 500;\n        color: ",";\n        font-size: 18px;\n      }\n      span {\n        font-weight: 500;\n        color: ",";\n        font-size: 24px;\n      }\n    "])),t.teal[100],t.text.grey[300])})," ",(function(e){var t=e.isRTL;return e.isVerticalMode&&n.css(me||(me=p(["\n      margin-top: 0px;\n      transform: ",";\n    "])),t?"scale(-1,1)":"scale(1,1)")}),";"),ut=i("div",{target:"e1bnz7pf4"})("position:relative;height:100%;width:100%;padding-bottom:6px;",(function(e){return e.isVerticalMode&&n.css(ge||(ge=p(["\n      grid-template-columns: 1fr;\n      align-items: start;\n    "])))}),";"),dt=i("div",{target:"e1bnz7pf3"})("position:absolute;bottom:6px;background:",(function(e){return e.theme.timeline.divider.bg}),";height:10px;width:1px;left:",(function(e){return e.left}),"px;",(function(e){var t=e.left;return e.isVerticalMode&&n.css(ve||(ve=p(["\n      top: ","px;\n      left: 50%;\n      height: 1px;\n      width: 15px;\n      transform: translate(-50%, -50%);\n      &:first-of-type {\n        opacity: 0;\n        visibility: hidden;\n      }\n    "])),t)})," ",(function(e){return e.isNewDay&&"&:first-of-type {\n      width:2px;\n      background: "+e.theme.teal[100]+";\n  }"}),";"),ct=i("div",{target:"e1bnz7pf2"})((function(e){var t=e.isVerticalMode,i=e.isSidebar,r=e.sidebarWidth,o=e.timelineHeight,a=e.dayWidth,s=e.theme;return n.css(ye||(ye=p(["\n      position: sticky;\n      background: ",";\n      z-index: ",";\n\n      ","\n\n      ","\n    "])),s.primary[900],v.Timeline,t&&n.css(be||(be=p(["\n        left: 0;\n        bottom: 0px;\n        float: left;\n        width: ","px;\n        margin-top: ","px;\n      "])),o,i?r:0),!t&&n.css(xe||(xe=p(["\n        top: 0;\n        left: ","px;\n        height: ","px;\n        width: ","px;\n      "])),i?r:0,o,a))}),";"),ht=i("div",{target:"e1bnz7pf1"})((function(e){var t=e.isVerticalMode,i=e.left,r=e.width,o=e.timelineHeight,a=e.theme;return n.css(we||(we=p(["\n    position: absolute;\n    font-size: 14px;\n    background-color: ",";\n\n    ","\n    ","\n  "])),a.primary[900],!t&&n.css(De||(De=p(["\n      left: ","px;\n      width: ","px;\n      height: 100%;\n    "])),i,r),t&&n.css(Me||(Me=p(["\n      top: ","px;\n      height: ","px;\n      width: ","px;\n    "])),i,r,o))})," ",(function(e){var t=e.isCurrentTime,n=e.areHoursInDays;return e.isWeekMonthMode?"":"&:nth-of-type("+(n?n&&e.isTodayInHoursInDays&&t?2:1:e.isToday&&t?2:1)+") {\n        "+st+" {\n          "+(e.isVerticalMode?"top":"left")+": 0px;\n        }\n      }"}),";"),ft=i(ht,{target:"e1bnz7pf0"})((function(e){var t=e.isVerticalMode,i=e.styleType,r=e.theme;return n.css(Te||(Te=p(['\n      &:not(:last-of-type) {\n        &:after {\n          content: "";\n          position: absolute;\n          background: ',";\n          transform: translate(-50%, -50%);\n\n          ","\n        }\n      }\n    "])),r.timeline.divider.bg,t?n.css(We||(We=p(["\n                bottom: 0;\n                height: 1px;\n                width: 80%;\n              "]))):n.css(He||(He=p(["\n                top: 50%;\n                right: 0;\n                height: 100%;\n                height: ",";\n                width: 1px;\n              "])),"modern"===i?"35%":"70%"))}),";"),pt={position:"absolute",top:64,width:3},mt=i("div",{target:"ef4is9g0"})("position:",pt.position,";top:",(function(e){return e.isTimeline?pt.top:0}),"px;left:",(function(e){return e.left}),"px;height:",(function(e){return e.height}),"px;width:",pt.width,"px;background:",(function(e){return e.theme.green[300]}),";pointer-events:none;z-index:",(function(e){return e.zIndex}),";",(function(e){return e.isVerticalMode&&" \n      top: "+e.left+"px;\n      left: "+(e.isTimeline?pt.top:0)+"px;\n      height: "+pt.width+"px;\n      width: "+e.height+"px;\n  "}),";"),gt=[0,50,0],vt=i("div",{target:"e8ysujy1"})("position:absolute;top:0;left:0;bottom:0;width:100%;background:",(function(e){return e.theme.loader.bg}),";display:flex;justify-content:center;align-items:center;z-index:",v.Loader,";"),yt=i("div",{target:"e8ysujy0"})("width:",(function(e){return.42*e.width}),"px;background:",(function(e){return e.theme.loader[e.color]}),";height:18px;border-radius:45px;margin-right:",(function(e){var t=e.marginRight;return null!=t?t:0}),"px;animation-name:",(function(e){return t=e.animate,n.keyframes(Le||(Le=p(["\n","\n"])),gt.map((function(e,n){return e+"% {\n  transform: translateX(-"+t.right[n]+");\n}"})));var t}),";animation-duration:",(function(e){return e.transition.duration}),"s;animation-timing-function:",(function(e){var t;return null!=(t=e.transition.ease)?t:"ease-in-out"}),";animation-delay:",(function(e){var t;return null!=(t=e.transition.delay)?t:0}),"s;animation-iteration-count:infinite;"),bt=function(e){var t=(void 0===e?{}:e).width;return{position:"absolute",top:0,width:null!=t?t:70,height:20}},xt=i("div",{target:"e1b7bm21"})("position:",bt().position,";top:",(function(e){return e.top}),"px;left:",(function(e){return e.left}),"px;width:",(function(e){var t=e.width;return"string"==typeof t?"auto":t+"px"}),";height:",bt().height,"px;background-color:",(function(e){return e.theme.primary[900]}),";z-index:2;"),wt=i("span",{target:"e1b7bm20"})((function(e){var t=e.isVerticalMode,i=e.isBaseTimeFormat,r=e.isRTL,o=e.isNewDay,a=e.theme;return n.css(Oe||(Oe=p(["\n    position: absolute;\n    font-size: 13px;\n    font-weight: 500;\n    color: ",";\n    background-color: ",";\n    ",";\n\n    ","\n\n    ","\n  "])),a.green[200],a.primary[900],o&&"color: "+a.teal[100]+"; font-weight: 600",t&&n.css(ke||(ke=p(["\n      left: 50%;\n      transform: translate(-50%, -50%) ",";\n    "])),r?"scale(-1,1)":""),!t&&n.css(Ee||(Ee=p(["\n      top: 4px;\n      left: ","px;\n      ","\n    "])),r&&i?"-32":"-16",r&&"transform: scale(-1,1);"))}),";"),Dt=i("div",{target:"euzzuzq2"})("position:absolute;pointer-events:",(function(e){return e.isClickable?"auto":"none"}),";cursor:",(function(e){return e.isClickable?"pointer":"none"}),";z-index:",v.Area,";",(function(e){var t=e.positionX,i=e.height,r=e.width,o=e.timelineHeight;return e.isVerticalMode?n.css(Ie||(Ie=p(["\n          top: ","px;\n          left: ","px;\n          height: ","px;\n          width: ","px;\n        "])),t,o,r,i):n.css(Ce||(Ce=p(["\n          top: ","px;\n          left: ","px;\n          height: ","px;\n          width: ","px;\n        "])),o,t,i,r)}),";"),Mt=i("div",{target:"euzzuzq1"})({name:"1b4920d",styles:"position:absolute;top:0;left:0;width:100%;height:100%"}),Tt=i("div",{target:"euzzuzq0"})("padding:4px 6px;font-size:15px;width:max-content;",(function(e){var t=e.isVerticalMode,i=e.isLeft,r=void 0!==i&&i,o=e.width,a=e.timelineHeight;return n.css(Se||(Se=p(["\n    ","\n  "])),t?n.css(Ve||(Ve=p(["\n          position: sticky;\n          left: ","px;\n          border-top-right-radius: 4px;\n          border-bottom-right-radius: 4px;\n          ","\n        "])),a,r&&n.css(ze||(ze=p([""])))?"top: 0; ":"margin-top:"+(o-60)+"px;"):n.css(Re||(Re=p(["\n          position: sticky;\n          top: ","px;\n          ","\n        "])),a,r?"float:left; border-top-right-radius: 4px; border-bottom-right-radius:4px;":"float:right; border-top-left-radius: 4px; border-bottom-left-radius: 4px;"))}),";"),Wt=i("div",{target:"eopf81a3"})({name:"1jykxby",styles:"position:absolute;top:0;left:0;height:100%;width:100%;z-index:1"}),Ht=i("div",{target:"eopf81a1"})("position:absolute;top:",(function(e){return e.top}),"px;left:",(function(e){return e.left}),"px;height:",(function(e){return e.height}),"px;width:",(function(e){return e.width}),"px;border:1px solid transparent;border-right-color:",(function(e){return e.theme.grid.item}),";border-bottom-color:",(function(e){return e.theme.grid.item}),";z-index:1;",(function(e){var t=e.theme;return!e.isDayMode&&e.isHoverHighlight&&"\n    &:hover {\n      border: 1px solid "+t.grid.highlight+";\n    }   \n\n    "+(e.isDragOver&&"border: 1px solid "+t.grid.highlight+";")+"\n    "})," ",(function(e){return e.isItemClickable&&n.css(Pe||(Pe=p(["\n      cursor: pointer;\n    "])))}),";"),Lt=i("div",{target:"eopf81a0"})("position:absolute;top:0;left:",(function(e){return e.left}),"px;border:1px solid transparent;border-right-color:",(function(e){return e.theme.grid.divider}),";height:100%;width:",(function(e){return e.width}),"px;",(function(e){return e.isHoverHighlight&&"\n    &:hover {\n      border: 1px solid "+e.theme.grid.highlight+";\n    }   \n\n\n    "})," ",(function(e){return e.isDragOver&&"\n    border: 1px solid "+e.theme.grid.highlight+"; \n\n    "})," ",(function(e){var t=e.left,i=e.width,r=e.theme;return e.isVerticalMode&&n.css(Ne||(Ne=p(["\n      top: ","px;\n      left: 0;\n      width: 100%;\n      height: ","px;\n      border-bottom-color: ",";\n    "])),t,i,r.grid.divider)})," ",(function(e){return e.isItemClickable&&n.css(Ue||(Ue=p(["\n      cursor: pointer;\n    "])))}),";"),Ot={primary:{600:"#1a202c",900:"#171923"},grey:{300:"#d1d1d1"},white:"#fff",teal:{100:"#38B2AC"},green:{200:"#389493",300:"#2C7A7B"},loader:{teal:"#5DDADB",purple:"#3437A2",pink:"#F78EB6",bg:"#171923db"},scrollbar:{border:"#ffffff",thumb:{bg:"#e1e1e1"}},gradient:{blue:{300:"#002eb3",600:"#002360",900:"#051937"}},text:{grey:{300:"#a0aec0",500:"#718096"}},timeline:{divider:{bg:"#718096"}},grid:{item:"#7180961a",divider:"#7180961a",highlight:"#38B2AC"}},kt=["isToday","currentDate"],Et=["hourWidth","dayWidth"],It=["isLayoutBottom","isLayoutRight","containerRef","scrollBoxRef"],Ct=F(a.startOfToday()),St={type:"day",style:"default"},Rt={enabled:!1,zone:"",mode:"formatInTimeZone"},Vt={enabled:!1,mode:"stack",layerOverlapLevel:.4},zt={enabled:!1,hoverHighlight:!1},Pt={enabled:!1,mode:"row"};function Nt(e,t){var n=w(),i=o.useRef(e);n((function(){i.current=e}),[e]),o.useEffect((function(){if(t||0===t){var e=setInterval((function(){return i.current()}),t);return function(){return clearInterval(e)}}}),[t])}function Ut(){var e=o.useState(!1),t=e[0],n=e[1];return o.useEffect((function(){function e(){var e=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,t=/Android|webOS/.test(navigator.userAgent),i=e||t,r="ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia&&window.matchMedia("(any-pointer: coarse)").matches;n(i||r)}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),t}function jt(e){var t=e.isVerticalMode,n=void 0!==t&&t,i=e.isRTL,s=void 0!==i&&i,l=e.isResize,d=void 0!==l&&l,f=e.isBaseTimeFormat,p=e.startDate,m=e.contentHeight,g=e.dayWidth,v=e.itemHeight,y=e.hourWidth,b=e.minWidth,x=void 0===b?200:b,w=e.program,D=e.liveRefreshTime,M=e.mode,T=e.snap,W=e.dnd,H=e.dragMouseUp,L=e.resizeMouseUp,O=r.useRef(null),k=w.data,E=w.position,I=E.width,C=E.height,S=k.since,R=k.till,V=o.useState((function(){return Y(S,R)})),z=V[0],P=V[1],N={isVerticalMode:n,initialPosition:E,data:k,dayWidth:g,contentHeight:m,elementRef:O},U=function(e){var t=e.isResize,n=e.isVerticalMode,i=e.data,o=e.dayWidth,a=e.contentHeight,s=e.initialPosition,l=e.snapX,u=e.elementRef,d=e.mouseUpCb,c=r.useRef(!1),f=r.useRef(!1),p=Ut(),m=r.useState(!1),g=m[0],v=m[1],y=r.useState(!1),b=y[0],x=y[1],w=r.useState(!1),D=w[0],M=w[1],T=r.useState(!1),W=T[0],H=T[1],L=r.useState(0),O=L[0],k=L[1],E=r.useState({x:s.left,y:s.top,width:n?s.height:s.width}),I=E[0],C=E[1],S=r.useState({startY:s.top,lastY:s.top,startX:s.left,lastX:s.left}),R=S[0],V=S[1],z=i.id,P=i.index,N=i.since,U=i.till,j=r.useMemo((function(){return n?s.height:s.width}),[n,s.height,s.width]),X=r.useCallback((function(e){return void 0===e&&(e=!1),function(t){if(t.stopPropagation(),c.current=!0,p&&v(!0),x(!0),u.current){var i=p?t.touches[0]:t;k(n?i.pageY:i.pageX),R.startY=i.clientY,R.startX=i.clientX,e?(M(!0),H(!1)):(M(!1),H(!0))}}}),[p,n,R,u]),B=r.useCallback((function(e){f.current&&(e.stopPropagation(),e.preventDefault())}),[]),Y=r.useCallback((function(){var e,t,i,r,o,a;n?(R.lastY=null==(e=u.current)?void 0:e.offsetTop,R.lastX=null==(t=u.current)?void 0:t.offsetLeft,I.width=null==(i=u.current)?void 0:i.offsetHeight):(R.lastY=null==(r=u.current)?void 0:r.offsetTop,R.lastX=null==(o=u.current)?void 0:o.offsetLeft,I.width=null==(a=u.current)?void 0:a.offsetWidth);var l={id:z,index:P,since:N,till:U};n||!c.current||s.left===R.lastX&&s.width===I.width||d(h({},l,{top:R.lastY,left:R.lastX,width:I.width,initialPositionTop:s.top,initialPositionLeft:s.left,initialWidth:s.width})),n&&c.current&&(s.top!==R.lastY||s.width!==I.width)&&d(h({},l,{top:R.lastX,left:R.lastY,width:I.width,initialPositionTop:s.left,initialPositionLeft:s.top,initialWidth:s.height})),x(!1),c.current=!1,p&&v(!1),setTimeout((function(){return f.current=!1}),0)}),[p,n,z,P,N,U,j,s.left,s.width,d]),F=JSON.stringify(s);if(r.useEffect((function(){V({startY:s.top,lastY:s.top,startX:s.left,lastX:s.left}),C({x:s.left,y:s.top,width:n?s.height:s.width})}),[n,F]),r.useEffect((function(){function e(e){if(g&&e.preventDefault(),b&&c.current&&u.current){f.current=!0;var t=p?e.touches[0]:e,i=u.current,r=i.getBoundingClientRect();if(n){var a,d=null==(a=u.current)?void 0:a.offsetHeight,m=t.clientY-R.startY+R.lastY,v=l?Math.round((t.pageY-O)/l)*l:t.pageY-O,y=j-v,x=l?Math.round((t.clientY-r.top+14)/l)*l:t.clientY-r.top+14,w=R.lastY+x<=o;if(D&&m>=0&&m<=o-d&&y>=50){var M=s.top+v;i.style.height=y+"px",i.style.top=M+"px",C((function(e){return h({},e,{y:M,width:y})}))}else W&&w&&x>=50&&(i.style.height=x+"px",i.style.top=s.top+"px",C((function(e){return h({},e,{y:s.top,width:x})})))}else{var T,H=null==(T=u.current)?void 0:T.offsetWidth,L=t.clientX-R.startX+R.lastX,k=l?Math.round((t.pageX-O)/l)*l:t.pageX-O,E=j-k,I=l?Math.round((t.clientX-r.left+14)/l)*l:t.clientX-r.left+14,S=R.lastX+I<=o;if(D&&L>=0&&L<=o-H&&E>=50){var V=s.left+k;i.style.width=E+"px",i.style.left=V+"px",C((function(e){return h({},e,{x:V,width:E})}))}else W&&S&&I>=50&&(i.style.width=I+"px",C((function(e){return h({},e,{width:I})})))}}}var i=p?"touchmove":"mousemove",r=p?"touchend":"mouseup";return t&&(document.addEventListener(i,e,p?{passive:!1}:void 0),document.addEventListener(r,Y)),function(){document.removeEventListener(i,e),document.removeEventListener(r,Y)}}),[p,g,t,n,b,D,W,o,a,j,s.top,s.left,R,l,O,u,Y]),t){var G=function(e){return p?{onTouchStart:X(e),onTouchEnd:Y}:{onMouseDown:X(e),onMouseUp:Y}};return{width:I.width,initialWidth:n?s.height:s.width,currentPositionX:n?I.y:I.x,resizeEvents:{isResizing:b,resources:{ref:u,isResizing:b},eventsLeft:h({isResize:t,isVerticalMode:n,left:!0,onClick:B},G(!0)),eventsRight:h({isResize:t,isVerticalMode:n,onClick:B},G())}}}return{currentPositionX:n?s.top:s.left,width:n?s.height:s.width,resizeEvents:{isResizing:!1,resources:{},eventsLeft:{},eventsRight:{}}}}(h({},N,{isResize:d,snapX:null==T?void 0:T.x,mouseUpCb:L})),j=U.currentPositionX,X=U.width,B=U.resizeEvents,F=o.useCallback((function(e,t){var n,i=je(h({},e,{hourWidth:y,startDate:p})),r=h({},i,{id:e.id,data:t});return null==(n=null==W||null==W.onDnDMouseUp?void 0:W.onDnDMouseUp(r))||n}),[]),G=function(e){var t=e.isDndEnabled,n=e.isDndMutlirows,i=e.isVerticalMode,o=e.initialPosition,a=e.data,s=e.dayWidth,l=e.itemHeight,d=e.contentHeight,f=e.dndSnapX,p=e.dndSnapY,m=void 0===p?l:p,g=e.elementRef,v=e.mouseUpCb,y=e.dndMouseUpCb,b=r.useRef(!1),x=r.useRef(!1),w=Ut(),D=r.useState(!1),M=D[0],T=D[1],W=r.useState(!1),H=W[0],L=W[1],O=r.useState({x:o.left,y:o.top}),k=O[0],E=O[1],I=r.useState({startY:o.top,lastY:o.top,startX:o.left,lastX:o.left}),C=I[0],S=I[1],R=a.id,V=a.index,z=a.since,P=a.till,N=a.channelPosition,U=r.useCallback((function(e){e.stopPropagation(),b.current=!0,w&&L(!0),T(!0);var t=w?e.touches[0]:e;C.startY=t.clientY,C.startX=t.clientX}),[w,C]),j=r.useCallback((function(e){x.current&&(e.stopPropagation(),e.preventDefault())}),[]),X=r.useCallback(c(u().mark((function e(){var t,n,r,s,l,d,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i?(C.lastY=null==(t=g.current)?void 0:t.offsetTop,C.lastX=null==(n=g.current)?void 0:n.offsetLeft):(C.lastY=null==(r=g.current)?void 0:r.offsetTop,C.lastX=null==(s=g.current)?void 0:s.offsetLeft),l={id:R,index:V,since:z,till:P},i||!b.current||o.left===C.lastX&&o.top===C.lastY){e.next=8;break}return d=h({},l,{top:C.lastY,left:C.lastX,initialPositionLeft:o.left,initialPositionTop:o.top}),e.next=6,null==y?void 0:y(d,a);case 6:e.sent?v(d):(g.current.style.left=o.left+"px",g.current.style.top=o.top+"px",E((function(e){return h({},e,{x:o.left,y:o.top})})));case 8:if(!i||!b.current||o.left===C.lastX&&o.top===C.lastY){e.next=14;break}return c=h({},l,{top:C.lastX,left:C.lastY,initialPositionLeft:o.top,initialPositionTop:o.left}),e.next=12,null==y?void 0:y(c,a);case 12:e.sent?v(c):(g.current.style.left=o.left+"px",g.current.style.top=o.top+"px",E((function(e){return h({},e,{x:o.left,y:o.top})})));case 14:b.current=!1,T(!1),w&&L(!1),setTimeout((function(){return x.current=!1}),0);case 18:case"end":return e.stop()}}),e)}))),[i,o.top,o.left,C,R,V,z,P,v]),B=JSON.stringify(o);return r.useEffect((function(){S({startY:o.top,lastY:o.top,startX:o.left,lastX:o.left}),E({x:o.left,y:o.top})}),[i,B]),r.useEffect((function(){function e(e){var r,a,l,u;if(H&&e.preventDefault(),t&&b.current&&g.current){x.current=!0;var c=w?e.touches[0]:e,p=i?null==(r=g.current)?void 0:r.offsetHeight:null==(a=g.current)?void 0:a.offsetWidth,v=i?null==(l=g.current)?void 0:l.offsetWidth:null==(u=g.current)?void 0:u.offsetHeight,y=N;if(i){var D=c.clientY-C.startY+C.lastY,M=f?Math.round(D/f)*f:D;if(n){var T=Math.round((c.clientX-C.startX+C.lastX)/m)*m;T>=0&&T<=d-v&&M>=0&&M<=s-p&&(T>y.top+y.height-1||T<y.top-1?(g.current.style.top=M+"px",g.current.style.left=T+"px",E((function(e){return h({},e,{y:M,x:T})}))):(g.current.style.top=M+"px",g.current.style.left=o.left+"px",E((function(e){return h({},e,{y:M,x:o.left})}))))}else M>=0&&M<=s-p&&(g.current.style.top=M+"px",E((function(e){return h({},e,{y:M})})))}else{var W=c.clientX-C.startX+C.lastX,L=f?Math.round(W/f)*f:W;if(n){var O=Math.round((c.clientY-C.startY+C.lastY)/m)*m;O>=0&&O<=d-v&&L>=0&&L<=s-p&&(O>y.top+y.height-1||O<y.top-1?(g.current.style.top=O+"px",g.current.style.left=L+"px",E((function(e){return h({},e,{x:L,y:O})}))):(g.current.style.left=L+"px",g.current.style.top=o.top+"px",E((function(e){return h({},e,{x:L,y:o.top})}))))}else L>=0&&L<=s-p&&(g.current.style.left=L+"px",E((function(e){return h({},e,{x:L})})))}}}var r=w?"touchmove":"mousemove",a=w?"touchend":"mouseup";return t&&(document.addEventListener(r,e,w?{passive:!1}:void 0),document.addEventListener(a,X)),function(){document.removeEventListener(r,e),document.removeEventListener(a,X)}}),[w,H,t,i,M,n,o.top,o.left,N,f,m,C,s,l,d,g,X]),t?{dndEvents:h({isDragging:M,ref:g,onClick:j},w?{onTouchStart:U,onTouchEnd:X}:{onMouseDown:U,onMouseUp:X}),currentPositionX:i?k.y:k.x}:{currentPositionX:o.left,dndEvents:{isDragging:!1}}}(h({},N,{isDndEnabled:!!W.enabled&&!B.resources.isResizing,isDndMutlirows:"multi-rows"===W.mode,dndSnapX:null==T?void 0:T.x,dndSnapY:null==T?void 0:T.y,itemHeight:v,dndMouseUpCb:F,mouseUpCb:H})),A=G.currentPositionX,_=G.dndEvents,J=h({},function(e){for(var t=h({},e),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o=0,a=i;o<a.length;o++){var s=a[o];delete t[s]}return t}(E,"egdeEnd")),q={width:I,position:J},Z=function(e,t){return void 0===t&&(t="HH:mm"),a.format(new Date(e),t).replace(/\s/g,"")},K=function(){return"week"===M.type||"month"===M.type?f?"MM/dd":"dd.MM":f?"h:mm a":"HH:mm"},$=function(e){return s?R:e};Nt((function(){var e=Y(S,R);P(e)}),D);var Q=n?C>x:I>x,ee=r.useCallback((function(){return h({},B.resources,_)}),[_,B.resources]);return{isMouseEvent:_.isDragging||B.resources.isResizing||!1,isLive:z,isMinWidth:Q,isRTL:s,resizeEvents:B,formatTime:Z,set12HoursTimeFormat:K,getMouseEvents:ee,getMouseEventTempTime:function(){var e={id:k.id,index:k.index,since:k.since,till:k.till,top:0,left:B.isResizing?j:A,initialPositionTop:E.top,initialPositionLeft:E.left,initialWidth:I,width:X,hourWidth:y};n&&(e.initialPositionLeft=E.top,e.initialPositionTop=E.left,e.initialWidth=C);var t=je(e),i=t.till,r=function(e){return Z($(e),K()).toLowerCase()};return{since:r(t.since),till:r(i)}},getRTLSinceTime:$,getRTLTillTime:function(e){return s?S:e},styles:q}}function Xt(e){var t=e.isBaseTimeFormat,n=e.isRTL,i=e.isSidebar,o=e.isVerticalMode,l=e.timezone,u=e.dayWidth,d=e.hourWidth,c=e.sidebarWidth,h=e.timelineHeight,f=e.mode,p=e.startDate,m=e.endDate,g=e.hoursInDays,v=e.days,y=e.liveRefreshTime,b=e.months,w=e.numberOfDays,D=e.numberOfHoursInDay,M=e.numberOfMonths,T=e.offsetStartHoursRange,W=e.timelineDividers,H=e.renderCurrentTime,L=r.useMemo((function(){return K(f.type,{isBaseTimeFormat:t,days:v,hoursInDays:g,months:b,numberOfDays:w,numberOfHoursInDay:D,numberOfMonths:M,offsetStartHoursRange:T})}),[f.type,t,v,g,b,w,D,M,T]),O="month"===f.type,k="week"===f.type||O,E=_(g),I=g.length>0,C=24*d,S=r.useMemo((function(){return ne({months:b,weekDayWidth:C})}),[b,C]),R=x(W);return{isWeekMonthMode:k,isMonthMode:O,isTodayInHoursInDays:E,areHoursInDays:I,time:L,weekDayWidth:C,monthsWidth:S,timelineHeight:h,dividers:R,timelineDividers:W,formatWeekMonthDate:function(e){return function(e){var t=e.date,n=e.mode,i=e.isBaseTimeFormat;if("week"===n.type){if("modern"===n.style)return a.format(s.toDate(t),"dd");var r=i?"MM/dd":"dd.MM";return a.format(s.toDate(t),r)}return a.format(s.toDate(t),"LLL")}({date:e,mode:f,isBaseTimeFormat:t})},getTime:function(e){if("string"==typeof e)return{time:e,isNewDay:!0};var n=new Date,i=a.format(n,"yyyy-MM-dd"),r=e<10?"0"+e:e;if(t){var o=new Date(i+"T"+r+":00:00");return{time:a.format(o,"h:mm a").toLowerCase().replace(/\s/g,""),isNewDay:!1}}return{time:r+":00",isNewDay:!1}},getDayMonthName:function(e){var t="week"===f.type?"EEE":"yyyy";return a.format(s.toDate(e),t)},getTimelineProps:function(){return{isSidebar:i,isVerticalMode:o,dayWidth:u,sidebarWidth:c,timelineHeight:h}},getCurrentTimeProps:function(){return{isBaseTimeFormat:t,isVerticalMode:o,isRTL:n,timezone:l,mode:f,startDate:p,endDate:m,hoursInDays:g,dayWidth:u,timelineHeight:h,hourWidth:d,sidebarWidth:c,liveRefreshTime:y,renderCurrentTime:H}}}}function Bt(e){var t=e.timezone,n=e.startDate,i=e.endDate,r=e.hoursInDays,s=e.dayWidth,l=e.hourWidth,u=e.sidebarWidth,d=e.liveRefreshTime,c=o.useState(!0),h=c[0],f=c[1],p=o.useState((function(){return r.length>0?J({hoursInDays:r,hourWidth:l,sidebarWidth:u,cb:f}):X(a.startOfDay(new Date(n)),new Date,n,i,l)+u})),m=p[0],g=p[1],v=JSON.stringify(t),y=JSON.stringify(r),b=1e3*d,x=m<=s;return Nt((function(){var e=l/60/60*d;r.length>0?_(r)?(f(!0),g((function(t){return t+e}))):f(!1):g((function(t){return t+e}))}),o.useMemo((function(){return x?b:null}),[x,b])),o.useEffect((function(){if(r.length>0){var e=J({hoursInDays:r,hourWidth:l,sidebarWidth:u,cb:f});g(e)}else{var t=new Date(n),o=X(a.startOfDay(t),P(),n,i,l);g(o+u)}}),[n,i,u,l,y,v]),{showLine:h,positionX:m}}var Yt=["mode","grid","timelineHeight","sidebarWidth","hourWidth","dayWidth"];function Ft(e){var t=(void 0===e?{}:e).onItemDrop,n=o.useRef(null),i=o.useState(!1),a=i[0],s=i[1],l=r.useCallback((function(e,i){return function(r){if(r.preventDefault(),n.current){s(!1);var o=r.dataTransfer.getData("text/plain"),a=document.getElementById(o);if(a){for(var l=a.attributes,u={},d=0;d<l.length;d++){var c=l[d];c.name.startsWith("data-")&&(u[c.name.replace("data-","")]=c.value)}null==t||t(e,i,u)()}}}}),[t]),u=r.useCallback((function(e){e&&(e.preventDefault(),n.current&&s(!0))}),[]),d=r.useCallback((function(e){e.preventDefault(),n.current&&s(!1)}),[]);return{isDragOver:a,dropAreaRef:n,onDrop:l,onDragEnter:u,onDragLeave:d}}var Gt=["onItemClick","onItemDrop"],At=Lt;function _t(e){var t=e.index,n=e.item,i=e.dividerProps,r=i.styles,a=i.props,s=a.onItemClick,l=a.onItemDrop,u=f(a,Gt),d=Ft({onItemDrop:l}),c=d.isDragOver,h=d.onDrop,p=d.onDragEnter,m=d.onDragLeave;return o.createElement(At,Object.assign({className:"planby-grid-item-divider",ref:d.dropAreaRef,key:t},r,{left:r.left(t)},u,{onClick:s(n,t),isDragOver:c,onDragEnter:p,onDragLeave:m,onDrop:h(n,t)}))}var Jt=Ht;function qt(e){var t,n=e.isVerticalMode,i=e.isHoverHighlight,o=e.isDayMode,a=e.isItemClickable,s=e.item,l=e.index,u=e.hourWidth,d=e.timelineDividers,c=e.renderGridCell,h=e.onItemClick,f=e.onItemDrop,p=null!=(t=e.channelOverlapsCount[s.channel.uuid])?t:1,m=(0,e.isProgramVisible)(s.position,p),g=Ft({onItemDrop:f}),v=g.isDragOver,y=g.dropAreaRef,b=g.onDrop,w=g.onDragEnter,D=g.onDragLeave;if(!m)return null;var M=o?{isItemClickable:!1}:{onClick:h(s),isItemClickable:a},T={styles:{left:function(e){return e*(u/d)},width:u/d},props:{isVerticalMode:n,isHoverHighlight:i,isItemClickable:a,onItemClick:h,onItemDrop:f}},W=o?{}:{isDragOver:v,onDragEnter:w,onDragLeave:D,onDrop:b(s,l)};return c?c({isDayMode:o,id:s.channel.uuid+l,index:l,item:s,isHoverHighlight:i,timelineDividers:d,gridDividerProps:T,timelineDividerArray:x(d),gridItemClickProps:M,gridItemDnDProps:W}):r.createElement(Jt,Object.assign({ref:y,key:s.channel.uuid+l,className:"planby-grid-item",isDayMode:o,isHoverHighlight:i},s.position,M,W),o&&x(d).map((function(e,t){return r.createElement(_t,{key:t,index:t,item:s,dividerProps:T})})))}var Zt=["isVerticalMode","isProgramVisible","channelOverlapsCount","grid","gridItems","mode","hourWidth","timelineDividers","renderGridCell"],Kt=Wt;function $t(e){var t=e.isVerticalMode,n=e.isProgramVisible,i=e.channelOverlapsCount,o=e.grid,a=e.gridItems,s=e.mode,l=e.hourWidth,u=e.timelineDividers,d=e.renderGridCell,c=f(e,Zt),p=function(e){var t=e.mode,n=e.grid,i=e.timelineHeight,o=e.sidebarWidth,a=e.hourWidth,s=e.dayWidth,l=f(e,Yt),u=l.isVerticalMode,d=l.isBaseTimeFormat,c=l.days,h=l.hoursInDays,p=l.months,m=l.numberOfDays,g=l.numberOfHoursInDay,v=l.numberOfMonths,y=l.offsetStartHoursRange,b=l.timelineDividers;return{onItemClick:r.useCallback((function(e,r){return function(){Xe({isVerticalMode:u,index:r,item:e,grid:n,mode:t,dayWidth:s,hourWidth:a,timelineHeight:i,sidebarWidth:o,isBaseTimeFormat:d,days:c,hoursInDays:h,months:p,numberOfDays:m,numberOfHoursInDay:g,numberOfMonths:v,offsetStartHoursRange:y,timelineDividers:b})}}),[u,a,s,o,d,c,h,p,m,g,v,y,t.type]),onItemDrop:r.useCallback((function(e,r,l){return function(){Xe({isDrop:!0,isVerticalMode:u,index:r,item:e,grid:n,mode:t,dayWidth:s,hourWidth:a,timelineHeight:i,sidebarWidth:o,isBaseTimeFormat:d,days:c,hoursInDays:h,months:p,numberOfDays:m,numberOfHoursInDay:g,numberOfMonths:v,offsetStartHoursRange:y,timelineDividers:b,dataAttributes:l})}}),[u,a,s,o,d,c,h,p,m,g,v,y,t.type])}}(h({isVerticalMode:t,grid:o,mode:s,hourWidth:l,timelineDividers:u},c)),m=p.onItemClick,g=p.onItemDrop,v="day"===s.type,y=o.hoverHighlight,b=!!o.onGridItemClick;return r.createElement(Kt,{className:"planby-grid"},a.map((function(e,o){return function(e,o){return r.createElement(qt,Object.assign({key:e.channel.uuid+o},{isVerticalMode:t,isProgramVisible:n,isHoverHighlight:y,isDayMode:v,isItemClickable:b,item:e,index:o,channelOverlapsCount:i,hourWidth:l,timelineDividers:u,renderGridCell:d,onItemClick:m,onItemDrop:g}))}(e,o)})))}var Qt=Ge,en=_e,tn=o.forwardRef((function(e,t){var n,i=e.startDate,r=e.endDate,a=e.hoursInDays,s=e.liveRefreshTime,l=e.scrollY,u=e.channels,d=e.channelOverlapsCount,c=e.programs,p=e.programOverlaps,m=e.layerOverlapLevel,g=e.timezone,v=e.areas,y=e.grid,x=e.gridItems,w=e.mode,D=e.dnd,M=e.snap,T=e.overlap,H=e.overlapMode,k=e.timelineDividers,E=e.dayWidth,I=e.hourWidth,C=e.monthWidth,S=e.sidebarWidth,R=e.timelineHeight,V=e.itemHeight,z=e.days,P=e.months,N=e.numberOfHoursInDay,U=e.numberOfDays,j=e.numberOfMonths,X=e.offsetStartHoursRange,Y=e.isVerticalMode,F=void 0!==Y&&Y,G=e.isRTL,A=void 0!==G&&G,_=e.isSidebar,J=void 0===_||_,q=e.isTimeline,Z=void 0===q||q,K=e.isLine,$=void 0===K||K,Q=e.isToday,ee=e.isBaseTimeFormat,te=void 0!==ee&&ee,ne=e.isCurrentTime,ie=void 0!==ne&&ne,re=e.isResize,oe=void 0!==re&&re,ae=e.dragMouseUp,se=e.resizeMouseUp,le=e.openChannelGroupTree,ue=e.onLayoutBgClick,de=e.onScroll,ce=e.isProgramVisible,he=e.isChannelVisible,fe=e.isTimelineVisible,pe=e.renderProgram,me=e.renderChannel,ge=e.renderTimeline,ve=e.renderLine,ye=e.renderCurrentTime,be=e.renderGridCell,xe=u.length,we=Object.keys(p).length,De=JSON.stringify(p),Me=o.useMemo((function(){return we>0?function(e){return e.reduce((function(e,t){return e+t.position.height}),0)}(u):xe*V}),[xe,we,V,De]),Te=v.length>0,We=B(new Date(r))>B(new Date);return o.createElement(Qt,{ref:t,id:"planby-layout-scrollbox",className:"planby-layout",isRTL:A,onScroll:de},y.enabled&&o.createElement($t,{isVerticalMode:F,isProgramVisible:ce,channelOverlapsCount:d,isBaseTimeFormat:te,hourWidth:I,dayWidth:E,days:z,hoursInDays:a,months:P,numberOfDays:U,numberOfHoursInDay:N,numberOfMonths:j,offsetStartHoursRange:X,grid:y,gridItems:x,mode:w,sidebarWidth:S,timelineHeight:R,timelineDividers:k,renderGridCell:be}),ue&&o.createElement(Je,{className:"planby-layout-bg",isSidebar:J,isVerticalMode:F,isTimeline:Z,dayWidth:E,contentHeight:Me,sidebarWidth:S,timelineHeight:R,onClick:ue}),$&&Q&&We&&o.createElement(Cn,{isVerticalMode:F,isTimeline:Z,dayWidth:E,hourWidth:I,sidebarWidth:S,startDate:i,endDate:r,height:Me,liveRefreshTime:s,hoursInDays:a,timezone:g,renderLine:ve}),Te&&o.createElement(Xn,{isVerticalMode:F,sidebarWidth:S,hourWidth:I,areas:v,startDate:i,endDate:r,height:Me,timelineHeight:R}),Z&&(n={isVerticalMode:F,isSidebar:J,isRTL:A,isTimelineVisible:fe,isToday:Q,isBaseTimeFormat:te,isCurrentTime:ie,timezone:g,startDate:i,endDate:r,dayWidth:E,sidebarWidth:S,timelineHeight:R,offsetStartHoursRange:X,monthWidth:C,numberOfHoursInDay:N,numberOfMonths:j,numberOfDays:U,hourWidth:I,days:z,months:P,hoursInDays:a,liveRefreshTime:s,mode:w,timelineDividers:k,renderCurrentTime:ye},ge?ge(n):o.createElement(On,Object.assign({},n))),J&&o.createElement(pn,{isVerticalMode:F,isRTL:A,isTimeline:Z,isChannelVisible:he,timelineHeight:R,sidebarWidth:S,contentHeight:Me,channels:u,scrollY:l,openChannelGroupTree:le,renderChannel:me}),o.createElement(en,{className:"planby-content",isVerticalMode:F,isSidebar:J,isTimeline:Z,dayWidth:E,sidebarWidth:S,timelineHeight:R,contentHeight:Me},c.map((function(e,t){return function(e,t){var n,r,a=null!=(n=d[e.data.channelUuid])?n:1;if(null!=(r=e.data.fixedVisibility)?r:ce(e.position,a)){!function(e,t){var n=L(e);n[e.data.channelUuid][e.data.id]||(e.data.index=t,n[e.data.channelUuid][e.data.id]=e),O(n)}(e,t);var l=function(e){var t=e.isVerticalMode,n=e.program,i=e.overlap,r=f(e,b);if(i.enabled)return function(e){var t=e.isVerticalMode,n=e.program,i=e.layerOverlapLevel,r=e.overlapMode,o=n.data,a=n.position,s=e.programOverlaps[o.channelUuid];if(s){var l=s.findIndex((function(e){return e.data.id===o.id})),u=s[l];if(u){if("layer"===r&&u.data.channelPosition.top<u.position.top){var d=u.position.top*i;0!==u.data.channelPosition.top&&(d=u.data.channelPosition.top+Math.abs(u.data.channelPosition.top-u.position.top)*i);var c=h({},u.position,{top:d});return t&&(c=W(h({},u.position,{top:d}))),h({},n,{isOverlap:!0,position:c})}return h({},n,{position:t?W(u.position):u.position})}return h({},n,{position:a})}return h({},n,{position:{width:a.width,height:a.height,top:a.top,left:a.left}})}(h({isVerticalMode:t,program:n,overlap:i},r));var o=n.position;return h({},n,{position:{width:o.width,height:o.height,top:o.top,left:o.left}})}({isVerticalMode:F,program:e,programOverlaps:p,layerOverlapLevel:m,overlapMode:H,overlap:T}),u={isRTL:A,isResize:oe,isVerticalMode:F,isBaseTimeFormat:te,startDate:i,program:l,liveRefreshTime:s,snap:M,mode:w,dnd:D,dayWidth:E,contentHeight:Me,itemHeight:V,hourWidth:I,dragMouseUp:ae,resizeMouseUp:se};return pe?pe(u):o.createElement(hn,Object.assign({key:e.data.channelUuid+"-"+e.data.id},u))}return function(e){var t=L(e);t[e.data.channelUuid][e.data.id]&&delete t[e.data.channelUuid][e.data.id],O(t)}(e),null}(e,t)}))))})),nn=["isVerticalMode","program","onClick"],rn=ot,on=$e,an=at,sn=Qe,ln=rt,un=tt,dn=nt,cn=it;function hn(e){var t=e.isVerticalMode,n=e.program,i=e.onClick,o=f(e,nn),a=jt(h({isVerticalMode:t,program:n},o)),s=a.isRTL,l=a.isLive,u=a.isMinWidth,d=a.isMouseEvent,c=a.styles,p=a.resizeEvents,m=a.formatTime,g=a.getMouseEvents,v=a.getMouseEventTempTime,y=a.set12HoursTimeFormat,b=a.getRTLTillTime,x=n.data,w=x.image,D=x.title,M=x.till,T=m((0,a.getRTLSinceTime)(x.since),y()).toLowerCase(),W=m(b(M),y()).toLowerCase(),H=v();return r.createElement(rn,Object.assign({id:x.id,className:"planby-program",width:c.width,style:c.position},g()),r.createElement(on,Object.assign({className:"planby-program-content",width:c.width,isLive:l,isVerticalMode:t,onClick:function(){return null==i?void 0:i(x)}},o),r.createElement(an,Object.assign({},p.eventsLeft)),r.createElement(an,Object.assign({},p.eventsRight)),r.createElement(sn,{className:"planby-program-flex",isVerticalMode:t},l&&u&&r.createElement(cn,{isVerticalMode:t,src:w,alt:"Preview"}),r.createElement(ln,{className:"planby-program-stack",isRTL:s},r.createElement(un,{className:"planby-program-title"},D),r.createElement(dn,{className:"planby-program-text","aria-label":"program time"},d?r.createElement(r.Fragment,null,H.since," - ",H.till):r.createElement(r.Fragment,null,T," - ",W))))))}var fn=qe;function pn(e){var t=e.openChannelGroupTree,n=e.renderChannel,i=e.isVerticalMode,o=e.isRTL,a=e.isChannelVisible;return r.createElement(fn,{className:"planby-channels",isVerticalMode:i,isRTL:o,isTimeline:e.isTimeline,timelineHeight:e.timelineHeight,sidebarWidth:e.sidebarWidth,contentHeight:e.contentHeight,bottom:e.scrollY},e.channels.map((function(e){var s=function(e,t){return t?h({},e,{position:h({},e.position,{left:e.position.top,width:e.position.height})}):e}(e,i),l=a(s.position),u=function(e){var t,n,i,r=h({},e,{nestedChildren:[],isFirstNestedChild:!1,isLastNestedChild:!1}),o=function(e){var t;return null!=(t=a[null!=e?e:""])?t:null},a=S(),s=o(e.uuid),l=o(null!=(t=e.parentChannelUuid)?t:"");return e.parentChannelUuid&&l?h({},r,{isFirstNestedChild:(null==(n=l.nestedChildren)?void 0:n.at(0))===e.uuid,isLastNestedChild:(null==(i=l.nestedChildren)?void 0:i.at(-1))===e.uuid}):s?h({},r,{nestedChildren:s.nestedChildren}):r}(s),d=u.groupTree?{onOpenGroupTree:t}:{};return l?n?n(h({channel:u,isVerticalMode:i,isRTL:o},d)):r.createElement(yn,Object.assign({key:e.uuid,channel:u,isVerticalMode:i},d)):null})))}var mn=["isVerticalMode","channel","onOpenGroupTree","onClick"],gn=Ze,vn=Ke;function yn(e){var t=e.isVerticalMode,n=e.channel,i=e.onOpenGroupTree,o=e.onClick,a=f(e,mn),s=n.logo;return r.createElement(gn,Object.assign({className:"planby-channel",isVerticalMode:t,groupTree:n.groupTree,onClick:function(){var e;return null!=(e=null==i?void 0:i(n))?e:null==o?void 0:o(n)}},n.position,a),r.createElement(vn,{src:s,alt:"Logo"}))}var bn=xt,xn=wt;function wn(e){var t=e.isVerticalMode,n=e.isBaseTimeFormat,i=e.isRTL,s=e.mode,l=e.timelineHeight,u=e.sidebarWidth,d=e.renderCurrentTime,c=Bt({timezone:e.timezone,hoursInDays:e.hoursInDays,startDate:e.startDate,endDate:e.endDate,dayWidth:e.dayWidth,hourWidth:e.hourWidth,sidebarWidth:u,liveRefreshTime:e.liveRefreshTime}),f=c.showLine,p=function(e){var t=e.isVerticalMode,n=e.isBaseTimeFormat,i=e.mode,r=e.positionX,s=e.timelineHeight,l=e.sidebarWidth;return{time:o.useMemo((function(){return function(){var e=P();if("month"===i.type)return a.format(e,n?"MM/dd":"dd.MM");var t=a.format(e,"HH:mm");return n?a.format(e,"h:mm a").toLowerCase().replace(/\s/g,""):t}()}),[r,n]),getCurrentTimeStyles:function(){var e=bt({width:s}),n=e.top,i={position:e.position,width:t?e.width:"auto",height:e.height};return t?{position:h({top:r-l,left:n},i)}:{position:h({top:n,left:r-l},i)}}}}({isVerticalMode:t,isBaseTimeFormat:n,mode:s,positionX:c.positionX,timelineHeight:l,sidebarWidth:u}),m=p.time;if(!f)return null;var g=(0,p.getCurrentTimeStyles)();return d?d({isVerticalMode:t,isBaseTimeFormat:n,isRTL:i,time:m,styles:g}):r.createElement(bn,Object.assign({className:"planby-current-time"},g.position),r.createElement(xn,{className:"planby-current-content",isVerticalMode:t,isBaseTimeFormat:n,isRTL:i},m))}var Dn=["isWeekMonthMode","isMonthMode","isTodayInHoursInDays","areHoursInDays","time"],Mn=ct,Tn=ht,Wn=st,Hn=ut,Ln=dt;function On(e){var t=Xt(e),n=t.isWeekMonthMode,i=t.isMonthMode,o=t.isTodayInHoursInDays,a=t.areHoursInDays,s=t.time,l=f(t,Dn),u=l.timelineHeight,d=l.weekDayWidth,c=l.monthsWidth,h=l.dividers,p=l.timelineDividers,m=l.formatWeekMonthDate,g=l.getTime,v=l.getDayMonthName,y=l.getCurrentTimeProps,b=e.isToday,x=e.isBaseTimeFormat,w=e.isCurrentTime,D=e.isRTL,M=e.isTimelineVisible,T=e.isVerticalMode,W=e.mode,H=e.hourWidth;return r.createElement(Mn,Object.assign({className:"planby-timeline-wrapper"},(0,l.getTimelineProps)()),w&&b&&r.createElement(wn,Object.assign({},y())),s.map((function(e,t){return function(e,t){return n?function(e,t){var o=i?c[t].width:d,a={left:i?c[t].left:o*t,width:o};if(!M(a))return null;var s="modern"===W.style;return r.createElement(ft,Object.assign({className:"planby-timeline-box",key:t,isToday:b,isWeekMonthMode:n,isCurrentTime:w,isVerticalMode:T,timelineHeight:u,styleType:W.style},a),r.createElement(lt,{className:"planby-timeline-week-month-date",isRTL:D,isVerticalMode:T,styleType:W.style},s&&r.createElement("span",null,v(e)),r.createElement("span",null,m(e))))}(e,t):function(e,t){var n=g(e),i=n.isNewDay,s=n.time,l={left:H*t,width:H};return M(l)?r.createElement(Tn,Object.assign({className:"planby-timeline-box",key:t,isToday:b,isCurrentTime:w,isVerticalMode:T,isTodayInHoursInDays:o,areHoursInDays:a,timelineHeight:u},l),r.createElement(Wn,{className:"planby-timeline-time",isNewDay:i,isBaseTimeFormat:x,isRTL:D,isVerticalMode:T},s),r.createElement(Hn,{isVerticalMode:T,className:"planby-timeline-dividers"},function(e){return h.map((function(t,n){return r.createElement(Ln,{key:n,isVerticalMode:T,className:"planby-timeline-divider",isNewDay:e,left:n*(H/p),width:H/p})}))}(i))):null}(e,t)}(e,t)})))}var kn=["isTimeline","isVerticalMode","height","renderLine"],En=pt,In=mt;function Cn(e){var t=e.isTimeline,n=e.isVerticalMode,i=e.height,o=e.renderLine,a=Bt(f(e,kn));if(!a.showLine)return null;var s={height:i,left:a.positionX,zIndex:v.Line},l=function(e){var t=e.isTimeline,n=e.lineStyles,i=e.position;return e.isVerticalMode?{position:h({},i,{position:n.position,top:i.left,left:t?n.top:0,width:i.height,height:n.width})}:{position:h({},i,{position:n.position,top:t?n.top:0,width:n.width})}}({isVerticalMode:n,isTimeline:t,lineStyles:En,position:s});return o?r.createElement(r.Fragment,null,o({styles:l,isVerticalMode:n,isTimeline:t})):r.createElement(In,Object.assign({className:"planby-line",isVerticalMode:n,isTimeline:t},s))}var Sn=vt,Rn=yt,Vn=function(e){return r.createElement(Rn,{className:"SHAPE",width:e.width,color:e.color,animate:e.animate,transition:e.transition,marginRight:e.marginRight})};function zn(){return r.createElement(Sn,{"aria-label":"loading"},r.createElement("div",null,r.createElement("div",{style:{display:"flex",justifyContent:"end",marginBottom:16}},r.createElement(Vn,{animate:{right:["0px","75px","0px"]},transition:{duration:1},width:217,color:"teal",marginRight:10}),r.createElement(Vn,{width:122,color:"purple",animate:{right:["0px","50px","0px"]},transition:{duration:1,delay:.02}})),r.createElement("div",{style:{display:"flex",justifyContent:"end",marginBottom:16}},r.createElement(Vn,{width:267,color:"pink",animate:{right:["0px","70px","0px"]},transition:{delay:.5,duration:1}})),r.createElement("div",{style:{display:"flex",justifyContent:"end"}},r.createElement(Vn,{width:217,color:"purple",marginRight:10,animate:{right:["0px","95px","0px"]},transition:{delay:.3,duration:1}}),r.createElement(Vn,{width:80,color:"teal",animate:{right:["0px","70px","0px"]},transition:{duration:1,delay:.33}}))))}var Pn=["isVerticalMode"],Nn=Tt,Un=Mt,jn=Dt;function Xn(e){var t,n,i,s,l,u,d,c,p,m=e.isVerticalMode,g=(t=f(e,Pn),n=t.startDate,i=t.endDate,s=t.areas,l=t.hourWidth,u=t.sidebarWidth,d=t.timelineHeight,c=t.height,p=JSON.stringify(s),{data:r.useMemo((function(){return s.map((function(e){return function(e){var t,n=e.area,i=e.startDate,r=e.endDate,o=e.hourWidth,s=e.sidebarWidth,l=e.timelineHeight,u=e.height,d=n.startDate,c=null!=(t=null==n?void 0:n.endDate)?t:d,f=X(i,d,i,r,o)+s,p=X(d,c,i,r,o),m={start:new Date(i),end:new Date(r)};return h({},n,{showArea:a.isWithinInterval(new Date(d),m),areaFieldStyles:{positionX:f,width:p,height:u,timelineHeight:l},areaBgStyles:n.styles})}({area:e,hourWidth:l,sidebarWidth:u,height:c,startDate:n,endDate:i,timelineHeight:d})}))}),[p,l,u,c,n,i,d])}),v=function(e){var t=e.isLeft,n=e.areaFieldStyles;return o.createElement(Nn,{className:"planby-area-annotation-"+(t?"left":"right"),isVerticalMode:m,isLeft:t,timelineHeight:n.timelineHeight,width:n.width,style:e.styles},e.text)};return o.createElement(o.Fragment,null,g.data.map((function(e,t){return function(e,t){var n,i=e.annotations,r=e.onClick,a=e.areaBgStyles,s=void 0===a?{}:a,l=e.areaFieldStyles;if(!e.showArea)return null;var u={areaFieldStyles:l,styles:null!=(n=null==i?void 0:i.styles)?n:{}};return o.createElement(jn,Object.assign({key:t,className:"planby-area-field",isVerticalMode:m,isClickable:!!r,onClick:r},l),o.createElement(Un,{className:"planby-area-bg",style:s}),i&&o.createElement(o.Fragment,null,i.textStart&&v(h({isLeft:!0,text:i.textStart},u)),i.textEnd&&v(h({isLeft:!1,text:i.textEnd},u))))}(e,t)})))}var Bn=["children","width","height","sidebarWidth","timelineHeight","theme","globalStyles","isVerticalMode","isRTL","isSidebar","isTimeline","isLoading","loader"],Yn=Ye,Fn=Fe,Gn=Ae,An=o.forwardRef((function(e,t){var i=e.children,r=e.width,a=e.height,s=e.sidebarWidth,l=e.timelineHeight,u=e.theme,d=e.globalStyles,c=e.isVerticalMode,h=void 0!==c&&c,p=e.isRTL,m=void 0!==p&&p,g=e.isSidebar,v=void 0===g||g,b=e.isTimeline,x=void 0===b||b,w=e.isLoading,D=void 0!==w&&w,M=e.loader,T=f(e,Bn),W=h?{height:s,width:l}:{width:s,height:l};return o.createElement(n.ThemeProvider,{theme:u},o.createElement(n.Global,{styles:null!=d?d:y}),o.createElement(Yn,Object.assign({className:"planby",width:r,height:a,ref:t},T),o.createElement(_n,null,v&&x&&o.createElement(Gn,{className:"planby-corner-box",isRTL:m,left:0,top:0,style:W}),D&&(null!=M?M:o.createElement(zn,null)),i)))}));function _n(e){var t=e.children,n=Ft(),i=n.isDragOver,r=n.onDragEnter,a=n.onDragLeave,s=n.dropAreaRef;return o.useEffect((function(){var e=document.querySelector(".planby-grid");e&&(e.style.zIndex=i?"5":"1")}),[i]),o.createElement(Fn,{ref:s,id:"planby-wrapper",onDragOver:r,onDragLeaveCapture:a,onDrop:a},t)}var Jn=Ke,qn=xt,Zn=wt,Kn=Ht,$n=Lt,Qn=ot,ei=$e,ti=Qe,ni=rt,ii=tt,ri=nt,oi=it,ai=at,si=ct,li=ht,ui=st,di=ut,ci=ft,hi=lt,fi=dt;exports.ChannelBox=Ze,exports.ChannelLogo=Jn,exports.CurrentTime=wn,exports.CurrentTimeBox=qn,exports.CurrentTimeContent=Zn,exports.Epg=An,exports.GridDivider=$n,exports.GridItem=Kn,exports.Layout=tn,exports.ProgramBox=Qn,exports.ProgramContent=ei,exports.ProgramFlex=ti,exports.ProgramImage=oi,exports.ProgramResizeHandle=ai,exports.ProgramStack=ni,exports.ProgramText=ri,exports.ProgramTitle=ii,exports.TimelineBox=li,exports.TimelineDivider=fi,exports.TimelineDividers=di,exports.TimelineTime=ui,exports.TimelineWeekMonthBox=ci,exports.TimelineWeekMonthDate=hi,exports.TimelineWrapper=si,exports.useEpg=function(e){var t=e.isVerticalMode,n=void 0!==t&&t,i=e.isRTL,r=void 0!==i&&i,d=e.isResize,p=void 0!==d&&d,m=e.isBaseTimeFormat,v=void 0!==m&&m,y=e.isSidebar,b=void 0===y||y,W=e.isTimeline,L=void 0===W||W,O=e.isLine,k=void 0===O||O,V=e.isCurrentTime,z=void 0!==V&&V,U=e.isInitialScrollToNow,j=void 0===U||U,Y=e.width,A=e.height,_=e.channels,q=e.epg,Z=e.startDate,K=void 0===Z?Ct:Z,$=e.endDate,Q=void 0===$?"":$,ee=e.hoursInDays,te=void 0===ee?[]:ee,ie=e.initialScrollPositions,re=void 0===ie?{}:ie,oe=e.liveRefreshTime,se=void 0===oe?120:oe,le=e.timelineDividers,ue=void 0===le?4:le,de=e.snap,ce=e.mode,he=void 0===ce?St:ce,fe=e.overlap,pe=void 0===fe?Vt:fe,me=e.timezone,ge=e.areas,ve=void 0===ge?[]:ge,ye=e.grid,be=void 0===ye?zt:ye,xe=e.dnd,we=void 0===xe?Pt:xe,De=e.theme,Me=e.globalStyles,Te=e.dayWidth,We=void 0===Te?7200:Te,He=e.sidebarWidth,Le=void 0===He?100:He,Oe=e.timelineHeight,ke=void 0===Oe?60:Oe,Ee=e.itemHeight,Ie=void 0===Ee?80:Ee,Ce=e.itemOverscan,Se=void 0===Ce?80:Ce,Re=e.channelMapKey,Ve=void 0===Re?"uuid":Re,ze=e.programChannelMapKey,Pe=void 0===ze?"channelUuid":ze,Ne=h({},Rt,void 0===me?Rt:me),Ue=h({},St,he),Xe=h({},Vt,pe),Be=Xe.enabled,Ye="multi-rows"===we.mode,Fe=function(e,t){var n=t;return""===t&&(n=F(a.startOfDay(a.addDays(D(e),1)))),{startDate:e,endDate:n}}(K,Q),Ge=Fe.startDate,Ae=Fe.endDate,_e=JSON.stringify(te),Je=o.useMemo((function(){return function(e){var t=e.startDate,n=e.customHoursInDays;if(0===n.length)return[];var i=0;return n.reduce((function(e,n){var r=0,o=e[e.length-1];o||(r=a.differenceInHours(D(n.startTimeHour),D(t))),o&&(r=a.differenceInHours(D(n.startTimeHour),D(o.endTimeHour)),r+=o.diffLeft,i+=o.diffInHours);var s=a.differenceInHours(D(n.endTimeHour),D(n.startTimeHour)),l=Number(a.format(D(n.startTimeHour),"H")),u=Number(a.format(D(n.endTimeHour),"H")),d=h({},n,{diffLeft:r,diffInHours:s,prevItemDiffInHours:i,startTime:l,endTime:u});return e.push(d),e}),[])}({customHoursInDays:te,startDate:Ge})}),[_e]),qe=o.useMemo((function(){return function(e){var t=e.startDate,n=e.endDate,i=e.modeType,r=a.format(T(t),"yyyy-MM-dd"),o=a.format(T(n),"yyyy-MM-dd"),l="day"===i?1:0,u=a.differenceInDays(s.toDate(o),s.toDate(r))+l,d={start:new Date(t),end:new Date(n)},c=a.eachDayOfInterval(d).map((function(e){return a.format(e,"yyyy-MM-dd")})),h=a.eachMonthOfInterval(d).map((function(e){return a.format(e,"yyyy-MM-dd")})),f=c.map((function(e){return a.isToday(s.toDate(e))}));return{isToday:f.some((function(e){return!0===e})),currentDate:c[f.indexOf(!0)],numberOfDays:u,days:c,months:h}}({startDate:Ge,endDate:Ae,modeType:Ue.type})}),[Ge,Ae,Ue.type]),Ze=qe.isToday,Ke=qe.currentDate,$e=f(qe,kt),Qe=o.useMemo((function(){return function(e){var t=e.dayWidth,n=e.endDate,i=e.hoursInDays,r=e.modeType,o={hourWidth:0,numberOfMonths:0,numberOfHoursInDay:0,monthWidth:0,offsetStartHoursRange:0,dayWidth:0},s=new Date(e.startDate),l=new Date(n);if(l<s&&console.error("Invalid endDate property. Value of endDate must be greater than startDate. Props: startDateTime: "+s+", endDateTime: "+l),"week"===r||"month"===r){var u=a.startOfMonth(a.addMonths(l,1)),d=a.differenceInMonths(u,s),c=a.differenceInDays(l,s),f=Math.floor(t/c)/24,p=24*f*c;return h({},o,{hourWidth:M(f),dayWidth:M(p),numberOfMonths:d})}if(i.length>0){var m=i.reduce((function(e,t){return e+t.diffInHours}),0),g=t/m,v=g*m;return h({},o,{hourWidth:M(g),dayWidth:M(v),numberOfHoursInDay:M(m)})}var y=a.differenceInHours(s,a.startOfDay(s)),b=a.differenceInHours(l,s),x=Math.floor(t/b),w=x*b;return h({},o,{hourWidth:M(x),dayWidth:M(w),numberOfHoursInDay:M(b),offsetStartHoursRange:M(y)})}({dayWidth:We,startDate:Ge,endDate:Ae,hoursInDays:Je,modeType:Ue.type})}),[We,Ge,Ae,Je,Ue.type]),et=Qe.hourWidth,tt=Qe.dayWidth,nt=f(Qe,Et),it=o.useReducer((function(e){return e+1}),0),rt=it[0],ot=it[1],at=o.useReducer((function(e){return e+1}),0),st=at[0],lt=at[1],ut=o.useState({index:-1,uuid:""}),dt=ut[0],ct=ut[1],ht=o.useState((function(){return 0})),ft=ht[0],pt=ht[1],mt=o.useState({}),gt=mt[0],vt=mt[1],yt=o.useState({}),bt=yt[0],xt=yt[1],wt=JSON.stringify(Ne);o.useMemo((function(){Ne.enabled&&function(e){R=e}(Ne)}),[wt]),o.useEffect((function(){ot(),ct({index:-1,uuid:""})}),[n]);var Dt=function(e){var t,n=e.isVerticalMode,i=e.isToday,r=e.isInitialScrollToNow,s=e.initialScrollPositions,u=e.height,d=e.width,c=e.channelsNumber,h=e.startDate,f=e.endDate,p=e.hourWidth,m=e.sidebarWidth,g=e.hoursInDays,v=w(),y=o.useRef(null),b=o.useRef(null),x=o.useState(0),D=x[0],M=x[1],T=o.useState(0),W=T[0],H=T[1],L=o.useState(d),O=L[0],k=L[1],E=o.useState(u),I=E[0],C=E[1],S=null==b||null==(t=b.current)?void 0:t.scrollHeight,R=JSON.stringify(s),V=l.useDebouncedCallback((function(e){M(e.y),H(e.x)}),100,{maxWait:100}),z=o.useCallback((function(e){V({y:e.target.scrollTop,x:e.target.scrollLeft})}),[V]),N=JSON.stringify(g),U=o.useMemo((function(){return g.length>0}),[N]),j=o.useCallback((function(){if(null!=b&&b.current&&i){var e,t=null!=d?d:null==(e=y.current)?void 0:e.clientWidth,r=new Date(h),o=X(a.startOfDay(r),P(),h,f,p);U&&(o=J({hoursInDays:g,hourWidth:p,sidebarWidth:m}));var s=o-t/2+m;n?b.current.scrollTop=s+p:b.current.scrollLeft=s}}),[n,i,U,d,p,m,h,f]),B=o.useCallback((function(){var e=Object.keys(s).length;if(null!=b&&b.current&&e){var t=s.top,n=s.left;b.current.scrollTo({behavior:"smooth",top:void 0===t?0:t,left:void 0===n?0:n})}}),[R,S]),Y=o.useCallback((function(e){void 0===e&&(e=p),null!=b&&b.current&&(b.current.scrollTop=b.current.scrollTop+e)}),[p]),F=o.useCallback((function(e){void 0===e&&(e=p),null!=b&&b.current&&(b.current.scrollLeft=b.current.scrollLeft+e)}),[p]),G=o.useCallback((function(e){void 0===e&&(e=p),null!=b&&b.current&&(b.current.scrollLeft=b.current.scrollLeft-e)}),[p]),A=l.useDebouncedCallback((function(){null!=y&&y.current&&!d&&k(y.current.clientWidth)}),400,{maxWait:400}),_=o.useCallback((function(e){if(void 0===e&&(e=0),null!=b&&b.current){if(n){var t=b.current,i=t.scrollLeft;return 0!==i&&t.scrollWidth-i-e<=t.clientWidth}var r=b.current,o=r.scrollTop;return 0!==o&&r.scrollHeight-o-e<=r.clientHeight}return!1}),[n,W,D,c]),q=o.useCallback((function(e){if(void 0===e&&(e=0),null!=b&&b.current){if(n){var t=b.current,i=t.scrollTop;return 0!==i&&t.scrollHeight-i-e<=t.clientHeight}var r=b.current,o=r.scrollLeft;return 0!==o&&r.scrollWidth-o-e<=r.clientWidth}return!1}),[W,D,c]);return v((function(){if(null!=y&&y.current){var e=y.current;d||k(e.clientWidth),u||C(e.clientHeight)}}),[u,d,h]),v((function(){var e=Object.keys(s).length;null!=b&&b.current&&(e?B():r&&j())}),[i,r,R]),v((function(){return window.addEventListener("resize",A),function(){window.removeEventListener("resize",A)}}),[d]),{containerRef:y,scrollBoxRef:b,scrollX:W,scrollY:D,layoutWidth:O,layoutHeight:I,isLayoutBottom:_,isLayoutRight:q,onScroll:z,onScrollToNow:j,onScrollTop:Y,onScrollLeft:G,onScrollRight:F}}({isVerticalMode:n,isToday:Ze,isInitialScrollToNow:j,initialScrollPositions:re,startDate:Ge,endDate:Ae,sidebarWidth:Le,width:Y,height:A,hourWidth:et,currentDate:Ke,hoursInDays:Je,channelsNumber:_.length}),Mt=Dt.isLayoutBottom,Tt=Dt.isLayoutRight,Wt=Dt.containerRef,Ht=Dt.scrollBoxRef,Lt=f(Dt,It);o.useEffect((function(){return function(){H={}}}),[]);var Nt=Lt.scrollX,Ut=Lt.scrollY,jt=Lt.layoutWidth,Xt=Lt.layoutHeight,Bt=Lt.onScroll,Yt=Lt.onScrollToNow,Ft=Lt.onScrollTop,Gt=Lt.onScrollLeft,At=Lt.onScrollRight,_t=function(e,t){return"week"!==t.type&&"month"!==t.type||"modern"!==t.style?e:80}(ke,Ue),Jt=o.useMemo((function(){return JSON.stringify(_)}),[_]),qt=o.useMemo((function(){return bt}),[JSON.stringify(bt)]),Zt=o.useMemo((function(){return function(e,t,n,i,r,o,a){var s=0,l="stack"===t,u="layer"===t;return i.reduce((function(t,i,d){var c=a[i[o]];i.groupTree&&i.uuid&&function(e){C[e.uuid]={uuid:e.uuid,isOpen:e.isOpen,groupTree:e.groupTree}}(i);var f=S()[i.parentChannelUuid];if(f&&i.parentChannelUuid){if(function(e,t){var n,i=C[e];C[e]=h({},i,{nestedChildren:[].concat(null!=(n=i.nestedChildren)?n:[],[t])})}(f.uuid,i.uuid),i.isNestedChild=!0,null==f||!f.isOpen)return t}else i.isNestedChild=!1;var p=1,m=null!=c?c:0;e&&(l||u)&&m>0&&(p=c);var g=function(e,t){return{top:t*e,height:t}}(d,r*p);e&&l&&(g.top=s,s+=g.height),e&&u&&(m>0?(g.top=s,g.height=m<=1?g.height:r*n*(m-1)+r,s+=g.height):(g.top=s,s+=g.height));var v=h({},i,{uuid:i[o],index:d,position:g});return t.push(v),t}),[])}(Be,Xe.mode,Xe.layerOverlapLevel,_,Ie,Ve,bt)}),[Be,Xe.mode,Xe.layerOverlapLevel,Jt,qt,Ie,Ve,ft,st]),Kt=F(Ge),$t=F(Ae),Qt=o.useMemo((function(){return JSON.stringify(Zt)}),[Zt]),en=o.useMemo((function(){return gt}),[JSON.stringify(gt)]),tn=o.useMemo((function(){var e=function(e){var t=e.isVerticalMode,n=e.isOverlapEnabled,i=e.programChannelMapKey,r=e.channels,o=e.startDate,a=e.endDate,s=e.itemHeight,l=e.hourWidth,u=e.hoursInDays,d=0;return e.data.map((function(e,c,f){var p,m,g;e.channelUuid=e[i],(null==(p=f[c-1])?void 0:p[i])!==e[i]&&E({uuid:e[i],first:d=c}),E({uuid:e[i],first:d,last:c});var v,y=r.findIndex((function(t){return t.uuid===e.channelUuid}));e.channelIndex=y,e.channelPosition=null==(m=r[y])?void 0:m.position,e.index=c,null!=(g=r[y])&&g.parentChannelUuid&&(e.parentChannelUuid=null==(v=r[y])?void 0:v.parentChannelUuid);var b=function(e,t,n,i,r,o,a){var s=h({},e,{since:G(e.since),till:G(e.till)}),l=function(e,t){var n=B(new Date(e));return B(new Date(t))>n}(s.since,r),u=X(s.since,s.till,r,o,i),d=n*t,c=X(r,s.since,r,o,i);l&&(c=0),d<0&&(u=0);var f={width:u,height:n,top:d,left:c,edgeEnd:X(r,s.till,r,o,i)};return a&&(f=h({},f,{top:c,left:d,width:n,height:u})),{position:f,data:s}}(e,y,s,l,o,a,t);if(n&&y>0){var x=r[y-1].position,w=x.top+x.height;t?b.position.left=w:b.position.top=w}if(0===u.length)return b;var D=function(e){var t=e.isVerticalMode,n=e.position,i=e.since,r=e.hourWidth,o=e.hoursInDays.find((function(e){return i.includes(e.date)}));if(!o)return{position:n};if(t){var a=o.diffLeft*r;return h({},n,{top:n.top-a,edgeEnd:n.edgeEnd-a})}var s=o.diffLeft*r;return h({},n,{left:n.left-s,edgeEnd:n.edgeEnd-s})}({isVerticalMode:t,hoursInDays:u,position:b.position,since:b.data.since,hourWidth:l});return b.position=D,b}),[])}({isVerticalMode:n,isOverlapEnabled:Be,programChannelMapKey:Pe,data:q,channels:Zt,startDate:Kt,endDate:$t,hoursInDays:Je,itemHeight:Ie,hourWidth:et});if(Be){var t=function(e,t,n,i,r){var o=h({},i),a={},s={},l=I(n.uuid);if(!e&&l){var u,d=function(e,t,n){for(var i={},r=0,o=Object.keys(t);r<o.length;r++){var a,s,l=o[r],u=null==(a=t[l])||null==(a=a[0])?void 0:a.data.channelIndex,d=null==(s=t[l])||null==(s=s[0])?void 0:s.data.channelUuid;if(void 0!==u&&u>n){var c=I(l),h=e.slice(c.first,c.last+1);i[d]=h}}return i}(r,o,n.index);s=h(((u={})[n.uuid]=r.slice(l.first,l.last+1),u),d)}else s=function(e){for(var t,n=new Map,i=g(e);!(t=i()).done;){var r=t.value,o=r.data.channelUuid;n.has(o)||n.set(o,[]),n.get(o).push(r)}return Object.fromEntries(n)}(r);for(var c in s){var f=ae(t,i,s[c]);o[c]=f.overlaps[c],a[c]=f.channelOverlaps[c]}for(var p in o){var m;null!=o&&o[p]&&0===(null==(m=Object.keys(null==o?void 0:o[p]))?void 0:m.length)&&delete o[p]}return{overlaps:o,channelOverlaps:a}}(Ye,n,dt,gt,e),i=t.overlaps;return xt(h({},bt,t.channelOverlaps)),pt((function(e){return e+1})),vt(i),{programs:e,programOverlaps:i}}return{programs:e,programOverlaps:{}}}),[Ye,Be,n,q,Qt,en,Kt,$t,Ie,et,Je,Pe,wt,rt]),nn=tn.programs,rn=tn.programOverlaps,on=o.useMemo((function(){return be.enabled?function(e){var t=e.isVerticalMode,n=e.dayWidth,i=e.hourWidth,r=e.timelineHeight,o=e.sidebarWidth,a=e.mode,s=e.dayWidthResources,l=e.daysResources,u="month"===a.type,d=function(){return"day"===a.type?s.numberOfHoursInDay:"week"===a.type?l.numberOfDays:s.numberOfMonths},c=function(){return ne({months:l.months,weekDayWidth:24*i})};return e.channels.flatMap((function(e){return x(d()).map((function(i,a){return function(e,i){var a=0,s=0;u?(a=c()[i].width,s=c()[i].left):s=(a=n/d())*i;var l={top:e.position.top,left:s,width:a,height:e.position.height,edgeEnd:s+a};return{position:l=h({},l,t?{left:l.top+r,top:l.left+o,width:l.height,height:l.width}:{top:l.top+r,left:s+o,width:a,height:l.height}),channel:e}}(e,a)}))}))}({isVerticalMode:n,channels:Zt,dayWidth:tt,hourWidth:et,timelineHeight:_t,sidebarWidth:Le,mode:Ue,dayWidthResources:nt,daysResources:$e}):[]}),[be.enabled,Qt,Ue.type,nt.numberOfHoursInDay,nt.numberOfMonths,$e.numberOfDays,tt,et,Le,_t,n]),an=h({},Ot,De),sn=o.useCallback((function(e,t){return function(e){var t=e.position,n=e.scrollY,i=e.scrollX,r=e.containerHeight,o=e.containerWidth,a=e.overlapsCount,s=0===a?1:a;if(e.isVerticalMode){if(t.height<=0)return!1;if(i>t.left+2*t.width*s)return!1;if(i+o<=t.left)return!1;if(n+r>=t.top&&n<=t.edgeEnd)return!0}else{if(t.width<=0)return!1;if(n>t.top+3*e.itemOverscan*s)return!1;if(n+r<=t.top)return!1;if(i+o>=t.left&&i<=t.edgeEnd)return!0}return!1}({isVerticalMode:n,itemOverscan:Se,overlapsCount:t,position:e,scrollY:Ut,scrollX:Nt,containerHeight:Xt,containerWidth:jt})}),[n,Se,Xt,jt,Ut,Nt]),ln=o.useCallback((function(e){return function(e){var t=e.position,n=e.scrollX,i=e.scrollY,r=e.itemOverscan;if(e.isVerticalMode){var o=t.left+t.height;if(n>o+3*r)return!1;if(n+e.containerWidth<=o-t.height)return!1}else{if(i>t.top+t.height+3*r)return!1;if(i+e.containerHeight<=t.top)return!1}return!0}({isVerticalMode:n,itemOverscan:Se,position:e,scrollX:Nt,scrollY:Ut,containerHeight:Xt,containerWidth:jt})}),[n,Se,Ut,Nt,Xt,jt]),un=o.useCallback((function(e){return function(e){var t=e.position,n=e.scrollY,i=e.scrollX;if(e.isVerticalMode){if(n>t.left+2*t.width)return!1;if(n+e.containerHeight<=t.left)return!1}else{if(i>t.left+2*t.width)return!1;if(i+e.containerWidth<=t.left)return!1}return!0}({position:e,scrollY:Ut,scrollX:Nt,containerHeight:Xt,containerWidth:jt,isVerticalMode:n})}),[Ut,Nt,Xt,jt,n]),dn=o.useCallback((function(e){return null==we||null==we.onDnDSuccess?void 0:we.onDnDSuccess(e)}),[]),cn=o.useCallback((function(e){var t=je(h({},e,{hourWidth:et,startDate:Ge}));q[e.index].since=t.since,q[e.index].till=t.till,ct({index:q[e.index].channelIndex,uuid:q[e.index][Pe]}),dn(q[e.index]),ot()}),[n,Ge,et,nn]),hn=o.useCallback(function(){var e=c(u().mark((function e(t){var n,i,r,o,a,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=je(h({},t,{hourWidth:et,startDate:Ge})),i=h({},q[t.index]),r=function(){var e=i.channelPosition;return t.top>e.top+e.height-1||t.top<e.top-1},o=(u=i.channelPosition).top<=t.top&&t.top<=u.top+u.height,a=r(),Ye&&a?(s=Zt.find((function(e){return e.position.top===t.top})),l=Zt.find((function(e){return e.position.top<=t.top&&t.top<=e.position.top+e.position.height})),s?I(s[Ve])?(q[t.index].since=n.since,q[t.index].till=n.till,q[t.index][Pe]=s[Ve],q[t.index].channelIndex=s.index,q[t.index].channelPosition={top:s.position.top,height:s.position.height,left:s.position.left}):(E({uuid:s[Ve],first:t.index,last:t.index}),q[t.index].since=n.since,q[t.index].till=n.till,q[t.index][Pe]=s[Ve],q[t.index].channelIndex=s.index,q[t.index].channelPosition={top:s.position.top,height:s.position.height,left:s.position.left}):l&&(q[t.index].since=n.since,q[t.index].till=n.till,q[t.index][Pe]=l[Ve],q[t.index].channelIndex=l.index,q[t.index].channelPosition={top:l.position.top,height:l.position.height,left:l.position.left})):Ye&&o?(q[t.index].since=n.since,q[t.index].till=n.till):(q[t.index].since=n.since,q[t.index].till=n.till,ct({index:q[t.index].channelIndex,uuid:q[t.index][Pe]})),dn(q[t.index]),ot();case 9:case"end":return e.stop()}var u}),e)})));return function(t){return e.apply(this,arguments)}}(),[Ye,Ge,et,nn]),fn=o.useCallback((function(e){return e.map((function(e){return h({},e.data)}))}),[]),pn=o.useCallback((function(e){_[e.index].isOpen=!_[e.index].isOpen,lt()}),[Zt]);return{isLayoutBottom:Mt,isLayoutRight:Tt,getEpgProps:function(){return{isVerticalMode:n,isRTL:r,isSidebar:b,isLine:k,isTimeline:L,width:Y,height:A,sidebarWidth:Le,timelineHeight:_t,ref:Wt,theme:an,globalStyles:Me}},getLayoutProps:function(){return h({isVerticalMode:n,isRTL:r,isBaseTimeFormat:v,isSidebar:b,isTimeline:L,isLine:k,isCurrentTime:z,isProgramVisible:sn,isChannelVisible:ln,isTimelineVisible:un,isToday:Ze,isResize:p,programs:nn,programOverlaps:rn,channels:Zt,channelOverlapsCount:bt,layerOverlapLevel:Xe.layerOverlapLevel,snap:de,grid:be,gridItems:on,dnd:we,startDate:Ge,endDate:Ae,hoursInDays:Je,liveRefreshTime:se,scrollY:Ut,dayWidth:tt,hourWidth:et,sidebarWidth:Le,timelineHeight:_t,itemHeight:Ie,currentDate:Ke,mode:Ue,timezone:Ne,timelineDividers:ue,overlapMode:Xe.mode,overlap:Xe,areas:ve,openChannelGroupTree:pn,onScroll:Bt,dragMouseUp:hn,resizeMouseUp:cn},$e,nt,{ref:Ht})},getLayoutData:fn,getDropItemData:o.useCallback((function(e){return function(e,t){var n,i,r=(n=[(i=function(e){for(var t="",n=0;n<e;n++)t+="abcdef0123456789"[Math.floor(Math.random()*"abcdef0123456789".length)];return t})(8),i(4),"89ab"[4*Math.random()|0]+i(3),"89ab"[4*Math.random()|0]+i(3),i(12)])[0]+"-"+n[1]+"-4"+n[2].substring(1)+"-"+"89ab"[Math.floor(4*Math.random())]+n[3].substring(1)+"-"+n[4],o=e.date+" "+e.since,s=e.date+" "+e.till;return"week"===t?s=N(a.endOfDay(new Date(s)),"yyyy-MM-dd HH:mm:ss"):"month"===t&&(s=N(a.addDays(a.endOfDay(new Date(s)),20),"yyyy-MM-dd HH:mm:ss")),h({id:r,title:"",image:""},e,{since:o,till:s})}(e,Ue.type)}),[Ue.type]),onScrollToNow:Yt,onScrollTop:Ft,onScrollLeft:Gt,onScrollRight:At,scrollY:Ut,scrollX:Nt}},exports.useGridExternalDnD=Ft,exports.useProgram=jt,exports.useTimeline=Xt;
//# sourceMappingURL=planby-pro.cjs.production.min.js.map
