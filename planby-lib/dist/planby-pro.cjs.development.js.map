{"version":3,"file":"planby-pro.cjs.development.js","sources":["../src/Epg/styles/global.styles.ts","../src/Epg/helpers/enums.ts","../src/Epg/helpers/variables.ts","../src/Epg/helpers/common.ts","../src/Epg/helpers/layout.ts","../src/Epg/utils/time.ts","../src/Epg/helpers/epg.ts","../src/Epg/helpers/time.ts","../src/Epg/helpers/timeline.ts","../src/Epg/helpers/line.ts","../src/Epg/helpers/channels.ts","../src/Epg/helpers/overlaps.ts","../src/Epg/helpers/drag.ts","../src/Epg/helpers/grid.ts","../src/Epg/styles/Epg.styles.ts","../src/Epg/styles/Channels.styles.ts","../src/Epg/styles/Channel.styles.ts","../src/Epg/styles/Program.styles.ts","../src/Epg/styles/Timeline.styles.ts","../src/Epg/styles/Line.styles.ts","../src/Epg/styles/Loader.styles.ts","../src/Epg/styles/CurrentTime.styles.ts","../src/Epg/styles/Area.styles.ts","../src/Epg/styles/Grid.styles.ts","../src/Epg/theme/theme.ts","../src/Epg/hooks/useLayout.tsx","../src/Epg/hooks/useEpg.tsx","../src/Epg/hooks/useInterval.tsx","../src/Epg/hooks/useIsTouchDevice.tsx","../src/Epg/hooks/useDrag.tsx","../src/Epg/hooks/useResize.tsx","../src/Epg/hooks/useProgram.tsx","../src/Epg/hooks/useTimeline.tsx","../src/Epg/hooks/useLine.tsx","../src/Epg/hooks/useCurrentTime.tsx","../src/Epg/hooks/useGrid.tsx","../src/Epg/hooks/useGridExternalDnD.tsx","../src/Epg/components/GridDividerItem.tsx","../src/Epg/components/GridCellItem.tsx","../src/Epg/components/Grid.tsx","../src/Epg/components/Layout.tsx","../src/Epg/components/Program.tsx","../src/Epg/components/Channels.tsx","../src/Epg/components/Channel.tsx","../src/Epg/components/CurrentTime.tsx","../src/Epg/components/Timeline.tsx","../src/Epg/components/Line.tsx","../src/Epg/components/Loader.tsx","../src/Epg/helpers/areas.ts","../src/Epg/hooks/useAreas.tsx","../src/Epg/components/Areas.tsx","../src/Epg/Epg.tsx","../src/Epg/index.ts"],"sourcesContent":["import { css } from \"@emotion/react\";\n\nexport const globalStyles = css`\n  @import url(\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap\");\n\n  .planby {\n    font-family: \"Inter\", system-ui, -apple-system,\n      /* Firefox supports this but not yet system-ui */ \"Segoe UI\", Roboto,\n      Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\"; /* 2 */\n  }\n`;\n","export enum Layers {\n  Sidebar = 9,\n  EpgCornerBox = 10,\n  Line = 9,\n  Loader = 12,\n  Program = 1,\n  Timeline = 9,\n  Area = 2,\n}\n","// Dimensions\nexport const DAY_WIDTH = 7200;\nexport const HOURS_IN_DAY = 24;\n\nexport const HOUR_IN_MINUTES = 60;\nexport const SECONDS_IN_MINUTE = 60;\n\nexport const TIMELINE_HEIGHT = 60;\nexport const TIMELINE_HEIGHT_MODERN_STYLE = 80;\nexport const TIMELINE_WIDTH_VERTICAL = 70;\nexport const TIMELINE_DIVIDERS = 4;\n\nexport const SIDEBAR_WIDTH = 100;\nexport const ITEM_HEIGHT = 80;\n\nexport const ITEM_OVERSCAN = ITEM_HEIGHT;\n\n// Debounce\nexport const DEBOUNCE_WAIT = 100;\nexport const DEBOUNCE_WAIT_MAX = 100;\n\n// Live refresh time\nexport const LIVE_REFRESH_TIME = 120;\n\n// Theme\nexport const THEME_MODE = {\n  DARK: \"dark\",\n  LIGHT: \"light\",\n};\n\nexport const TIME_FORMAT = {\n  DEFAULT: \"yyyy-MM-dd HH:mm:ss\",\n  DATE: \"yyyy-MM-dd\",\n  DAY: \"EEE\",\n  DAY_DATE: \"dd\",\n  MONTH: \"LLL\",\n  DAY_MONTH: \"dd.MM\",\n  BASE_DAY_MONTH: \"MM/dd\",\n  HOURS_MIN: \"HH:mm\",\n  BASE_HOURS_TIME: \"h:mm a\",\n  YEAR: \"yyyy\",\n};\n\n// Overlap mode\nexport const OVERLAP_MODES = {\n  STACK: \"stack\",\n  LAYER: \"layer\",\n};\n\n// Timezone mode\nexport const TIMEZONE_MODES = {\n  UTC_TO_ZONED_TIME: \"utc\",\n};\n","import { useLayoutEffect, useEffect } from \"react\";\nimport {\n  Interval,\n  isToday as isTodayFns,\n  format,\n  differenceInHours,\n  differenceInDays,\n  startOfDay,\n  eachDayOfInterval,\n  eachMonthOfInterval,\n  differenceInMonths,\n  startOfMonth,\n  addMonths,\n} from \"date-fns\";\nimport { toDate } from \"date-fns-tz\";\n\n// Import interfaces\nimport {\n  HoursInDayDiffTime,\n  Mode,\n  Overlap,\n  ProgramOverlaps,\n} from \"./interfaces\";\n\n// Import types\nimport { ProgramItem } from \"./types\";\n\n// Import variables\nimport { HOURS_IN_DAY, OVERLAP_MODES, TIME_FORMAT } from \"./variables\";\n\ntype DateTime = string | number | Date;\n\ntype OmitObjectType = { [key: string]: any };\nexport const omit = (obj: OmitObjectType, ...props: string[]) => {\n  const result = { ...obj };\n\n  for (const property of props) {\n    delete result[property];\n  }\n\n  return result;\n};\n\nexport const generateArray = (num: number) => new Array(num).fill(\"\");\n\ninterface OverlapProgramOptions {\n  isVerticalMode: boolean;\n  program: ProgramItem;\n  programOverlaps: ProgramOverlaps;\n  layerOverlapLevel: number;\n  overlap: Overlap;\n  overlapMode: Overlap[\"mode\"];\n}\nconst getOverlapProgramOptions = ({\n  isVerticalMode,\n  program,\n  programOverlaps,\n  layerOverlapLevel,\n  overlapMode,\n}: OverlapProgramOptions) => {\n  const { data, position } = program;\n  const linkedProgramOverlaps = programOverlaps[data.channelUuid];\n\n  if (linkedProgramOverlaps) {\n    const programOverlapIndex = linkedProgramOverlaps.findIndex(\n      (element) => element.data.id === data.id\n    );\n    const overlapProgram = linkedProgramOverlaps[programOverlapIndex];\n\n    if (overlapProgram) {\n      if (\n        overlapMode === OVERLAP_MODES.LAYER &&\n        overlapProgram.data.channelPosition.top < overlapProgram.position.top\n      ) {\n        let newTop = overlapProgram.position.top * layerOverlapLevel;\n        if (overlapProgram.data.channelPosition.top !== 0) {\n          newTop =\n            overlapProgram.data.channelPosition.top +\n            Math.abs(\n              overlapProgram.data.channelPosition.top -\n                overlapProgram.position.top\n            ) *\n              layerOverlapLevel;\n        }\n\n        let position = {\n          ...overlapProgram.position,\n          top: newTop,\n        };\n\n        if (isVerticalMode) {\n          position = switchPosition({\n            ...overlapProgram.position,\n            top: newTop,\n          });\n        }\n\n        return {\n          ...program,\n          isOverlap: true,\n          position,\n        };\n      }\n\n      return {\n        ...program,\n        position: isVerticalMode\n          ? switchPosition(overlapProgram.position)\n          : overlapProgram.position,\n      };\n    } else {\n      return {\n        ...program,\n        position,\n      };\n    }\n  }\n  const { width, height, top, left } = position;\n  return {\n    ...program,\n    position: { width, height, top, left },\n  };\n};\n\nexport const getProgramOptions = ({\n  isVerticalMode,\n  program,\n  overlap,\n  ...rest\n}: OverlapProgramOptions) => {\n  if (overlap.enabled) {\n    return getOverlapProgramOptions({\n      isVerticalMode,\n      program,\n      overlap,\n      ...rest,\n    });\n  }\n\n  const { width, height, top, left } = program.position;\n  return {\n    ...program,\n    position: { width, height, top, left },\n  };\n};\n\nexport const useIsomorphicLayoutEffect = () =>\n  typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n\nexport const getHourWidth = (dayWidth: number) => dayWidth / HOURS_IN_DAY;\n\nexport const getDate = (date: DateTime) => new Date(date);\n\nconst abs = (num: number) => Math.abs(num);\ninterface DayWidth {\n  dayWidth: number;\n  startDate: DateTime;\n  endDate: DateTime;\n  hoursInDays: HoursInDayDiffTime[];\n  modeType: Mode[\"type\"];\n}\nexport const getDayWidthResources = ({\n  dayWidth,\n  startDate,\n  endDate,\n  hoursInDays,\n  modeType,\n}: DayWidth) => {\n  const defaultOptions = {\n    hourWidth: 0,\n    numberOfMonths: 0,\n    numberOfHoursInDay: 0,\n    monthWidth: 0,\n    offsetStartHoursRange: 0,\n    dayWidth: 0,\n  };\n\n  const startDateTime = new Date(startDate);\n  const endDateTime = new Date(endDate);\n\n  if (endDateTime < startDateTime) {\n    console.error(\n      `Invalid endDate property. Value of endDate must be greater than startDate. Props: startDateTime: ${startDateTime}, endDateTime: ${endDateTime}`\n    );\n  }\n  if (modeType === \"week\" || modeType === \"month\") {\n    const endOfMonthTime = startOfMonth(addMonths(endDateTime, 1));\n    const numberOfMonthInMonthMode = differenceInMonths(\n      endOfMonthTime,\n      startDateTime\n    );\n\n    const numberOfDaysInWeekMode = differenceInDays(endDateTime, startDateTime);\n    const dayWidthInWeekMode = Math.floor(dayWidth / numberOfDaysInWeekMode);\n    const hourWidth = dayWidthInWeekMode / HOURS_IN_DAY;\n    const newDayWidthInWeekMode =\n      hourWidth * HOURS_IN_DAY * numberOfDaysInWeekMode;\n\n    return {\n      ...defaultOptions,\n      hourWidth: abs(hourWidth),\n      dayWidth: abs(newDayWidthInWeekMode),\n      numberOfMonths: numberOfMonthInMonthMode,\n    };\n  }\n\n  if (hoursInDays.length > 0) {\n    const numberOfHoursInDay = hoursInDays.reduce(\n      (acc, curr) => acc + curr.diffInHours,\n      0\n    );\n    const hourWidth = dayWidth / numberOfHoursInDay;\n    const newDayWidth = hourWidth * numberOfHoursInDay;\n\n    return {\n      ...defaultOptions,\n      hourWidth: abs(hourWidth),\n      dayWidth: abs(newDayWidth),\n      numberOfHoursInDay: abs(numberOfHoursInDay),\n    };\n  }\n\n  const offsetStartHoursRange = differenceInHours(\n    startDateTime,\n    startOfDay(startDateTime)\n  );\n\n  const numberOfHoursInDay = differenceInHours(endDateTime, startDateTime);\n  const hourWidth = Math.floor(dayWidth / numberOfHoursInDay);\n  const newDayWidth = hourWidth * numberOfHoursInDay;\n\n  return {\n    ...defaultOptions,\n    hourWidth: abs(hourWidth),\n    dayWidth: abs(newDayWidth),\n    numberOfHoursInDay: abs(numberOfHoursInDay),\n    offsetStartHoursRange: abs(offsetStartHoursRange),\n  };\n};\n\nconst convertDate = (date: DateTime) => {\n  const newDate = (date as string).replace(/T.*/, \"\");\n  return toDate(newDate);\n};\n\nexport const getDayResources = ({\n  startDate,\n  endDate,\n  modeType,\n}: Pick<DayWidth, \"startDate\" | \"endDate\" | \"modeType\">) => {\n  const startDateFormat = format(convertDate(startDate), TIME_FORMAT.DATE);\n  const endDateFormat = format(convertDate(endDate), TIME_FORMAT.DATE);\n\n  const modeIncrementValue = modeType === \"day\" ? 1 : 0;\n  const diffDays =\n    differenceInDays(toDate(endDateFormat), toDate(startDateFormat)) +\n    modeIncrementValue;\n\n  const startToEndInterval: Interval = {\n    start: new Date(startDate),\n    end: new Date(endDate),\n  };\n\n  const days = eachDayOfInterval(startToEndInterval).map((day) =>\n    format(day, TIME_FORMAT.DATE)\n  );\n\n  const months = eachMonthOfInterval(startToEndInterval).map((day) =>\n    format(day, TIME_FORMAT.DATE)\n  );\n\n  const dates = days.map((day) => isTodayFns(toDate(day)));\n  let isToday = dates.some((day) => day === true);\n  let currentDate = days[dates.indexOf(true)];\n\n  return {\n    isToday,\n    currentDate,\n    numberOfDays: diffDays,\n    days,\n    months,\n  };\n};\n\nexport const switchPosition = (programPosition: ProgramItem[\"position\"]) => ({\n  ...programPosition,\n  top: programPosition.left,\n  left: programPosition.top,\n  width: programPosition.height,\n  height: programPosition.width,\n});\n\nexport function generateUUID() {\n  // Generate a random hexadecimal string with the specified length\n  const generateRandomHex = (length: number) => {\n    let result = \"\";\n    const characters = \"abcdef0123456789\";\n\n    for (let i = 0; i < length; i++) {\n      result += characters[Math.floor(Math.random() * characters.length)];\n    }\n\n    return result;\n  };\n\n  // Format a UUID string according to the version 4 UUID format\n  const formatUUID = (parts: string[]) => {\n    return `${parts[0]}-${parts[1]}-4${parts[2].substring(1)}-${\n      \"89ab\"[Math.floor(Math.random() * 4)]\n    }${parts[3].substring(1)}-${parts[4]}`;\n  };\n\n  // Generate the parts of the UUID\n  const parts = [\n    generateRandomHex(8),\n    generateRandomHex(4),\n    \"89ab\"[(Math.random() * 4) | 0] + generateRandomHex(3),\n    \"89ab\"[(Math.random() * 4) | 0] + generateRandomHex(3),\n    generateRandomHex(12),\n  ];\n\n  // Return the formatted UUID\n  return formatUUID(parts);\n}\n","// Import interfaces\nimport { ChannelWithOmittedUuid, Timezone } from \"./interfaces\";\n// Import types\nimport { ChannelWithPosition, ProgramWithPosition } from \"./types\";\n\ntype LayoutScreenClone = Record<string, Record<string, ProgramWithPosition>>;\n\nlet LayoutScreenCloneCache = {} as LayoutScreenClone;\n\nconst setChannel = (event: ProgramWithPosition) => {\n  const isChannel = LayoutScreenCloneCache[event.data.channelUuid];\n  if (!isChannel) {\n    LayoutScreenCloneCache[event.data.channelUuid] = {};\n    return LayoutScreenCloneCache;\n  }\n  return LayoutScreenCloneCache;\n};\n\nconst updateLayoutScreenCloneElement = (data: LayoutScreenClone) =>\n  (LayoutScreenCloneCache = data);\n\nexport const setLayoutScreenCloneElement = (\n  event: ProgramWithPosition,\n  index: number\n) => {\n  const channels = setChannel(event);\n  const program = channels[event.data.channelUuid][event.data.id];\n  if (!program) {\n    event[\"data\"].index = index;\n    channels[event.data.channelUuid][event.data.id] = event;\n  }\n  updateLayoutScreenCloneElement(channels);\n};\n\nexport const deleteLayoutScreenCloneElement = (event: ProgramWithPosition) => {\n  const channels = setChannel(event);\n  const program = channels[event.data.channelUuid][event.data.id];\n  if (program) {\n    delete channels[event.data.channelUuid][event.data.id];\n  }\n  updateLayoutScreenCloneElement(channels);\n};\n\nexport const getLayoutScreenCloneElements = () => LayoutScreenCloneCache;\nexport const resetLayoutScreenCloneElements: () => void = () =>\n  (LayoutScreenCloneCache = {} as LayoutScreenClone);\n\nexport const getChannelsContentHeight = (channels: ChannelWithPosition[]) =>\n  channels.reduce((acc, channel) => (acc += channel.position.height), 0);\n\n// Channel epg indexes\ntype ChannelEpgIndex = Record<\n  string,\n  { uuid: string; first: number; last: number }\n>;\nlet channelEpgIndexesCache = {} as ChannelEpgIndex;\n\nexport const setChannelEpgIndexes = ({\n  uuid,\n  first = 0,\n  last = 0,\n}: {\n  uuid: string;\n  first?: number;\n  last?: number;\n}) => {\n  channelEpgIndexesCache[uuid] = {\n    first,\n    last,\n    uuid,\n  };\n};\nexport const getChannelEpgIndexes = (uuid: string) => {\n  return channelEpgIndexesCache[uuid];\n};\n\nexport const resetChannelsEpgIndexes: () => void = () =>\n  (channelEpgIndexesCache = {} as ChannelEpgIndex);\n\n// Channels group tree\ntype ChannelGroupTree = Record<\n  string,\n  {\n    isOpen: boolean;\n    uuid: string;\n    groupTree: boolean;\n    nestedChildren?: string[];\n  }\n>;\nlet channelsGroupTreeCache = {} as ChannelGroupTree;\n\nexport const setChannelGroupTree = (channel: ChannelWithOmittedUuid) => {\n  channelsGroupTreeCache[channel.uuid as string] = {\n    uuid: channel.uuid as string,\n    isOpen: channel.isOpen,\n    groupTree: channel.groupTree,\n  };\n};\n\nexport const setChannelGroupTreeNestedChildren = (\n  channelUuid: string,\n  nestedChildUuid: string\n) => {\n  const channel = channelsGroupTreeCache[channelUuid as string];\n  channelsGroupTreeCache[channelUuid as string] = {\n    ...channel,\n    nestedChildren: [...(channel.nestedChildren ?? []), nestedChildUuid],\n  };\n};\n\nexport const getChannelsGroupTree = () => channelsGroupTreeCache;\n\n// Timezones\nlet timezoneOptionsCache = { enabled: false, zone: \"\", mode: \"\" } as Timezone;\n\nexport const setTimezoneOptionsCache = (props: Timezone) => {\n  timezoneOptionsCache = props;\n};\nexport const getTimezoneOptionsCache = () => {\n  return timezoneOptionsCache;\n};\n\nexport const resetTimezoneOptionsCache: () => void = () =>\n  (timezoneOptionsCache = {} as Timezone);\n","import {\n  format as fnsFormat,\n  //   differenceInHours as fnsDifferenceInHours,\n  //   differenceInMinutes as fnsDifferenceInMinutes,\n} from \"date-fns\";\nimport {\n  format as tzFormat,\n  utcToZonedTime,\n  zonedTimeToUtc,\n} from \"date-fns-tz\";\nimport {\n  TIMEZONE_MODES,\n  TIME_FORMAT,\n  getTimezoneOptionsCache,\n} from \"../helpers\";\n\nexport const getNewDateTimeTz = (date: Date | string | number) => {\n  const timezone = getTimezoneOptionsCache();\n  const newDate = new Date(date);\n\n  if (timezone.enabled && timezone.mode === TIMEZONE_MODES.UTC_TO_ZONED_TIME) {\n    const zonedTime = utcToZonedTime(newDate, timezone.zone);\n    return zonedTime.getTime();\n  }\n\n  return newDate.getTime();\n};\n\nexport const getNewDateTz = (date?: Date | string | number) => {\n  const timezone = getTimezoneOptionsCache();\n  const newDate = date ? new Date(date) : new Date();\n\n  if (timezone.enabled && timezone.mode === TIMEZONE_MODES.UTC_TO_ZONED_TIME) {\n    const zonedTime = utcToZonedTime(newDate, timezone.zone);\n    return zonedTime;\n  }\n\n  return newDate;\n};\n\nexport const formatTz = (\n  date: Date | number,\n  formatTime: string = TIME_FORMAT.DEFAULT\n) => {\n  const timezone = getTimezoneOptionsCache();\n  if (timezone.enabled && timezone.mode === TIMEZONE_MODES.UTC_TO_ZONED_TIME) {\n    const zonedTime = utcToZonedTime(date, timezone.zone);\n    const formattedZonedTime = tzFormat(zonedTime, formatTime, {\n      timeZone: timezone.zone,\n    });\n    return formattedZonedTime;\n  }\n\n  return fnsFormat(date, formatTime);\n};\n\nexport const zonedDateTimeToUtc = (date: Date) => {\n  const timezone = getTimezoneOptionsCache();\n  if (timezone.enabled && timezone.mode === TIMEZONE_MODES.UTC_TO_ZONED_TIME) {\n    const zonedTime = zonedTimeToUtc(date, timezone.zone);\n    return zonedTime;\n  }\n\n  return date;\n};\n","import { differenceInMinutes, getTime, endOfDay, addDays } from \"date-fns\";\n// Import interfaces\nimport {\n  Channel,\n  ChannelWithOmittedUuid,\n  HoursInDayDiffTime,\n  Mode,\n  Program,\n  ProgramWithOmittedUuid,\n} from \"./interfaces\";\n\n// Import types\nimport {\n  ProgramWithPosition,\n  Position,\n  DateTime,\n  ChannelWithPosition,\n} from \"./types\";\n\n// Import variables\nimport { HOUR_IN_MINUTES, OVERLAP_MODES, TIME_FORMAT } from \"./variables\";\n\n// Import helpers\nimport {\n  roundToMinutes,\n  isYesterday as isYesterdayTime,\n  formatTimeTz,\n} from \"./time\";\nimport { generateUUID, getDate } from \"./common\";\nimport {\n  getChannelsGroupTree,\n  setChannelEpgIndexes,\n  setChannelGroupTree,\n  setChannelGroupTreeNestedChildren,\n} from \"./layout\";\nimport { formatTz } from \"../utils/time\";\n\n// -------- Program width --------\nconst getItemDiffWidth = (diff: number, hourWidth: number) =>\n  (diff * hourWidth) / HOUR_IN_MINUTES;\n\nexport const getPositionX = (\n  since: DateTime,\n  till: DateTime,\n  startDate: DateTime,\n  endDate: DateTime,\n  hourWidth: number\n) => {\n  const isTomorrow = getTime(getDate(till)) > getTime(getDate(endDate));\n  const isYesterday = getTime(getDate(since)) < getTime(getDate(startDate));\n\n  // When time range is set to 1 hour and program time is greater than 1 hour\n  if (isYesterday && isTomorrow) {\n    const diffTime = differenceInMinutes(\n      roundToMinutes(getDate(endDate)),\n      getDate(startDate)\n    );\n    return getItemDiffWidth(diffTime, hourWidth);\n  }\n\n  if (isYesterday) {\n    const diffTime = differenceInMinutes(\n      roundToMinutes(getDate(till)),\n      getDate(startDate)\n    );\n    return getItemDiffWidth(diffTime, hourWidth);\n  }\n\n  if (isTomorrow) {\n    const diffTime = differenceInMinutes(\n      getDate(endDate),\n      roundToMinutes(getDate(since))\n    );\n\n    if (diffTime < 0) return 0;\n    return getItemDiffWidth(diffTime, hourWidth);\n  }\n\n  const diffTime = differenceInMinutes(\n    roundToMinutes(getDate(till)),\n    roundToMinutes(getDate(since))\n  );\n\n  return getItemDiffWidth(diffTime, hourWidth);\n};\n\n// -------- Channel position in the Epg --------\nexport const getChannelPosition = (\n  channelIndex: number,\n  itemHeight: number\n) => {\n  const top = itemHeight * channelIndex;\n  const position = {\n    top,\n    height: itemHeight,\n  };\n  return position;\n};\n// -------- Program position in the Epg --------\nexport const getProgramPosition = (\n  program: Program,\n  channelIndex: number,\n  itemHeight: number,\n  hourWidth: number,\n  startDate: DateTime,\n  endDate: DateTime,\n  isVerticalMode: boolean\n) => {\n  const item = {\n    ...program,\n    since: formatTimeTz(program.since),\n    till: formatTimeTz(program.till),\n  };\n\n  const isYesterday = isYesterdayTime(item.since, startDate);\n\n  let width = getPositionX(\n    item.since,\n    item.till,\n    startDate,\n    endDate,\n    hourWidth\n  );\n  const top = itemHeight * channelIndex;\n  let left = getPositionX(startDate, item.since, startDate, endDate, hourWidth);\n  const edgeEnd = getPositionX(\n    startDate,\n    item.till,\n    startDate,\n    endDate,\n    hourWidth\n  );\n\n  if (isYesterday) left = 0;\n  // If item has negative top position, it means that it is not visible in this day\n  if (top < 0) width = 0;\n\n  let position = {\n    width,\n    height: itemHeight,\n    top,\n    left,\n    edgeEnd,\n  };\n\n  if (isVerticalMode) {\n    position = {\n      ...position,\n      top: left,\n      left: top,\n      width: itemHeight,\n      height: width,\n    };\n  }\n  return { position, data: item };\n};\n\n// -------- Program position with day hours --------\ninterface ProgramPositionWithDayHours {\n  isVerticalMode: boolean;\n  hoursInDays: HoursInDayDiffTime[];\n  position: ProgramWithPosition[\"position\"];\n  since: string;\n  hourWidth: number;\n}\nconst getProgramPositionWithDayHours = ({\n  isVerticalMode,\n  hoursInDays,\n  position,\n  since,\n  hourWidth,\n}: ProgramPositionWithDayHours) => {\n  const day = hoursInDays.find((day) => since.includes(day.date));\n  if (!day) return { position };\n\n  if (isVerticalMode) {\n    const diffHours = day.diffLeft * hourWidth;\n    const top = position.top - diffHours;\n    const edgeEnd = position.edgeEnd - diffHours;\n    return { ...position, top, edgeEnd };\n  }\n\n  const diffHours = day.diffLeft * hourWidth;\n  const left = position.left - diffHours;\n  const edgeEnd = position.edgeEnd - diffHours;\n  return { ...position, left, edgeEnd };\n};\n\n// -------- Converted programs with position data --------\ninterface ConvertedPrograms {\n  isVerticalMode: boolean;\n  isOverlapEnabled: boolean;\n  programChannelMapKey: string;\n  data: ProgramWithOmittedUuid[];\n  channels: Channel[];\n  startDate: DateTime;\n  endDate: DateTime;\n  itemHeight: number;\n  hourWidth: number;\n  hoursInDays: HoursInDayDiffTime[];\n}\nexport const getConvertedPrograms = ({\n  isVerticalMode,\n  isOverlapEnabled,\n  programChannelMapKey,\n  data,\n  channels,\n  startDate,\n  endDate,\n  itemHeight,\n  hourWidth,\n  hoursInDays,\n}: ConvertedPrograms) => {\n  let first = 0;\n  return data.map((next, index, arr) => {\n    next[\"channelUuid\"] = next[programChannelMapKey];\n\n    if (arr[index - 1]?.[programChannelMapKey] !== next[programChannelMapKey]) {\n      first = index;\n      setChannelEpgIndexes({ uuid: next[programChannelMapKey], first });\n    }\n    if (next[programChannelMapKey] !== arr[index + 1]?.[programChannelMapKey]) {\n      setChannelEpgIndexes({\n        uuid: next[programChannelMapKey],\n        first,\n        last: index,\n      });\n    } else {\n      setChannelEpgIndexes({\n        uuid: next[programChannelMapKey],\n        first,\n        last: index,\n      });\n    }\n\n    const channelIndex = channels.findIndex(\n      ({ uuid }) => uuid === next.channelUuid\n    );\n\n    next[\"channelIndex\"] = channelIndex;\n    next[\"channelPosition\"] = channels[channelIndex]?.position;\n    next[\"index\"] = index;\n\n    // Group tree\n    if (channels[channelIndex]?.parentChannelUuid) {\n      next[\"parentChannelUuid\"] = channels[channelIndex]?.parentChannelUuid;\n    }\n\n    const programData = getProgramPosition(\n      next as Program,\n      channelIndex,\n      itemHeight,\n      hourWidth,\n      startDate,\n      endDate,\n      isVerticalMode\n    );\n\n    if (isOverlapEnabled && channelIndex > 0) {\n      const { position } = channels[channelIndex - 1];\n      const newPositionTop = position.top + position.height;\n      if (isVerticalMode) {\n        programData.position.left = newPositionTop;\n      } else {\n        programData.position.top = newPositionTop;\n      }\n    }\n\n    if (hoursInDays.length === 0) return programData;\n\n    const newPosition = getProgramPositionWithDayHours({\n      isVerticalMode,\n      hoursInDays,\n      position: programData.position,\n      since: programData.data.since,\n      hourWidth,\n    }) as ProgramWithPosition[\"position\"];\n\n    programData[\"position\"] = newPosition;\n\n    return programData;\n  }, [] as ProgramWithPosition[]);\n};\n\n// -------- Converted channels with position data --------\n\nexport const getConvertedChannels = (\n  isOverlapEnabled: boolean,\n  overlapMode: string,\n  layerOverlapLevel: number,\n  channels: ChannelWithOmittedUuid[],\n  itemHeight: number,\n  channelMapKey: string,\n  channelOverlapsCount: Record<string, number>\n) => {\n  let top = 0;\n  const isStackMode = overlapMode === OVERLAP_MODES.STACK;\n  const isLayerMode = overlapMode === OVERLAP_MODES.LAYER;\n  return channels.reduce((acc, channel, index) => {\n    const overlap = channelOverlapsCount[channel[channelMapKey]];\n\n    // Check channels group tree\n    if (channel.groupTree && channel.uuid) {\n      setChannelGroupTree(channel);\n    }\n\n    const channelsGroupTree = getChannelsGroupTree();\n    const channelGroupTree = channelsGroupTree[channel.parentChannelUuid];\n    // if parent channel is closed, skip this channel\n    if (channelGroupTree && channel.parentChannelUuid) {\n      setChannelGroupTreeNestedChildren(\n        channelGroupTree.uuid,\n        channel.uuid as string\n      );\n      channel[\"isNestedChild\"] = true;\n      if (!channelGroupTree?.isOpen) return acc;\n    } else {\n      channel[\"isNestedChild\"] = false;\n    }\n\n    let largestSizeLength = 1;\n    const overlapsLength = overlap ?? 0;\n\n    if (\n      isOverlapEnabled &&\n      (isStackMode || isLayerMode) &&\n      overlapsLength > 0\n    ) {\n      largestSizeLength = overlap;\n    }\n\n    const position = getChannelPosition(index, itemHeight * largestSizeLength);\n\n    if (isOverlapEnabled && isStackMode) {\n      position.top = top;\n      top = top + position.height;\n    }\n\n    if (isOverlapEnabled && isLayerMode) {\n      if (overlapsLength > 0) {\n        position.top = top;\n        position.height =\n          overlapsLength <= 1\n            ? position.height\n            : itemHeight * layerOverlapLevel * (overlapsLength - 1) +\n              itemHeight;\n        top = top + position.height;\n      } else {\n        position.top = top;\n        top = top + position.height;\n      }\n    }\n\n    const item = {\n      ...channel,\n      uuid: channel[channelMapKey],\n      index,\n      position,\n    } as ChannelWithPosition;\n    acc.push(item);\n    return acc;\n  }, [] as ChannelWithPosition[]);\n};\n\n// -------- Dynamic virtual program visibility in the EPG --------\ninterface ItemVisibility {\n  position: Position;\n  scrollY: number;\n  scrollX: number;\n  containerHeight: number;\n  containerWidth: number;\n  isVerticalMode: boolean;\n  itemOverscan: number;\n  overlapsCount: number;\n}\nexport const getItemVisibility = ({\n  position,\n  scrollY,\n  scrollX,\n  containerHeight,\n  containerWidth,\n  itemOverscan,\n  overlapsCount,\n  isVerticalMode,\n}: ItemVisibility) => {\n  // Set item visibility for vertical mode\n  const _overlapsCount = overlapsCount === 0 ? 1 : overlapsCount;\n  if (isVerticalMode) {\n    if (position.height <= 0) {\n      return false;\n    }\n\n    if (scrollX > position.left + position.width * 2 * _overlapsCount) {\n      return false;\n    }\n\n    if (scrollX + containerWidth <= position.left) {\n      return false;\n    }\n\n    if (\n      scrollY + containerHeight >= position.top &&\n      scrollY <= position.edgeEnd\n    ) {\n      return true;\n    }\n  } else {\n    // Set item visibility for horizontal mode\n    if (position.width <= 0) {\n      return false;\n    }\n\n    if (scrollY > position.top + itemOverscan * 3 * _overlapsCount) {\n      return false;\n    }\n\n    if (scrollY + containerHeight <= position.top) {\n      return false;\n    }\n\n    if (\n      scrollX + containerWidth >= position.left &&\n      scrollX <= position.edgeEnd\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\ninterface SidebarItemVisibility {\n  isVerticalMode: boolean;\n  itemOverscan: number;\n  position: Pick<Position, \"top\" | \"height\"> & Partial<Pick<Position, \"left\">>;\n  scrollX: number;\n  scrollY: number;\n  containerHeight: number;\n  containerWidth: number;\n}\nexport const getSidebarItemVisibility = ({\n  position,\n  scrollX,\n  scrollY,\n  containerHeight,\n  containerWidth,\n  itemOverscan,\n  isVerticalMode,\n}: SidebarItemVisibility) => {\n  // Set item visibility for vertical mode\n  if (isVerticalMode) {\n    const left = (position.left as number) + position.height;\n    if (scrollX > left + itemOverscan * 3) {\n      return false;\n    }\n\n    if (scrollX + containerWidth <= left - position.height) {\n      return false;\n    }\n  } else {\n    // Set item visibility for horizontal mode\n    if (scrollY > position.top + position.height + itemOverscan * 3) {\n      return false;\n    }\n\n    if (scrollY + containerHeight <= position.top) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\ninterface TimelineItemVisibility {\n  position: Pick<Position, \"left\" | \"width\">;\n  scrollY: number;\n  scrollX: number;\n  containerWidth: number;\n  containerHeight: number;\n  isVerticalMode: boolean;\n}\nexport const getTimelineItemVisibility = ({\n  position,\n  scrollY,\n  scrollX,\n  containerHeight,\n  containerWidth,\n  isVerticalMode,\n}: TimelineItemVisibility) => {\n  // Set item visibility for vertical mode\n  if (isVerticalMode) {\n    if (scrollY > position.left + position.width * 2) {\n      return false;\n    }\n\n    if (scrollY + containerHeight <= position.left) {\n      return false;\n    }\n  } else {\n    // Set item visibility for horizontal mode\n    if (scrollX > position.left + position.width * 2) {\n      return false;\n    }\n\n    if (scrollX + containerWidth <= position.left) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nexport const setUpdatedLayoutItem = (\n  data: ProgramWithOmittedUuid,\n  modeType: Mode[\"type\"]\n) => {\n  const id = generateUUID();\n  const since = `${data.date} ${data.since}`;\n  let till = `${data.date} ${data.till}`;\n\n  if (modeType === \"week\") {\n    till = formatTz(endOfDay(new Date(till)), TIME_FORMAT.DEFAULT);\n  } else if (modeType === \"month\") {\n    till = formatTz(addDays(endOfDay(new Date(till)), 20), TIME_FORMAT.DEFAULT);\n  }\n\n  return { id, title: \"\", image: \"\", ...data, since, till };\n};\n","import {\n  format,\n  roundToNearestMinutes,\n  startOfDay,\n  addDays,\n  differenceInHours,\n  isWithinInterval,\n} from \"date-fns\";\nimport { toDate } from \"date-fns-tz\";\n// Import common helpers\nimport { getDate } from \"./common\";\n// Import interfaces\nimport { HoursInDay, HoursInDayDiffTime, Mode } from \"./interfaces\";\n// Import types\nimport { DateTime as DateRangeTime } from \"./types\";\n// Variables\nimport { TIME_FORMAT } from \"./variables\";\nimport { getPositionX } from \"./epg\";\nimport { formatTz, getNewDateTimeTz, getNewDateTz } from \"../utils/time\";\n\ntype DateTime = number | string | Date;\n\nconst getTime = (date: DateTime) => toDate(date).getTime();\n\nexport const getLiveStatus = (since: DateTime, till: DateTime) => {\n  const nowTime = getNewDateTimeTz(getNewDateTz());\n  const sinceTime = getNewDateTimeTz(since);\n  const sinceTill = getNewDateTimeTz(till);\n  return nowTime >= sinceTime && sinceTill > nowTime;\n};\n\nexport const formatTime = (date: DateTime) =>\n  format(new Date(date), TIME_FORMAT.DEFAULT).replace(/\\s/g, \"T\");\n\nexport const formatTimeTz = (date: DateTime) =>\n  formatTz(new Date(date), TIME_FORMAT.DEFAULT).replace(/\\s/g, \"T\");\n\nexport const roundToMinutes = (date: DateTime) =>\n  roundToNearestMinutes(new Date(date));\n\nexport const isYesterday = (since: DateTime, startDate: DateTime) => {\n  const sinceTime = getTime(new Date(since));\n  const startDateTime = getTime(new Date(startDate));\n\n  return startDateTime > sinceTime;\n};\n\nexport const isFutureTime = (date: DateTime) => {\n  const dateTime = getTime(new Date(date));\n  const now = getTime(new Date());\n  return dateTime > now;\n};\n\nexport const getTimeRangeDates = (\n  startDate: DateRangeTime,\n  endDate: DateRangeTime\n) => {\n  let endDateValue = endDate;\n  if (endDate === \"\") {\n    endDateValue = formatTime(startOfDay(addDays(getDate(startDate), 1)));\n  }\n\n  return { startDate, endDate: endDateValue };\n};\n\ninterface FormatWeekMonthDate {\n  date: string;\n  mode: Mode;\n  isBaseTimeFormat: boolean;\n}\nexport const getFormattedWeekMonthDate = ({\n  date,\n  mode,\n  isBaseTimeFormat,\n}: FormatWeekMonthDate) => {\n  if (mode.type === \"week\") {\n    if (mode.style === \"modern\") {\n      return format(toDate(date), TIME_FORMAT.DAY_DATE);\n    }\n    const dateFormat = isBaseTimeFormat\n      ? TIME_FORMAT.BASE_DAY_MONTH\n      : TIME_FORMAT.DAY_MONTH;\n    return format(toDate(date), dateFormat);\n  }\n\n  return format(toDate(date), TIME_FORMAT.MONTH);\n};\n\ninterface NumberOfHoursInDays {\n  startDate: DateRangeTime;\n  customHoursInDays: HoursInDay[];\n}\nexport const getNumberOfHoursInDays = ({\n  startDate,\n  customHoursInDays,\n}: NumberOfHoursInDays) => {\n  if (customHoursInDays.length === 0) return [];\n  let itemsDiffInHours = 0;\n  const data = customHoursInDays.reduce((acc, item) => {\n    let diffLeft = 0;\n    const prevItem = acc[acc.length - 1];\n    if (!prevItem) {\n      diffLeft = differenceInHours(\n        getDate(item.startTimeHour),\n        getDate(startDate)\n      );\n    }\n    if (prevItem) {\n      diffLeft = differenceInHours(\n        getDate(item.startTimeHour),\n        getDate(prevItem.endTimeHour)\n      );\n      diffLeft += prevItem.diffLeft;\n      itemsDiffInHours += prevItem.diffInHours;\n    }\n\n    const diffInHours = differenceInHours(\n      getDate(item.endTimeHour),\n      getDate(item.startTimeHour)\n    );\n    const startTime = Number(format(getDate(item.startTimeHour), \"H\"));\n    const endTime = Number(format(getDate(item.endTimeHour), \"H\"));\n    const obj = {\n      ...item,\n      diffLeft,\n      diffInHours,\n      prevItemDiffInHours: itemsDiffInHours,\n      startTime,\n      endTime,\n    };\n    acc.push(obj);\n    return acc;\n  }, [] as HoursInDayDiffTime[]);\n\n  return data;\n};\n\nexport const getTodayHoursInDays = (hoursInDays: HoursInDayDiffTime[]) => {\n  const date = hoursInDays.filter((item) =>\n    isWithinInterval(new Date(), {\n      start: new Date(item.startTimeHour),\n      end: new Date(item.endTimeHour),\n    })\n  );\n\n  return date.length > 0;\n};\n\ninterface HoursInDaysPositionX {\n  hoursInDays: HoursInDayDiffTime[];\n  hourWidth: number;\n  sidebarWidth: number;\n  cb?: (v: boolean) => void;\n}\nexport const getHoursInDaysPositionX = ({\n  hoursInDays,\n  hourWidth,\n  sidebarWidth,\n  cb,\n}: HoursInDaysPositionX) => {\n  const date = hoursInDays.filter((item) =>\n    isWithinInterval(new Date(), {\n      start: new Date(item.startTimeHour),\n      end: new Date(item.endTimeHour),\n    })\n  );\n  if (date.length === 0) {\n    cb?.(false);\n    return 0;\n  }\n  const day = date[0];\n  const positionX = getPositionX(\n    startOfDay(new Date(day.startTimeHour)),\n    new Date(),\n    day.startTimeHour,\n    day.endTimeHour,\n    hourWidth\n  );\n  return positionX + sidebarWidth + day.prevItemDiffInHours * hourWidth;\n};\n","import { format, getDaysInMonth, parse } from \"date-fns\";\nimport { toDate } from \"date-fns-tz\";\n// Import interfaces\nimport { HoursInDayDiffTime, Mode } from \"./interfaces\";\n// Import variables\nimport {\n  HOURS_IN_DAY,\n  TIMELINE_HEIGHT_MODERN_STYLE,\n  TIME_FORMAT,\n} from \"./variables\";\n// Import helpers\nimport { generateArray } from \"./common\";\n\nconst { BASE_DAY_MONTH, DAY_MONTH } = TIME_FORMAT;\nconst generateDayHours = (\n  isBaseTimeFormat: boolean,\n  dayIndex: number,\n  days: string[]\n) =>\n  Array.from({ length: HOURS_IN_DAY }, (_, i) => {\n    if (i === 0) {\n      const timeFormat = isBaseTimeFormat ? BASE_DAY_MONTH : DAY_MONTH;\n      const date = parse(days[dayIndex], TIME_FORMAT.DATE, new Date());\n      return dayIndex === 0 ? i : format(date, timeFormat);\n    }\n    return i;\n  });\n\ninterface TimeSlots {\n  isBaseTimeFormat: boolean;\n  days: string[];\n  hoursInDays: HoursInDayDiffTime[];\n  months: string[];\n  numberOfDays: number;\n  numberOfHoursInDay: number;\n  numberOfMonths: number;\n  offsetStartHoursRange: number;\n  weekDayWidth?: number;\n}\n\nexport const generateTimelineSlots = (\n  modeType: Mode[\"type\"],\n  options: TimeSlots\n) => {\n  const { hoursInDays, ...rest } = options;\n  if (modeType === \"week\") {\n    return generateWeekTimelineSlots(rest) as string[];\n  }\n\n  if (modeType === \"month\") {\n    return generateMonthTimelineSlots(rest) as string[];\n  }\n\n  if (hoursInDays.length > 0) {\n    return getDayHoursTimeSlots(options) as (string | number)[];\n  }\n\n  return getDayTimeSlots(rest) as (string | number)[];\n};\n\nconst getDayHoursTimeSlots = ({\n  isBaseTimeFormat,\n  days,\n  hoursInDays,\n  numberOfDays,\n}: Pick<\n  TimeSlots,\n  \"isBaseTimeFormat\" | \"days\" | \"hoursInDays\" | \"numberOfDays\"\n>) => {\n  const slots = generateArray(numberOfDays).reduce((acc, _, dayIndex) => {\n    const hours = generateDayHours(isBaseTimeFormat, dayIndex, days);\n    const hoursInDay = hoursInDays[dayIndex];\n    const sliced = hours.slice(hoursInDay.startTime, hoursInDay.endTime);\n    if (dayIndex > 0) sliced[0] = hours[0];\n    return [...acc, ...sliced];\n  }, []);\n  return slots;\n};\n\nconst getDayTimeSlots = ({\n  isBaseTimeFormat,\n  days,\n  numberOfDays,\n  numberOfHoursInDay,\n  offsetStartHoursRange,\n}: Omit<TimeSlots, \"hoursInDays\">) => {\n  const slots = generateArray(numberOfDays).reduce((acc, _, dayIndex) => {\n    const hours = generateDayHours(isBaseTimeFormat, dayIndex, days);\n    if (dayIndex === 0) return [...acc, ...hours.slice(offsetStartHoursRange)];\n    return [...acc, ...hours];\n  }, []);\n  return slots.slice(0, numberOfHoursInDay);\n};\n\nexport const generateWeekTimelineSlots = ({\n  days,\n  numberOfDays,\n}: Pick<TimeSlots, \"days\" | \"numberOfDays\">) => {\n  const slots = generateArray(numberOfDays).map((_, dayIndex) => {\n    const date = parse(days[dayIndex], TIME_FORMAT.DATE, new Date());\n    return format(date, TIME_FORMAT.DATE);\n  });\n\n  return slots;\n};\nexport const generateMonthTimelineSlots = ({\n  months,\n  numberOfMonths,\n}: Pick<TimeSlots, \"isBaseTimeFormat\" | \"months\" | \"numberOfMonths\">) => {\n  const slots = generateArray(numberOfMonths).map((_, dayIndex) => {\n    const date = parse(months[dayIndex], TIME_FORMAT.DATE, new Date());\n    return format(date, TIME_FORMAT.DATE);\n  });\n\n  return slots;\n};\n\ninterface TimelineMonthsWidth {\n  data: { width: number; left: number }[];\n  offsetLeft: number;\n}\nexport const getTimelineMonthsWidth = ({\n  months,\n  weekDayWidth,\n}: Pick<TimeSlots, \"months\" | \"weekDayWidth\">) => {\n  const { data } = months.reduce(\n    (acc, month, index) => {\n      const daysInMonth = getDaysInMonth(toDate(month));\n      const width = daysInMonth * (weekDayWidth as number);\n      if (index === 0) {\n        acc.data.push({ width, left: 0 });\n        acc.offsetLeft = 0;\n        return acc;\n      }\n      const left = acc.offsetLeft + acc.data[index - 1].width;\n      acc.data.push({ width, left });\n      acc.offsetLeft = left;\n      return acc;\n    },\n    { data: [], offsetLeft: 0 } as TimelineMonthsWidth\n  );\n\n  return data;\n};\n\nexport const getTimelineHeight = (timelineHeight: number, mode: Mode) => {\n  if (\n    (mode.type === \"week\" || mode.type === \"month\") &&\n    mode.style === \"modern\"\n  ) {\n    return TIMELINE_HEIGHT_MODERN_STYLE;\n  }\n  return timelineHeight;\n};\n","import { Layers } from \"./enums\";\n\ninterface LineStyles {\n  isVerticalMode: boolean;\n  isTimeline: boolean;\n  lineStyles: {\n    position: string;\n    top: number;\n    width: number;\n  };\n  position: {\n    height: number;\n    left: number;\n    zIndex: Layers;\n  };\n}\nexport const getLineStyles = ({\n  isVerticalMode,\n  isTimeline,\n  lineStyles,\n  position,\n}: LineStyles) => {\n  if (isVerticalMode) {\n    return {\n      position: {\n        ...position,\n        position: lineStyles.position,\n        top: position.left,\n        left: isTimeline ? lineStyles.top : 0,\n        width: position.height,\n        height: lineStyles.width,\n      },\n    };\n  }\n\n  return {\n    position: {\n      ...position,\n      position: lineStyles.position,\n      top: isTimeline ? lineStyles.top : 0,\n      width: lineStyles.width,\n    },\n  };\n};\n","// Import types\nimport { getChannelsGroupTree } from \"./layout\";\nimport { ChannelWithPosition } from \"./types\";\n\nexport const getChannelVerticalPosition = (\n  channel: ChannelWithPosition,\n  isVerticalMode: boolean\n) => {\n  if (isVerticalMode) {\n    return {\n      ...channel,\n      position: {\n        ...channel.position,\n        left: channel.position.top,\n        width: channel.position.height,\n      },\n    };\n  }\n\n  return channel;\n};\n\nexport const getChannelGroupTreeProps = (channel: ChannelWithPosition) => {\n  const data = {\n    ...channel,\n    nestedChildren: [],\n    isFirstNestedChild: false,\n    isLastNestedChild: false,\n  };\n\n  const getChanelGroupTree = (uuid?: string) =>\n    channelsGroupTree[uuid ?? \"\"] ?? null;\n\n  const channelsGroupTree = getChannelsGroupTree();\n  const channelGroupTree = getChanelGroupTree(channel.uuid);\n  const channelNestedGroupTree = getChanelGroupTree(\n    channel.parentChannelUuid ?? \"\"\n  );\n\n  if (channel.parentChannelUuid && channelNestedGroupTree) {\n    const isFirstNestedChild =\n      channelNestedGroupTree.nestedChildren?.at(0) === channel.uuid;\n    const isLastNestedChild =\n      channelNestedGroupTree.nestedChildren?.at(-1) === channel.uuid;\n    return {\n      ...data,\n      isFirstNestedChild,\n      isLastNestedChild,\n    };\n  } else if (channelGroupTree) {\n    return {\n      ...data,\n      nestedChildren: channelGroupTree.nestedChildren,\n    };\n  }\n\n  return data;\n};\n","import { ProgramItem } from \"./types\";\nimport { ProgramOverlaps } from \"./interfaces\";\nimport { switchPosition } from \"./common\";\nimport { getChannelEpgIndexes, getChannelsGroupTree } from \"./layout\";\n\nfunction getOverlapCount(\n  program: ProgramItem,\n  overlapArray: ProgramItem[]\n): number {\n  const sinceB = new Date(program.data.since);\n  const tillB = new Date(program.data.till);\n\n  let overlapCount = 0;\n\n  for (const otherProgram of overlapArray) {\n    if (program.data.id === otherProgram.data.id) continue;\n\n    const sinceOther = new Date(otherProgram.data.since);\n    const tillOther = new Date(otherProgram.data.till);\n\n    if (\n      (sinceB <= tillOther && tillB >= sinceOther) ||\n      (sinceOther <= tillB && tillOther >= sinceB)\n    ) {\n      overlapCount++;\n    }\n  }\n\n  return overlapCount;\n}\n\nfunction overlapPosition(\n  program: ProgramItem,\n  overlapArray: ProgramItem[],\n  channelOverlapsCount: number\n) {\n  const sinceB = new Date(program.data.since);\n  const tillB = new Date(program.data.till);\n  const newChannelOverlapsCount = channelOverlapsCount;\n\n  for (let index = 0; index < newChannelOverlapsCount + 1; index++) {\n    const top =\n      program.data.channelPosition.top > 0\n        ? program.data.channelPosition.top\n        : 0;\n    let levelTop = top + program.position.height * index;\n    let overlapsOnLevel = false;\n    let overlapsOnLevelUp = false;\n\n    for (const otherProgram of overlapArray) {\n      if (program.data.id === otherProgram.data.id) continue;\n\n      if (levelTop === otherProgram.position.top) {\n        const sinceOther = new Date(otherProgram.data.since);\n        const tillOther = new Date(otherProgram.data.till);\n\n        if (\n          (sinceB < tillOther && tillB > sinceOther) ||\n          (sinceOther < tillB && tillOther > sinceB)\n        ) {\n          if (\n            (sinceB <= tillOther && tillB >= sinceOther) ||\n            (sinceOther <= tillB && tillOther >= sinceB)\n          ) {\n            overlapsOnLevelUp = true;\n          }\n          overlapsOnLevel = true;\n          break;\n        }\n      }\n    }\n\n    if (!overlapsOnLevel) {\n      return overlapsOnLevelUp ? index + 4 : index;\n    }\n  }\n  return newChannelOverlapsCount;\n}\n\nconst getOverlapProgramOptions = (\n  program: ProgramItem,\n  overlapArray: ProgramItem[],\n  channelOverlapsCount: number\n) => {\n  const _program = { ...program };\n\n  const { data, position } = _program;\n\n  const programOverlapIndex = overlapArray.length + 1;\n\n  const isOverlapStackMode = true;\n  const programOverlapsLength = overlapArray.length;\n  const { channelPosition, overlapTimes } = data;\n  const { width, height, left } = position;\n  const newHeight = isOverlapStackMode\n    ? height\n    : height / programOverlapsLength;\n\n  const newTop =\n    channelPosition.top + (overlapTimes ?? programOverlapIndex) * newHeight;\n\n  const newProgram = {\n    ...program,\n    position: { width, height: newHeight, top: newTop, left },\n  };\n\n  const overlapTop = overlapPosition(\n    newProgram,\n    overlapArray,\n    channelOverlapsCount\n  );\n\n  newProgram.position = {\n    ...newProgram.position,\n    top: channelPosition.top + newProgram.position.height * overlapTop,\n  };\n\n  return [newProgram, overlapTop + 1];\n};\n\nconst setChannelOverlapCount = (\n  programA: ProgramItem,\n  channelOverlapsCount: number,\n  channelOverlaps: Record<string, number>\n) =>\n  channelOverlapsCount > channelOverlaps[programA.data.channelUuid]\n    ? channelOverlapsCount\n    : channelOverlaps[programA.data.channelUuid];\n\nexport function getOverlaps(\n  isVerticalMode: boolean,\n  itemOverlaps: ProgramOverlaps,\n  programs: ProgramItem[]\n): {\n  overlaps: ProgramOverlaps;\n  channelOverlaps: Record<string, number>;\n} {\n  const overlaps: ProgramOverlaps = { ...itemOverlaps };\n  const channelOverlaps: Record<string, number> = {};\n\n  for (const program of programs) {\n    overlaps[program.data.channelUuid] = [];\n  }\n\n  for (let i = 0; i < programs.length - 1; i++) {\n    const programA = { ...programs[i] };\n    const sinceA = new Date(programA.data.since);\n    const tillA = new Date(programA.data.till);\n\n    // Group channel tree\n    // If parent group tree is open, then all children group tree are visible\n    // If parent group tree is closed, then all children group tree are not visible\n    if (programA?.data?.parentChannelUuid) {\n      const channelsGroupTree = getChannelsGroupTree();\n      const channelGroupTree =\n        channelsGroupTree[programA?.data?.parentChannelUuid];\n      if (!channelGroupTree?.isOpen) continue;\n    }\n\n    if (isVerticalMode) {\n      programA.position = switchPosition(programA.position);\n    }\n\n    for (let j = i + 1; j < programs.length; j++) {\n      const programB = { ...programs[j] };\n\n      if (programA.data.channelUuid !== programB.data.channelUuid) continue;\n\n      if (isVerticalMode) {\n        programB.position = switchPosition(programB.position);\n      }\n\n      const sinceB = new Date(programB.data.since);\n      const tillB = new Date(programB.data.till);\n\n      if (\n        (sinceA < tillB && tillA > sinceB) ||\n        (sinceB < tillA && tillB > sinceA)\n      ) {\n        const elementA = overlaps[programA.data.channelUuid];\n        const elementB = overlaps[programB.data.channelUuid];\n\n        const isSameChannelUuid =\n          programA.data.channelUuid === programB.data.channelUuid;\n\n        if (elementA && elementB && isSameChannelUuid) {\n          programB.data.overlapLinkedId = programA.data.overlapLinkedId;\n\n          const overlapArray = overlaps[programA.data.channelUuid];\n\n          const isElementAExist = overlapArray.some(\n            (el) => el.data.id === programA.data.id\n          );\n          const isElementBExist = overlapArray.some(\n            (el) => el.data.id === programB.data.id\n          );\n          const channelOverlapsLength =\n            overlaps[programA.data.channelUuid].length;\n\n          if (!isElementBExist && channelOverlapsLength === 0) {\n            programB.position.top =\n              programA.data.channelPosition.top + programA.position.height;\n            overlaps[programA.data.channelUuid] = [programA, programB];\n            channelOverlaps[programA.data.channelUuid] = !channelOverlaps[\n              programA.data.channelUuid\n            ]\n              ? 2\n              : channelOverlaps[programA.data.channelUuid];\n          } else if (!isElementBExist && channelOverlapsLength > 1) {\n            let overlapCount = 0;\n\n            if (!isElementAExist) {\n              overlapCount = getOverlapCount(programB, overlapArray);\n              programB.data.overlapTimes = overlapCount;\n\n              const [newProgramA, channelOverlapsCount] =\n                getOverlapProgramOptions(\n                  programA,\n                  overlapArray,\n                  channelOverlaps[programA.data.channelUuid]\n                ) as [ProgramItem, number];\n\n              overlapArray.push(newProgramA);\n\n              channelOverlaps[programA.data.channelUuid] =\n                setChannelOverlapCount(\n                  programA,\n                  channelOverlapsCount,\n                  channelOverlaps\n                );\n            }\n\n            overlapCount = getOverlapCount(programB, overlapArray);\n            programB.data.overlapTimes = overlapCount;\n\n            const [newProgramB, channelOverlapsCount] =\n              getOverlapProgramOptions(\n                programB,\n                overlapArray,\n                channelOverlaps[programA.data.channelUuid]\n              ) as [ProgramItem, number];\n            overlapArray.push(newProgramB);\n\n            channelOverlaps[programA.data.channelUuid] = setChannelOverlapCount(\n              programA,\n              channelOverlapsCount,\n              channelOverlaps\n            );\n          } else if (isElementBExist && channelOverlapsLength > 1) {\n            const overlapCount = getOverlapCount(programB, overlapArray);\n            programB.data.overlapTimes = overlapCount;\n\n            const [, channelOverlapsCount] = getOverlapProgramOptions(\n              programB,\n              overlapArray,\n              channelOverlaps[programA.data.channelUuid]\n            ) as [ProgramItem, number];\n\n            channelOverlaps[programA.data.channelUuid] = setChannelOverlapCount(\n              programA,\n              channelOverlapsCount,\n              channelOverlaps\n            );\n          } else if (channelOverlapsLength > 1) {\n            overlapArray.push(programB);\n          }\n        }\n      } else if (\n        overlaps[programA.data.channelUuid] &&\n        overlaps[programA.data.channelUuid].length === 0\n      ) {\n        channelOverlaps[programA.data.channelUuid] = 0;\n        overlaps[programA.data.channelUuid] = [];\n      }\n    }\n  }\n\n  return { overlaps, channelOverlaps };\n}\n\nconst getChannelProgramSliced = (programs: ProgramItem[]) => {\n  const acc = new Map();\n\n  for (const next of programs) {\n    const channelUuid = next.data.channelUuid;\n    if (!acc.has(channelUuid)) {\n      acc.set(channelUuid, []);\n    }\n    acc.get(channelUuid).push(next);\n  }\n\n  return Object.fromEntries(acc) as Record<string, ProgramItem[]>;\n};\n\nconst getChannelEpdIndexesProgramSliced = (\n  programs: ProgramItem[],\n  overlaps: ProgramOverlaps,\n  dndChannelUuidIndex: number\n) => {\n  const acc = {} as Record<string, ProgramItem[]>;\n\n  for (const next of Object.keys(overlaps)) {\n    const channelIndex = overlaps[next]?.[0]?.data.channelIndex;\n    const channelUuid = overlaps[next]?.[0]?.data.channelUuid;\n    if (channelIndex !== undefined && channelIndex > dndChannelUuidIndex) {\n      const channelEpgIndexes = getChannelEpgIndexes(next);\n      const slicedPrograms = programs.slice(\n        channelEpgIndexes.first,\n        channelEpgIndexes.last + 1\n      );\n      acc[channelUuid] = slicedPrograms;\n    }\n  }\n  return acc;\n};\n\nexport function checkOverlaps(\n  isMultirowsDnd: boolean,\n  isVerticalMode: boolean,\n  dndChannelUuid: { index: number; uuid: string },\n  itemOverlaps: ProgramOverlaps,\n  programs: ProgramItem[]\n) {\n  const overlaps: ProgramOverlaps = { ...itemOverlaps };\n  const channelOverlaps: Record<string, number> = {};\n\n  let data = {} as Record<string, ProgramItem[]>;\n\n  const channelEpgIndexes = getChannelEpgIndexes(dndChannelUuid.uuid);\n  if (!isMultirowsDnd && channelEpgIndexes) {\n    const slicedOverlapsPrograms = getChannelEpdIndexesProgramSliced(\n      programs,\n      overlaps,\n      dndChannelUuid.index\n    );\n    data = {\n      [dndChannelUuid.uuid]: programs.slice(\n        channelEpgIndexes.first,\n        channelEpgIndexes.last + 1\n      ),\n      ...slicedOverlapsPrograms,\n    };\n  } else {\n    data = getChannelProgramSliced(programs);\n  }\n\n  for (const channel in data) {\n    const props = getOverlaps(isVerticalMode, itemOverlaps, data[channel]);\n    overlaps[channel] = props.overlaps[channel];\n    channelOverlaps[channel] = props.channelOverlaps[channel];\n  }\n  for (const channelUuid in overlaps) {\n    if (\n      overlaps?.[channelUuid] &&\n      Object.keys(overlaps?.[channelUuid])?.length === 0\n    ) {\n      delete overlaps[channelUuid];\n    }\n  }\n\n  return { overlaps, channelOverlaps };\n}\n","import { format, addMinutes, differenceInMinutes } from \"date-fns\";\n// Import types\nimport { DateTime, DragMouseUp, ResizeMouseUp } from \"./types\";\n// Import variables\nimport { TIMEZONE_MODES, TIME_FORMAT } from \"./variables\";\nimport { getTimezoneOptionsCache } from \"./layout\";\nimport { zonedDateTimeToUtc } from \"../utils/time\";\n\ntype EventProps = Pick<\n  DragMouseUp | ResizeMouseUp,\n  keyof DragMouseUp & keyof ResizeMouseUp\n>;\ntype EventSinceTill = EventProps & {\n  startDate?: DateTime;\n  hourWidth: number;\n  width?: ResizeMouseUp[\"width\"];\n  initialWidth?: ResizeMouseUp[\"initialWidth\"];\n};\n\nconst getFormattedDndDate = (newSince: Date, newTill: Date) => {\n  const timezone = getTimezoneOptionsCache();\n  if (timezone.enabled && timezone.mode === TIMEZONE_MODES.UTC_TO_ZONED_TIME) {\n    const utcDateSince = zonedDateTimeToUtc(newSince);\n    const utcDateTill = zonedDateTimeToUtc(newTill);\n    return {\n      since: utcDateSince.toISOString(),\n      till: utcDateTill.toISOString(),\n    };\n  }\n\n  return {\n    since: format(newSince, TIME_FORMAT.DEFAULT).replace(\" \", \"T\"),\n    till: format(newTill, TIME_FORMAT.DEFAULT).replace(\" \", \"T\"),\n  };\n};\n\nconst getResizeTill = ({\n  initialWidth,\n  width,\n  hourWidth,\n}: Partial<Pick<ResizeMouseUp, \"width\" | \"initialWidth\">> & {\n  hourWidth: number;\n}) => {\n  if (!initialWidth && !width) return 0;\n\n  const diff = (width as number) - (initialWidth as number);\n  const diffHours = diff / hourWidth;\n\n  return diffHours * 60;\n};\n\nexport const calculateItemDragSinceTill = (props: EventSinceTill) => {\n  const {\n    initialPositionLeft,\n    left,\n    initialWidth,\n    width,\n    hourWidth,\n    startDate,\n    since,\n    till,\n  } = props;\n  let minDiff = 0;\n  if (startDate) {\n    const startDateTime = new Date(startDate).getTime();\n    const sinceTime = new Date(since).getTime();\n    if (sinceTime < startDateTime) {\n      minDiff = differenceInMinutes(new Date(startDate), new Date(since));\n    }\n  }\n\n  const diff = left - initialPositionLeft;\n  const diffHours = diff / hourWidth;\n  const tillDiffHours = getResizeTill({ initialWidth, width, hourWidth });\n\n  const newSince = addMinutes(new Date(since), diffHours * 60 + minDiff);\n  const newTill = addMinutes(\n    new Date(till),\n    diffHours * 60 + tillDiffHours + minDiff\n  );\n  return getFormattedDndDate(newSince, newTill);\n};\n\nexport const getDefaultDragProps = (positionLeft: number) => ({\n  currentPositionX: positionLeft,\n  dndEvents: { isDragging: false },\n});\n","import { Mode, Grid as IGrid, HoursInDayDiffTime } from \"../helpers/interfaces\";\nimport { BaseTimeFormat, ChannelWithPosition, Position } from \"./types\";\nimport { generateArray } from \"./common\";\nimport { HOURS_IN_DAY } from \"./variables\";\nimport { generateTimelineSlots, getTimelineMonthsWidth } from \"./timeline\";\n\ninterface ConvertedGridItems {\n  isVerticalMode: boolean;\n  channels: ChannelWithPosition[];\n  mode: Mode;\n  dayWidth: number;\n  hourWidth: number;\n  timelineHeight: number;\n  sidebarWidth: number;\n  dayWidthResources: {\n    numberOfMonths: number;\n    numberOfHoursInDay: number;\n    monthWidth: number;\n    offsetStartHoursRange: number;\n  };\n  daysResources: {\n    numberOfDays: number;\n    days: string[];\n    months: string[];\n  };\n}\nexport const getConvertedGridItems = ({\n  isVerticalMode,\n  channels,\n  dayWidth,\n  hourWidth,\n  timelineHeight,\n  sidebarWidth,\n  mode,\n  dayWidthResources,\n  daysResources,\n}: ConvertedGridItems) => {\n  const isMonthMode = mode.type === \"month\";\n\n  const numberOfSlots = () => {\n    if (mode.type === \"day\") return dayWidthResources.numberOfHoursInDay;\n    if (mode.type === \"week\") return daysResources.numberOfDays;\n    return dayWidthResources.numberOfMonths;\n  };\n\n  const monthsWidth = () =>\n    getTimelineMonthsWidth({\n      months: daysResources.months,\n      weekDayWidth: hourWidth * HOURS_IN_DAY,\n    });\n\n  const getGridItemPosition = (channel: ChannelWithPosition, index: number) => {\n    let width = 0;\n    let left = 0;\n    if (isMonthMode) {\n      width = monthsWidth()[index].width;\n      left = monthsWidth()[index].left;\n    } else {\n      width = dayWidth / numberOfSlots();\n      left = width * index;\n    }\n    let position = {\n      top: channel.position.top,\n      left,\n      width,\n      height: channel.position.height,\n      edgeEnd: left + width,\n    };\n\n    if (isVerticalMode) {\n      position = {\n        ...position,\n        left: position.top + timelineHeight,\n        top: position.left + sidebarWidth,\n        width: position.height,\n        height: position.width,\n      };\n    } else {\n      position = {\n        ...position,\n        top: position.top + timelineHeight,\n        left: left + sidebarWidth,\n        width,\n        height: position.height,\n      };\n    }\n\n    return { position, channel };\n  };\n  return channels.flatMap((channel) =>\n    generateArray(numberOfSlots()).map((_, index) =>\n      getGridItemPosition(channel, index)\n    )\n  );\n};\n\n// On grid item click\ninterface ClickGridItem {\n  isDrop?: boolean;\n  isVerticalMode: boolean;\n  isBaseTimeFormat: BaseTimeFormat;\n  index: number | undefined;\n  item: {\n    position: Position;\n    channel: ChannelWithPosition;\n  };\n  grid: IGrid;\n  mode: Mode;\n  dayWidth: number;\n  hourWidth: number;\n  timelineHeight: number;\n  sidebarWidth: number;\n  days: string[];\n  hoursInDays: HoursInDayDiffTime[];\n  months: string[];\n  numberOfDays: number;\n  numberOfHoursInDay: number;\n  numberOfMonths: number;\n  offsetStartHoursRange: number;\n  timelineDividers: number;\n  dataAttributes?: Record<string, string>;\n}\nexport const getClickGridItemData = ({\n  isDrop = false,\n  isVerticalMode,\n  isBaseTimeFormat,\n  index,\n  item,\n  grid,\n  mode,\n  dayWidth,\n  hourWidth,\n  sidebarWidth,\n  days,\n  hoursInDays,\n  months,\n  numberOfDays,\n  numberOfHoursInDay,\n  numberOfMonths,\n  offsetStartHoursRange,\n  timelineDividers,\n  dataAttributes,\n}: ClickGridItem) => {\n  let { position, channel } = item;\n  const isDayMode = mode.type === \"day\";\n  let newPosition = {} as Position;\n  if (isVerticalMode) {\n    newPosition = {\n      ...position,\n      top: position.left,\n      left: position.top - sidebarWidth,\n      edgeEnd: position.left + hourWidth - sidebarWidth,\n    };\n  } else {\n    newPosition = {\n      ...position,\n      top: position.top,\n      left: position.left - sidebarWidth,\n      edgeEnd: position.edgeEnd - sidebarWidth,\n    };\n  }\n\n  const options = {\n    isBaseTimeFormat,\n    days,\n    hoursInDays,\n    months,\n    numberOfDays,\n    numberOfHoursInDay,\n    numberOfMonths,\n    offsetStartHoursRange,\n  };\n  const timeSlots = generateTimelineSlots(mode.type, options);\n\n  const left = isDayMode\n    ? newPosition.left + (index as number) * (hourWidth / timelineDividers)\n    : newPosition.left;\n  const edgeEnd = isDayMode\n    ? left + hourWidth / timelineDividers\n    : newPosition.edgeEnd;\n  const itemClickProps = {\n    since: \"00:00:00\",\n    till: \"00:00:00\",\n    date: \"\",\n    channelUuid: channel.uuid,\n  };\n\n  if (isDayMode) {\n    const gridItemProps = getDividerGridProps({\n      left,\n      edgeEnd,\n      timeSlots,\n      channel,\n      days,\n      dayWidth,\n      hourWidth,\n      index,\n    });\n    isDrop\n      ? grid.onGridItemDrop?.({ ...gridItemProps, ...dataAttributes })\n      : grid.onGridItemClick?.(gridItemProps);\n  }\n\n  if (mode.type === \"week\") {\n    const index = Math.floor(left / (hourWidth * 24));\n    const options = {\n      ...itemClickProps,\n      date: timeSlots[index] as string,\n    };\n    isDrop\n      ? grid.onGridItemDrop?.({ ...options, ...dataAttributes })\n      : grid.onGridItemClick?.(options);\n  }\n\n  if (mode.type === \"month\") {\n    const index = Math.floor(left / (hourWidth * 24 * 30));\n    const options = {\n      ...itemClickProps,\n      date: timeSlots[index] as string,\n    };\n    isDrop\n      ? grid.onGridItemDrop?.({ ...options, ...dataAttributes })\n      : grid.onGridItemClick?.(options);\n  }\n};\n\ninterface DividerGridProps {\n  left: number;\n  edgeEnd: number;\n  timeSlots: (string | number)[];\n  channel: ChannelWithPosition;\n  days: string[];\n  hourWidth: number;\n  dayWidth: number;\n  index: number | undefined;\n}\nconst getDividerGridProps = ({\n  left,\n  edgeEnd,\n  timeSlots,\n  channel,\n  days,\n  hourWidth,\n  dayWidth,\n  index,\n}: DividerGridProps) => {\n  let since = \"\";\n  let till = \"\";\n  const dayTimeSlots = timeSlots.map((time) =>\n    typeof time === \"number\" ? time : 0\n  );\n  const sinceTimeInHours = Math.floor(left / hourWidth); // Assuming 4 hours per hourWidth\n  const tillTimeInHours = Math.floor(edgeEnd / hourWidth); // Assuming 4 hours per hourWidth\n  const getTime = (index: number) =>\n    (dayTimeSlots[index] as number) < 10\n      ? \"0\" + dayTimeSlots[index]\n      : dayTimeSlots[index];\n  const newSince = getTime(sinceTimeInHours);\n  const newTill = getTime(tillTimeInHours);\n  const newSinceMin = index === 0 ? `00` : (index as number) * 15;\n\n  const newTillMin =\n    (index as number) + 1 === 0 ? `00` : ((index as number) + 1) * 15;\n\n  since = `${newSince}:${newSinceMin}:00`;\n  till = `${newTill}:${newTillMin}:00`;\n\n  if (newTillMin === 60) {\n    const newNextTill =\n      (dayTimeSlots[sinceTimeInHours + 1] as number) < 10\n        ? \"0\" + dayTimeSlots[sinceTimeInHours + 1]\n        : dayTimeSlots[tillTimeInHours];\n    till = newTill ? `${newNextTill}:00:00 ` : \"00:00:00\";\n  }\n  const singleDayWidth = dayWidth / (days.length - 1);\n  const dayIndex = Math.floor(left / singleDayWidth);\n\n  const options = {\n    since,\n    till,\n    date: days[dayIndex],\n    channelUuid: channel.uuid,\n  };\n  return options;\n};\n","import styled from \"@emotion/styled/macro\";\nimport { Layers, Theme } from \"../helpers\";\n\nexport const Container = styled.div<{\n  height?: number;\n  width?: number;\n}>`\n  padding: 5px;\n  height: ${({ height }) => (height ? `${height}px` : \"100%\")};\n  width: ${({ width }) => (width ? `${width}px` : \"100%\")};\n\n  *,\n  ::before,\n  ::after {\n    box-sizing: border-box;\n  }\n`;\n\nexport const Wrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  border-radius: 6px;\n  overflow: hidden;\n`;\n\nexport const ScrollBox = styled.div<{ theme?: Theme; isRTL?: boolean }>`\n  position: relative;\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  scroll-behavior: smooth;\n  background: ${({ theme }) => theme.primary[900]};\n\n  ${({ isRTL }) => isRTL && `transform: scale(-1,1)`};\n\n  ::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: ${({ theme }) => theme.scrollbar.thumb.bg};\n    border: 10px none ${({ theme }) => theme.white};\n    border-radius: 20px;\n  }\n  ::-webkit-scrollbar-thumb:hover {\n    background: ${({ theme }) => theme.white};\n  }\n\n  ::-webkit-scrollbar-track {\n    background: ${({ theme }) => theme.primary[900]};\n    border: 22px none ${({ theme }) => theme.white};\n    border-radius: 0px;\n  }\n\n  ::-webkit-scrollbar-corner {\n    background: ${({ theme }) => theme.primary[900]};\n  }\n`;\n\nexport const Box = styled.div<{\n  isRTL?: boolean;\n  left?: number;\n  top?: number;\n  theme?: Theme;\n}>`\n  position: absolute;\n  top: ${({ top = 0 }) => top}px;\n  background: ${({ theme }) => theme.primary[900]};\n  z-index: ${Layers.EpgCornerBox};\n\n  ${({ isRTL, left = 0 }) => (isRTL ? `right:0px;` : ` left: ${left}px`)};\n`;\n\nexport const Content = styled.div<{\n  isVerticalMode: boolean;\n  isSidebar: boolean;\n  isTimeline: boolean;\n  theme?: Theme;\n  dayWidth: number;\n  contentHeight: number;\n  sidebarWidth: number;\n  timelineHeight: number;\n}>`\n  position: relative;\n  left: ${({ isSidebar, sidebarWidth }) => (isSidebar ? sidebarWidth : 0)}px;\n  height: ${({ contentHeight }) => contentHeight}px;\n  width: ${({ dayWidth }) => dayWidth}px;\n  background: ${({ theme }) => theme.primary[900]};\n\n  ${({ isVerticalMode, isTimeline, dayWidth, timelineHeight, contentHeight }) =>\n    isVerticalMode &&\n    `\n      left: ${isTimeline ? timelineHeight : 0}px;\n      width: ${contentHeight}px;\n      height: ${dayWidth}px;\n    `}\n`;\n\nexport const LayoutBg = styled.div<{\n  isVerticalMode: boolean;\n  isTimeline: boolean;\n  isSidebar: boolean;\n  dayWidth: number;\n  contentHeight: number;\n  timelineHeight: number;\n  sidebarWidth: number;\n}>`\n  position: absolute;\n  top: ${({ isTimeline, timelineHeight }) =>\n    isTimeline ? timelineHeight : 0}px;\n  left: ${({ isSidebar, sidebarWidth }) => (isSidebar ? sidebarWidth : 0)}px;\n  height: 100%;\n  width: ${({ dayWidth }) => dayWidth}px;\n\n  ${({\n    isVerticalMode,\n    isTimeline,\n    isSidebar,\n    dayWidth,\n    timelineHeight,\n    sidebarWidth,\n  }) =>\n    isVerticalMode &&\n    `\n     top: ${isSidebar ? sidebarWidth : 0}px;\n     left: ${isTimeline ? timelineHeight : 0}px;\n     width: 100%;\n     height: ${dayWidth}px;\n    `}\n`;\n","import { css } from \"@emotion/react\";\nimport styled from \"@emotion/styled/macro\";\nimport { Layers, Theme } from \"../helpers\";\n\nexport const Box = styled.div<{\n  isVerticalMode?: boolean;\n  isTimeline: boolean;\n  isRTL: boolean;\n  sidebarWidth: number;\n  timelineHeight: number;\n  contentHeight: number;\n  bottom: number;\n  theme?: Theme;\n}>`\n  ${({\n    isVerticalMode,\n    isTimeline,\n    isRTL,\n    sidebarWidth,\n    timelineHeight,\n    contentHeight,\n    bottom,\n    theme,\n  }) => css`\n    position: sticky;\n    background-color: ${theme.primary[900]};\n\n    ${isRTL && `& > div { transform: scale(-1,1) }`};\n\n    ${isVerticalMode &&\n    css`\n      top: 0;\n      left: ${isTimeline ? timelineHeight : 0}px;\n      height: ${sidebarWidth}px;\n      width: ${contentHeight}px;\n    `}\n\n    ${!isVerticalMode &&\n    css`\n      left: 0;\n      bottom: ${bottom}px;\n      float: left;\n      width: ${sidebarWidth}px;\n    `}\n  `}\n  z-index: ${Layers.Sidebar};\n`;\n","import { css } from \"@emotion/react\";\nimport styled from \"@emotion/styled/macro\";\nimport { Theme } from \"../helpers\";\n\nexport const ChannelWrapper = styled.div<{\n  isVerticalMode?: boolean;\n  top: number;\n  height: number;\n  groupTree?: boolean;\n  theme?: Theme;\n}>`\n  ${({ isVerticalMode, top, height, groupTree, theme }) => css`\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: ${theme.primary[900]};\n    cursor: ${groupTree ? \"pointer\" : \"default\"};\n\n    ${isVerticalMode &&\n    css`\n      top: 0;\n      left: ${top}px;\n      width: ${height}px;\n      height: 100%;\n    `}\n    ${!isVerticalMode &&\n    css`\n      top: ${top}px;\n      height: ${height}px;\n      width: 100%;\n    `};\n  `}\n`;\n\nexport const ChannelLogo = styled.img`\n  max-height: 60px;\n  max-width: 60px;\n  position: relative;\n`;\n","import styled from \"@emotion/styled/macro\";\nimport { Layers, Theme } from \"../helpers\";\n\nexport const ProgramContent = styled.div<{\n  isVerticalMode?: boolean;\n  isLive: boolean;\n  width: number;\n  theme?: Theme;\n}>`\n  border: 1px solid #171923;\n  position: relative;\n  display: flex;\n  font-size: 11px;\n  height: 100%;\n  border-radius: 8px;\n  padding: 10px ${({ width }) => (width < 30 ? 4 : 20)}px;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.4s ease-in-out;\n  background: ${({ theme: { primary } }) =>\n    `linear-gradient(to right, ${primary[600]}, ${primary[600]})`};\n  z-index: ${Layers.Program};\n\n  &:hover {\n    background: ${({ theme: { gradient } }) =>\n      `linear-gradient(to right, ${gradient.blue[900]}, ${gradient.blue[600]})`};\n  }\n\n  ${({ isLive, isVerticalMode, theme: { gradient } }) =>\n    isLive &&\n    `background: linear-gradient(to ${isVerticalMode ? \"bottom\" : \"right\"}, ${\n      gradient.blue[900]\n    }, ${gradient.blue[600]},${gradient.blue[300]})`}\n`;\n\nexport const ProgramFlex = styled.div<{ isVerticalMode?: boolean }>`\n  width: 100%;\n  display: flex;\n  justify-content: flex-start;\n\n  ${({ isVerticalMode }) => isVerticalMode && `flex-direction: column;`};\n`;\n\nconst Elipsis = `\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nexport const ProgramTitle = styled.p<{ theme?: Theme }>`\n  font-size: 14px;\n  text-align: left;\n  margin-top: 0;\n  margin-bottom: 5px;\n  font-weight: 500;\n  color: ${({ theme }) => theme.grey[300]};\n  ${Elipsis}\n`;\n\nexport const ProgramText = styled.span<{ theme?: Theme }>`\n  display: block;\n  font-size: 12.5px;\n  font-weight: 400;\n  color: ${({ theme }) => theme.text.grey[500]};\n  text-align: left;\n  ${Elipsis}\n`;\n\nexport const ProgramImage = styled.img<{ isVerticalMode?: boolean }>`\n  margin-right: 15px;\n  border-radius: 6px;\n  width: 100px;\n\n  ${({ isVerticalMode }) =>\n    isVerticalMode && `width: 100%; margin-bottom: 10px`};\n`;\n\nexport const ProgramStack = styled.div<{ isRTL?: boolean }>`\n  overflow: hidden;\n  ${({ isRTL }) =>\n    isRTL &&\n    `transform: scale(-1,1); \n     display: flex; \n     flex-direction: column; \n     align-items: flex-end`};\n`;\n\nexport const ProgramBox = styled.div<{\n  isResizing?: boolean;\n  isDragging?: boolean;\n  width: number;\n}>`\n  position: absolute;\n  padding: ${({ width }) => (width === 0 ? 0 : 4)}px;\n  z-index: ${({ isDragging, isResizing }) =>\n    isDragging || isResizing ? Layers.Program * 3 : Layers.Program};\n  overflow: hidden;\n\n  ${({ isDragging, isResizing }) =>\n    (!isDragging || !isResizing) &&\n    ` &:hover {\n    z-index: ${Layers.Program * 2};\n\n    ${ProgramResizeHandle} {\n      opacity: 1;\n    }\n  }`}\n\n  ${({ isDragging, isResizing, theme }) =>\n    (isDragging || isResizing) &&\n    ` \n    border-radius: 10px;\n    background: ${theme.green[200]};\n    \n    ${ProgramContent}{\n      user-select: none;\n      cursor: move;\n  }\n  `}\n`;\n\nexport const ProgramResizeHandle = styled.div<{\n  isResize?: boolean;\n  isVerticalMode?: boolean;\n  left?: boolean;\n}>`\n  position: absolute;\n  opacity: 0;\n\n  ${({ isResize }) => !isResize && \"display: none;\"}\n\n  ${({ isVerticalMode, left }) =>\n    isVerticalMode &&\n    `\n    ${left ? `top: 0;` : `bottom: 0;`}\n    left:0;\n    height:25px;\n    width: 100%;\n  cursor: ${left ? \"n-resize\" : \"s-resize\"};\n  `}\n  ${({ isVerticalMode, left }) =>\n    !isVerticalMode &&\n    `\n    top: 0;\n    bottom: 0;\n    ${left ? `left: 0;` : `right: 0;`}\n    width: 25px;\n    cursor: ${left ? \"w-resize\" : \"e-resize\"};\n    `}\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    margin: auto;\n    border-radius: 8px;\n    background: ${({ theme }) => theme.green[200]};\n\n    ${({ isVerticalMode, left }) =>\n      !isVerticalMode &&\n      `   top: 0;\n      bottom: 0;\n      height: 50%;\n      width: 4px;\n        ${left ? `left: 9px;` : `right: 9px;`}\n        `}\n    ${({ isVerticalMode, left }) =>\n      isVerticalMode &&\n      `\n      ${left ? `top: 9px;` : `bottom: 9px;`}\n     left:50%;\n      height: 4px;\n      width: 50%;\n      transform: translateX(-50%);\n     \n        `}\n  }\n`;\n","import { css } from \"@emotion/react\";\nimport styled from \"@emotion/styled/macro\";\nimport { Layers, Theme } from \"../helpers\";\n\nexport const TimelineTime = styled.span<{\n  isVerticalMode?: boolean;\n  isBaseTimeFormat?: boolean;\n  isWeekMonthMode?: boolean;\n  isRTL?: boolean;\n  isNewDay?: boolean;\n  theme?: Theme;\n}>`\n  position: absolute;\n  top: 13px;\n  left: ${({ isRTL, isBaseTimeFormat, isVerticalMode, isWeekMonthMode }) => {\n    if (isVerticalMode) {\n      if (isRTL) return isBaseTimeFormat ? 9 : 17;\n      return isBaseTimeFormat ? 9 : 14;\n    }\n    if (isWeekMonthMode) return 0;\n    return isRTL && isBaseTimeFormat ? \"-32\" : \"-18\";\n  }}px;\n\n  color: ${({ theme }) => theme.text.grey[300]};\n\n  ${({ isRTL }) =>\n    isRTL &&\n    `\n      transform: scale(-1, 1);\n    `}\n\n  ${({ theme, isNewDay }) =>\n    isNewDay && `color: ${theme.teal[100]}; font-weight: 600`};\n\n  ${({ isVerticalMode, isRTL }) =>\n    isVerticalMode &&\n    css`\n      top: -10px;\n      left: 50%;\n      transform: translate(-50%, 0%) ${isRTL ? \"scale(-1,1)\" : \"\"};\n    `};\n`;\nexport const TimelineWeekMonthDate = styled.div<{\n  isVerticalMode?: boolean;\n  isRTL?: boolean;\n  styleType?: \"default\" | \"modern\";\n  theme?: Theme;\n}>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  height: 100%;\n  transform: ${({ isRTL }) => (isRTL ? \"scale(-1,1)\" : \"scale(1,1)\")};\n\n  span {\n    color: ${({ theme }) => theme.text.grey[300]};\n    font-size: 16px;\n  }\n\n  ${({ styleType, theme }) =>\n    styleType === \"modern\" &&\n    css`\n      span:first-of-type {\n        font-weight: 500;\n        color: ${theme.teal[100]};\n        font-size: 18px;\n      }\n      span {\n        font-weight: 500;\n        color: ${theme.text.grey[300]};\n        font-size: 24px;\n      }\n    `}\n\n  ${({ isVerticalMode, isRTL }) =>\n    isVerticalMode &&\n    css`\n      margin-top: 0px;\n      transform: ${isRTL ? \"scale(-1,1)\" : \"scale(1,1)\"};\n    `};\n`;\n\nexport const TimelineDividers = styled.div<{\n  isVerticalMode?: boolean;\n}>`\n  position: relative;\n  height: 100%;\n  width: 100%;\n  padding-bottom: 6px;\n\n  ${({ isVerticalMode }) =>\n    isVerticalMode &&\n    css`\n      grid-template-columns: 1fr;\n      align-items: start;\n    `}\n`;\n\nexport const TimelineDivider = styled.div<{\n  isVerticalMode?: boolean;\n  isNewDay?: boolean;\n  theme?: Theme;\n  width: number;\n  left: number;\n}>`\n  position: absolute;\n  bottom: 6px;\n  background: ${({ theme }) => theme.timeline.divider.bg};\n  height: 10px;\n  width: 1px;\n  left: ${({ left }) => left}px;\n\n  ${({ isVerticalMode, left }) =>\n    isVerticalMode &&\n    css`\n      top: ${left}px;\n      left: 50%;\n      height: 1px;\n      width: 15px;\n      transform: translate(-50%, -50%);\n      &:first-of-type {\n        opacity: 0;\n        visibility: hidden;\n      }\n    `}\n\n  ${({ isNewDay, theme }) =>\n    isNewDay &&\n    `&:first-of-type {\n      width:2px;\n      background: ${theme.teal[100]};\n  }`}\n`;\n\nexport const TimelineWrapper = styled.div<{\n  isVerticalMode?: boolean;\n  isSidebar: boolean;\n  dayWidth: number;\n  sidebarWidth: number;\n  timelineHeight: number;\n  theme?: Theme;\n}>`\n  ${({\n    isVerticalMode,\n    isSidebar,\n    sidebarWidth,\n    timelineHeight,\n    dayWidth,\n    theme,\n  }) =>\n    css`\n      position: sticky;\n      background: ${theme.primary[900]};\n      z-index: ${Layers.Timeline};\n\n      ${isVerticalMode &&\n      css`\n        left: 0;\n        bottom: 0px;\n        float: left;\n        width: ${timelineHeight}px;\n        margin-top: ${isSidebar ? sidebarWidth : 0}px;\n      `}\n\n      ${!isVerticalMode &&\n      css`\n        top: 0;\n        left: ${isSidebar ? sidebarWidth : 0}px;\n        height: ${timelineHeight}px;\n        width: ${dayWidth}px;\n      `}\n    `}\n`;\n\nexport const TimelineBox = styled.div<{\n  isVerticalMode?: boolean;\n  isWeekMonthMode?: boolean;\n  isToday: boolean;\n  isCurrentTime: boolean;\n  isTodayInHoursInDays?: boolean;\n  areHoursInDays?: boolean;\n  width: number;\n  left: number;\n  timelineHeight: number;\n}>`\n  ${({ isVerticalMode, left, width, timelineHeight, theme }) => css`\n    position: absolute;\n    font-size: 14px;\n    background-color: ${theme.primary[900]};\n\n    ${!isVerticalMode &&\n    css`\n      left: ${left}px;\n      width: ${width}px;\n      height: 100%;\n    `}\n    ${isVerticalMode &&\n    css`\n      top: ${left}px;\n      height: ${width}px;\n      width: ${timelineHeight}px;\n    `}\n  `}\n\n  ${({\n    isVerticalMode,\n    isToday,\n    isCurrentTime,\n    isTodayInHoursInDays,\n    areHoursInDays,\n    isWeekMonthMode,\n  }) => {\n    const typeNumberDefault = isToday && isCurrentTime ? 2 : 1;\n    const typeNumberInHoursDays = areHoursInDays\n      ? isTodayInHoursInDays && isCurrentTime\n        ? 2\n        : 1\n      : 1;\n    const typeNumber = areHoursInDays\n      ? typeNumberInHoursDays\n      : typeNumberDefault;\n    const position = isVerticalMode ? \"top\" : \"left\";\n\n    if (!isWeekMonthMode) {\n      return `&:nth-of-type(${typeNumber}) {\n        ${TimelineTime} {\n          ${position}: 0px;\n        }\n      }`;\n    }\n    return \"\";\n  }}\n`;\nexport const TimelineWeekMonthBox = styled(TimelineBox)<{\n  isVerticalMode?: boolean;\n  isWeekMonthMode?: boolean;\n  isToday: boolean;\n  isCurrentTime: boolean;\n  isTodayInHoursInDays?: boolean;\n  areHoursInDays?: boolean;\n  width: number;\n  left: number;\n  timelineHeight: number;\n  styleType?: \"default\" | \"modern\";\n}>`\n  ${({ isVerticalMode, styleType, theme }) =>\n    css`\n      &:not(:last-of-type) {\n        &:after {\n          content: \"\";\n          position: absolute;\n          background: ${theme.timeline.divider.bg};\n          transform: translate(-50%, -50%);\n\n          ${isVerticalMode\n            ? css`\n                bottom: 0;\n                height: 1px;\n                width: 80%;\n              `\n            : css`\n                top: 50%;\n                right: 0;\n                height: 100%;\n                height: ${styleType === \"modern\" ? \"35%\" : \"70%\"};\n                width: 1px;\n              `}\n        }\n      }\n    `}\n`;\n","import styled from \"@emotion/styled/macro\";\nimport { Layers, Theme } from \"../helpers\";\n\nexport const lineStyles = {\n  position: \"absolute\",\n  top: 64,\n  width: 3,\n};\n\nexport const LineBox = styled.div<{\n  isVerticalMode: boolean;\n  isTimeline: boolean;\n  height: number;\n  left: number;\n  zIndex: Layers;\n  theme?: Theme;\n}>`\n  position: ${lineStyles.position};\n  top: ${({ isTimeline }) => (isTimeline ? lineStyles.top : 0)}px;\n  left: ${({ left }) => left}px;\n  height: ${({ height }) => height}px;\n  width: ${lineStyles.width}px;\n  background: ${({ theme }) => theme.green[300]};\n  pointer-events: none;\n  z-index: ${({ zIndex }) => zIndex};\n\n  ${({ isVerticalMode, isTimeline, left, height }) =>\n    isVerticalMode &&\n    ` \n      top: ${left}px;\n      left: ${isTimeline ? lineStyles.top : 0}px;\n      height: ${lineStyles.width}px;\n      width: ${height}px;\n  `}\n`;\n","import styled from \"@emotion/styled/macro\";\nimport { keyframes } from \"@emotion/react\";\nimport { Layers, Theme } from \"../helpers\";\n\nconst time = [0, 50, 0];\n\nconst moveLeft = (animate: { right: string[] }) => keyframes`\n${time.map(\n  (item, index) => `${item}% {\n  transform: translateX(-${animate.right[index]});\n}`\n)}\n`;\n\nexport const Box = styled.div<{ theme?: Theme }>`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  background: ${({ theme }) => theme.loader.bg};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ${Layers.Loader};\n`;\n\nexport const Shape = styled.div<{\n  width: number;\n  color: \"teal\" | \"purple\" | \"pink\";\n  marginRight?: number;\n  transition: { duration: number; ease?: string; delay?: number };\n  animate: { right: string[] };\n  theme?: Theme;\n}>`\n  width: ${({ width }) => width * 0.42}px;\n  background: ${({ theme, color }) => theme.loader[color]};\n  height: 18px;\n  border-radius: 45px;\n  margin-right: ${({ marginRight }) => marginRight ?? 0}px;\n  animation-name: ${({ animate }) => moveLeft(animate)};\n  animation-duration: ${({ transition }) => transition.duration}s;\n  animation-timing-function: ${({ transition }) =>\n    transition.ease ?? \"ease-in-out\"};\n  animation-delay: ${({ transition }) => transition.delay ?? 0}s;\n  animation-iteration-count: infinite;\n`;\n","import { css } from \"@emotion/react\";\nimport styled from \"@emotion/styled/macro\";\nimport { Theme } from \"../helpers\";\n\nexport const boxStyles = ({ width }: { width?: number | string } = {}) => ({\n  position: \"absolute\",\n  top: 0,\n  width: width ?? 70,\n  height: 20,\n});\n\nexport const CurrentTimeBox = styled.div<{\n  top: number;\n  left: number;\n  width: number | string;\n}>`\n  position: ${boxStyles().position};\n  top: ${({ top }) => top}px;\n  left: ${({ left }) => left}px;\n  width: ${({ width }) => (typeof width === \"string\" ? \"auto\" : `${width}px`)};\n  height: ${boxStyles().height}px;\n  background-color: ${({ theme }) => theme.primary[900]};\n  z-index: 2;\n`;\n\nexport const CurrentTimeContent = styled.span<{\n  isVerticalMode?: boolean;\n  isBaseTimeFormat?: boolean;\n  isRTL?: boolean;\n  isNewDay?: boolean;\n  theme?: Theme;\n}>`\n  ${({ isVerticalMode, isBaseTimeFormat, isRTL, isNewDay, theme }) => css`\n    position: absolute;\n    font-size: 13px;\n    font-weight: 500;\n    color: ${theme.green[200]};\n    background-color: ${theme.primary[900]};\n    ${isNewDay && `color: ${theme.teal[100]}; font-weight: 600`};\n\n    ${isVerticalMode &&\n    css`\n      left: 50%;\n      transform: translate(-50%, -50%) ${isRTL ? \"scale(-1,1)\" : \"\"};\n    `}\n\n    ${!isVerticalMode &&\n    css`\n      top: 4px;\n      left: ${isRTL && isBaseTimeFormat ? \"-32\" : \"-16\"}px;\n      ${isRTL && \"transform: scale(-1,1);\"}\n    `}\n  `}\n`;\n","import styled from \"@emotion/styled/macro\";\n// Import helpers\nimport { Layers, Theme } from \"../helpers\";\nimport { css } from \"@emotion/react\";\n\nexport const AreaFiled = styled.div<{\n  isVerticalMode?: boolean;\n  isClickable?: boolean;\n  positionX: number;\n  height: number;\n  width: number;\n  timelineHeight: number;\n  theme?: Theme;\n}>`\n  position: absolute;\n  pointer-events: ${(props) => (props.isClickable ? \"auto\" : \"none\")};\n  cursor: ${(props) => (props.isClickable ? \"pointer\" : \"none\")};\n  z-index: ${Layers.Area};\n\n  ${({ isVerticalMode, positionX, height, width, timelineHeight }) =>\n    isVerticalMode\n      ? css`\n          top: ${positionX}px;\n          left: ${timelineHeight}px;\n          height: ${width}px;\n          width: ${height}px;\n        `\n      : css`\n          top: ${timelineHeight}px;\n          left: ${positionX}px;\n          height: ${height}px;\n          width: ${width}px;\n        `}\n`;\nexport const AreaBg = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const AreaAnnotation = styled.div<{\n  isVerticalMode: boolean;\n  isLeft?: boolean;\n  width: number;\n  timelineHeight: number;\n}>`\n  padding: 4px 6px;\n  font-size: 15px;\n  width: max-content;\n\n  ${({ isVerticalMode, isLeft = false, width, timelineHeight }) => css`\n    ${!isVerticalMode\n      ? css`\n          position: sticky;\n          top: ${timelineHeight}px;\n          ${isLeft\n            ? `float:left; border-top-right-radius: 4px; border-bottom-right-radius:4px;`\n            : `float:right; border-top-left-radius: 4px; border-bottom-left-radius: 4px;`}\n        `\n      : css`\n          position: sticky;\n          left: ${timelineHeight}px;\n          border-top-right-radius: 4px;\n          border-bottom-right-radius: 4px;\n          ${isLeft && css`` ? `top: 0; ` : `margin-top:${width - 60}px;`}\n        `}\n  `}\n`;\n","import { css } from \"@emotion/react\";\nimport styled from \"@emotion/styled/macro\";\n\nexport const GridContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 1;\n`;\n\nexport const GridWrapper = styled.div<{\n  isVerticalMode: boolean;\n  isSidebar: boolean;\n  isTimeline: boolean;\n  sidebarWidth: number;\n  timelineHeight: number;\n}>`\n  position: relative;\n  top: ${({ isTimeline, timelineHeight }) =>\n    isTimeline ? timelineHeight : 0}px;\n  left: ${({ isSidebar, sidebarWidth }) => (isSidebar ? sidebarWidth : 0)}px;\n\n  ${({ isVerticalMode, isSidebar, isTimeline, sidebarWidth, timelineHeight }) =>\n    isVerticalMode &&\n    `\n     top: ${isSidebar ? sidebarWidth : 0}px;\n      left: ${isTimeline ? timelineHeight : 0}px;\n    `}\n`;\n\nexport const GridItem = styled.div<{\n  isDayMode: boolean;\n  isHoverHighlight: boolean;\n  isDragOver?: boolean;\n  isItemClickable: boolean;\n  top: number;\n  left: number;\n  height: number;\n  width: number;\n}>`\n  position: absolute;\n  top: ${({ top }) => top}px;\n  left: ${({ left }) => left}px;\n  height: ${({ height }) => height}px;\n  width: ${({ width }) => width}px;\n  border: 1px solid transparent;\n  border-right-color: ${({ theme }) => theme.grid.item};\n  border-bottom-color: ${({ theme }) => theme.grid.item};\n  z-index: 1;\n\n  ${({ isDayMode, isHoverHighlight, isDragOver, theme }) =>\n    !isDayMode &&\n    isHoverHighlight &&\n    `\n    &:hover {\n      border: 1px solid ${theme.grid.highlight};\n    }   \n\n    ${isDragOver && `border: 1px solid ${theme.grid.highlight};`}\n    `}\n\n  ${({ isItemClickable }) =>\n    isItemClickable &&\n    css`\n      cursor: pointer;\n    `}\n`;\n\nexport const GridDivider = styled.div<{\n  isVerticalMode?: boolean;\n  isHoverHighlight: boolean;\n  isDragOver?: boolean;\n  isItemClickable?: boolean;\n  left: number;\n  width: number;\n}>`\n  position: absolute;\n  top: 0;\n  left: ${({ left }) => left}px;\n  border: 1px solid transparent;\n  border-right-color: ${({ theme }) => theme.grid.divider};\n  height: 100%;\n  width: ${({ width }) => width}px;\n\n  ${({ isHoverHighlight, theme }) =>\n    isHoverHighlight &&\n    `\n    &:hover {\n      border: 1px solid ${theme.grid.highlight};\n    }   \n\n\n    `}\n  ${({ isDragOver, theme }) =>\n    isDragOver &&\n    `\n    border: 1px solid ${theme.grid.highlight}; \n\n    `}\n\n  ${({ isVerticalMode, left, width, theme }) =>\n    isVerticalMode &&\n    css`\n      top: ${left}px;\n      left: 0;\n      width: 100%;\n      height: ${width}px;\n      border-bottom-color: ${theme.grid.divider};\n    `}\n\n  ${({ isItemClickable }) =>\n    isItemClickable &&\n    css`\n      cursor: pointer;\n    `}\n`;\n","export const theme = {\n  primary: {\n    600: \"#1a202c\",\n    900: \"#171923\",\n  },\n  grey: { 300: \"#d1d1d1\" },\n  white: \"#fff\",\n  teal: {\n    100: \"#38B2AC\",\n  },\n  green: {\n    200: \"#389493\",\n    300: \"#2C7A7B\",\n  },\n  loader: {\n    teal: \"#5DDADB\",\n    purple: \"#3437A2\",\n    pink: \"#F78EB6\",\n    bg: \"#171923db\",\n  },\n  scrollbar: {\n    border: \"#ffffff\",\n    thumb: {\n      bg: \"#e1e1e1\",\n    },\n  },\n\n  gradient: {\n    blue: {\n      300: \"#002eb3\",\n      600: \"#002360\",\n      900: \"#051937\",\n    },\n  },\n\n  text: {\n    grey: {\n      300: \"#a0aec0\",\n      500: \"#718096\",\n    },\n  },\n\n  timeline: {\n    divider: {\n      bg: \"#718096\",\n    },\n  },\n  grid: {\n    item: \"#7180961a\",\n    divider: \"#7180961a\",\n    highlight: \"#38B2AC\",\n  },\n};\n","import React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { startOfDay } from \"date-fns\";\n// Import interfaces\nimport { HoursInDayDiffTime } from \"../helpers/interfaces\";\n// Import types\nimport { DateTime, InitialScrollPositions } from \"../helpers/types\";\n// Import utils\nimport { getNewDateTz } from \"../utils/time\";\n// Import helpers\nimport {\n  DEBOUNCE_WAIT,\n  DEBOUNCE_WAIT_MAX,\n  getHoursInDaysPositionX,\n  getPositionX,\n  useIsomorphicLayoutEffect,\n} from \"../helpers\";\n\ninterface useLayoutProps {\n  isVerticalMode: boolean;\n  isToday: boolean;\n  isInitialScrollToNow: boolean;\n  initialScrollPositions: InitialScrollPositions;\n  height?: number;\n  width?: number;\n  hourWidth: number;\n  sidebarWidth: number;\n  channelsNumber: number;\n  startDate: DateTime;\n  endDate: DateTime;\n  currentDate: string;\n  hoursInDays: HoursInDayDiffTime[];\n}\n\nexport function useLayout({\n  isVerticalMode,\n  isToday,\n  isInitialScrollToNow,\n  initialScrollPositions,\n  height,\n  width,\n  channelsNumber,\n  startDate,\n  endDate,\n  hourWidth,\n  sidebarWidth,\n  hoursInDays,\n}: useLayoutProps) {\n  const useIsomorphicEffect = useIsomorphicLayoutEffect();\n\n  const containerRef = React.useRef<HTMLDivElement>(null);\n  const scrollBoxRef = React.useRef<HTMLDivElement>(null);\n  //-------- State --------\n  const [scrollY, setScrollY] = React.useState<number>(0);\n  const [scrollX, setScrollX] = React.useState<number>(0);\n  const [layoutWidth, setLayoutWidth] = React.useState<number>(width as number);\n  const [layoutHeight, setLayoutHeight] = React.useState<number>(\n    height as number\n  );\n  //-------- Variables --------\n  const scrollBoxInnerHeight = scrollBoxRef?.current?.scrollHeight;\n\n  const initialScrollPositionsSerialized = JSON.stringify(\n    initialScrollPositions\n  );\n\n  // -------- Handlers --------\n  const handleScrollDebounced = useDebouncedCallback(\n    (value) => {\n      setScrollY(value.y);\n      setScrollX(value.x);\n    },\n    DEBOUNCE_WAIT,\n    { maxWait: DEBOUNCE_WAIT_MAX }\n  );\n\n  const handleOnScroll = React.useCallback(\n    (e: React.UIEvent<HTMLDivElement, UIEvent> & { target: Element }) => {\n      handleScrollDebounced({ y: e.target.scrollTop, x: e.target.scrollLeft });\n    },\n    [handleScrollDebounced]\n  );\n\n  const hoursInDaysSerialized = JSON.stringify(hoursInDays);\n  const areHoursInDays = React.useMemo(\n    () => hoursInDays.length > 0,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [hoursInDaysSerialized]\n  );\n  const handleOnScrollToNow = React.useCallback(\n    () => {\n      if (scrollBoxRef?.current && isToday) {\n        const clientWidth = (width ??\n          containerRef.current?.clientWidth) as number;\n\n        const date = new Date(startDate);\n        let positionX = getPositionX(\n          startOfDay(date),\n          getNewDateTz(),\n          startDate,\n          endDate,\n          hourWidth\n        );\n\n        if (areHoursInDays) {\n          positionX = getHoursInDaysPositionX({\n            hoursInDays,\n            hourWidth,\n            sidebarWidth,\n          });\n        }\n\n        const scrollNow = positionX - clientWidth / 2 + sidebarWidth;\n\n        if (isVerticalMode) {\n          scrollBoxRef.current.scrollTop = scrollNow + hourWidth;\n        } else {\n          scrollBoxRef.current.scrollLeft = scrollNow;\n        }\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      isVerticalMode,\n      isToday,\n      areHoursInDays,\n      width,\n      hourWidth,\n      sidebarWidth,\n      startDate,\n      endDate,\n    ]\n  );\n\n  const handleScrollToInitialPositions = React.useCallback(\n    () => {\n      const isInitialScrollPosition = Object.keys(\n        initialScrollPositions\n      ).length;\n      if (scrollBoxRef?.current && isInitialScrollPosition) {\n        const { top = 0, left = 0 } = initialScrollPositions;\n        scrollBoxRef.current.scrollTo({ behavior: \"smooth\", top, left });\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [initialScrollPositionsSerialized, scrollBoxInnerHeight]\n  );\n\n  const handleOnScrollTop = React.useCallback(\n    (value: number = hourWidth) => {\n      if (scrollBoxRef?.current) {\n        const top = scrollBoxRef.current.scrollTop + value;\n        scrollBoxRef.current.scrollTop = top;\n      }\n    },\n    [hourWidth]\n  );\n\n  const handleOnScrollRight = React.useCallback(\n    (value: number = hourWidth) => {\n      if (scrollBoxRef?.current) {\n        const right = scrollBoxRef.current.scrollLeft + value;\n        scrollBoxRef.current.scrollLeft = right;\n      }\n    },\n    [hourWidth]\n  );\n\n  const handleOnScrollLeft = React.useCallback(\n    (value: number = hourWidth) => {\n      if (scrollBoxRef?.current) {\n        const left = scrollBoxRef.current.scrollLeft - value;\n        scrollBoxRef.current.scrollLeft = left;\n      }\n    },\n    [hourWidth]\n  );\n\n  const handleResizeDebounced = useDebouncedCallback(\n    () => {\n      if (containerRef?.current && !width) {\n        const container = containerRef.current;\n        const { clientWidth } = container;\n        setLayoutWidth(clientWidth);\n      }\n    },\n    DEBOUNCE_WAIT * 4,\n    { maxWait: DEBOUNCE_WAIT_MAX * 4 }\n  );\n\n  const handleCheckIsLayoutBottom = React.useCallback(\n    (offset: number = 0) => {\n      if (scrollBoxRef?.current) {\n        if (isVerticalMode) {\n          // Check if the scroll is at the bottom in scrollBox in vertical mode\n          const { scrollWidth, scrollLeft, clientWidth } = scrollBoxRef.current;\n          if (scrollLeft === 0) return false;\n          return scrollWidth - scrollLeft - offset <= clientWidth;\n        } else {\n          // Check if the scroll is at the bottom in scrollBox\n          const { scrollHeight, scrollTop, clientHeight } =\n            scrollBoxRef.current;\n          if (scrollTop === 0) return false;\n          return scrollHeight - scrollTop - offset <= clientHeight;\n        }\n      }\n      return false;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [isVerticalMode, scrollX, scrollY, channelsNumber]\n  );\n\n  const handleCheckIsLayoutRight = React.useCallback(\n    (offset: number = 0) => {\n      if (scrollBoxRef?.current) {\n        if (isVerticalMode) {\n          // Check if the scroll is at the right in scrollBox in vertical mode\n          const { scrollHeight, scrollTop, clientHeight } =\n            scrollBoxRef.current;\n          if (scrollTop === 0) return false;\n          return scrollHeight - scrollTop - offset <= clientHeight;\n        } else {\n          // Check if the scroll is at the right in scrollBox\n          const { scrollWidth, scrollLeft, clientWidth } = scrollBoxRef.current;\n          if (scrollLeft === 0) return false;\n          return scrollWidth - scrollLeft - offset <= clientWidth;\n        }\n      }\n      return false;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [scrollX, scrollY, channelsNumber]\n  );\n\n  // -------- Effects --------\n  useIsomorphicEffect(() => {\n    if (containerRef?.current) {\n      const container = containerRef.current;\n      if (!width) {\n        const { clientWidth } = container;\n        setLayoutWidth(clientWidth);\n      }\n      if (!height) {\n        const { clientHeight } = container;\n        setLayoutHeight(clientHeight);\n      }\n    }\n  }, [height, width, startDate]);\n\n  useIsomorphicEffect(() => {\n    const isInitialScrollPosition = Object.keys(initialScrollPositions).length;\n    if (scrollBoxRef?.current) {\n      if (isInitialScrollPosition) {\n        handleScrollToInitialPositions();\n      } else if (isInitialScrollToNow) {\n        handleOnScrollToNow();\n      }\n    }\n  }, [isToday, isInitialScrollToNow, initialScrollPositionsSerialized]);\n\n  useIsomorphicEffect(() => {\n    window.addEventListener(\"resize\", handleResizeDebounced);\n    return () => {\n      window.removeEventListener(\"resize\", handleResizeDebounced);\n    };\n  }, [width]);\n\n  return {\n    containerRef,\n    scrollBoxRef,\n    scrollX,\n    scrollY,\n    layoutWidth,\n    layoutHeight,\n    isLayoutBottom: handleCheckIsLayoutBottom,\n    isLayoutRight: handleCheckIsLayoutRight,\n    onScroll: handleOnScroll,\n    onScrollToNow: handleOnScrollToNow,\n    onScrollTop: handleOnScrollTop,\n    onScrollLeft: handleOnScrollLeft,\n    onScrollRight: handleOnScrollRight,\n  };\n}\n","import React from \"react\";\nimport { startOfToday } from \"date-fns\";\n\n// Import interfaces\nimport {\n  Area,\n  ChannelWithOmittedUuid,\n  DragAndDrop,\n  Grid,\n  HoursInDay,\n  Mode,\n  Overlap,\n  ProgramOverlaps,\n  ProgramWithOmittedUuid,\n  Snap,\n  Theme,\n  Timezone,\n} from \"../helpers/interfaces\";\n\n// Import types\nimport {\n  DateTime,\n  BaseTimeFormat,\n  Position,\n  InitialScrollPositions,\n  ProgramItem,\n  DragMouseUp,\n  ResizeMouseUp,\n  ChannelWithPosition,\n} from \"../helpers/types\";\n\n// Import helpers\nimport {\n  DAY_WIDTH,\n  ITEM_HEIGHT,\n  ITEM_OVERSCAN,\n  SIDEBAR_WIDTH,\n  LIVE_REFRESH_TIME,\n  TIMELINE_HEIGHT,\n  TIMELINE_DIVIDERS,\n  formatTime,\n  getConvertedChannels,\n  getConvertedPrograms,\n  getItemVisibility,\n  getSidebarItemVisibility,\n  getDayWidthResources,\n  getTimeRangeDates,\n  getDayResources,\n  getTimelineItemVisibility,\n  getTimelineHeight,\n  getNumberOfHoursInDays,\n  resetLayoutScreenCloneElements,\n  checkOverlaps,\n  calculateItemDragSinceTill,\n  getChannelEpgIndexes,\n  setChannelEpgIndexes,\n  setTimezoneOptionsCache,\n  setUpdatedLayoutItem,\n} from \"../helpers\";\n\n// Import theme\nimport { theme as defaultTheme } from \"../theme\";\n\n// Import components\nimport { useLayout } from \"./useLayout\";\nimport { getConvertedGridItems } from \"../helpers/grid\";\n\ninterface useEpgProps {\n  isVerticalMode?: boolean;\n  isRTL?: boolean;\n  isBaseTimeFormat?: BaseTimeFormat;\n  isSidebar?: boolean;\n  isTimeline?: boolean;\n  isLine?: boolean;\n  isCurrentTime?: boolean;\n  isInitialScrollToNow?: boolean;\n  isResize?: boolean;\n  initialScrollPositions?: InitialScrollPositions;\n  channels: ChannelWithOmittedUuid[];\n  epg: ProgramWithOmittedUuid[];\n  width?: number;\n  height?: number;\n  startDate?: DateTime;\n  endDate?: DateTime;\n  liveRefreshTime?: number;\n  mode?: Mode;\n  timezone?: Timezone;\n  overlap?: Overlap;\n  timelineDividers?: number;\n  snap?: Snap;\n  grid?: Grid;\n  dnd?: DragAndDrop;\n  areas?: Area[];\n  hoursInDays?: HoursInDay[];\n  theme?: Theme;\n  globalStyles?: string;\n  dayWidth?: number;\n  sidebarWidth?: number;\n  timelineHeight?: number;\n  itemHeight?: number;\n  itemOverscan?: number;\n  channelMapKey?: string;\n  programChannelMapKey?: string;\n}\n\nconst defaultStartDateTime = formatTime(startOfToday());\nconst defaultMode = { type: \"day\", style: \"default\" } as Mode;\nconst defaultTimezone = {\n  enabled: false,\n  zone: \"\",\n  mode: \"formatInTimeZone\",\n} as Timezone;\nconst defaultOverlap = {\n  enabled: false,\n  mode: \"stack\",\n  layerOverlapLevel: 0.4,\n} as Overlap;\nconst defaultGrid = {\n  enabled: false,\n  hoverHighlight: false,\n} as Grid;\nconst defaultDnd = {\n  enabled: false,\n  mode: \"row\",\n} as DragAndDrop;\n\nexport function useEpg(props: useEpgProps) {\n  let {\n    isVerticalMode = false,\n    isRTL = false,\n    isResize = false,\n    isBaseTimeFormat = false,\n    isSidebar = true,\n    isTimeline = true,\n    isLine = true,\n    isCurrentTime = false,\n    isInitialScrollToNow = true,\n  } = props;\n\n  const { width, height } = props;\n\n  const { channels: channelsEpg, epg } = props;\n\n  const {\n    startDate: startDateInput = defaultStartDateTime,\n    endDate: endDateInput = \"\",\n    hoursInDays: customHoursInDays = [],\n  } = props;\n\n  const {\n    initialScrollPositions = {},\n    liveRefreshTime = LIVE_REFRESH_TIME,\n    timelineDividers = TIMELINE_DIVIDERS,\n    snap,\n    mode: customMode = defaultMode,\n    overlap: customOverlap = defaultOverlap,\n    timezone: customTimezone = defaultTimezone,\n    areas = [],\n    grid = defaultGrid,\n    dnd = defaultDnd,\n    theme: customTheme,\n    globalStyles,\n  } = props;\n\n  const {\n    dayWidth: customDayWidth = DAY_WIDTH,\n    sidebarWidth = SIDEBAR_WIDTH,\n    timelineHeight: customTimelineHeight = TIMELINE_HEIGHT,\n    itemHeight = ITEM_HEIGHT,\n    itemOverscan = ITEM_OVERSCAN,\n  } = props;\n\n  const { channelMapKey = \"uuid\", programChannelMapKey = \"channelUuid\" } =\n    props;\n\n  const timezone = { ...defaultTimezone, ...customTimezone };\n  const mode = { ...defaultMode, ...customMode };\n  const overlap = { ...defaultOverlap, ...customOverlap };\n  const isOverlapEnabled = overlap.enabled;\n  const isMultirowsDnd = dnd.mode === \"multi-rows\";\n\n  // Get converted start and end dates\n  const { startDate, endDate } = getTimeRangeDates(\n    startDateInput,\n    endDateInput\n  );\n\n  // Get hours in days\n  const serializedHoursInDays = JSON.stringify(customHoursInDays);\n  const hoursInDays = React.useMemo(\n    () => getNumberOfHoursInDays({ customHoursInDays, startDate }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [serializedHoursInDays]\n  );\n\n  // Get days resources eg. number of days, dates and hours\n  const { isToday, currentDate, ...daysResources } = React.useMemo(\n    () =>\n      getDayResources({\n        startDate,\n        endDate,\n        modeType: mode.type,\n      }),\n    [startDate, endDate, mode.type]\n  );\n\n  // Get day and hour width of the day\n  const { hourWidth, dayWidth, ...dayWidthResourcesProps } = React.useMemo(\n    () =>\n      getDayWidthResources({\n        dayWidth: customDayWidth,\n        startDate,\n        endDate,\n        hoursInDays,\n        modeType: mode.type,\n      }),\n    [customDayWidth, startDate, endDate, hoursInDays, mode.type]\n  );\n\n  // -------- State --------\n  const [update, setForceUpdate] = React.useReducer((x) => x + 1, 0);\n  const [updateChannels, setForceChannelsUpdate] = React.useReducer(\n    (x) => x + 1,\n    0\n  );\n  const [dndChannelUuid, setDndChannelUuid] = React.useState({\n    index: -1,\n    uuid: \"\",\n  });\n\n  const [newOverlaps, setNewOverlaps] = React.useState<number>(() => 0);\n  let [overlaps, setOverlaps] = React.useState<ProgramOverlaps>({});\n  const [channelOverlapsCount, setChannelOverlapsCount] = React.useState<\n    Record<string, number>\n  >({});\n\n  const timezoneSerialized = JSON.stringify(timezone);\n  // Set base timezone functions\n  React.useMemo(\n    () => {\n      if (timezone.enabled) {\n        setTimezoneOptionsCache(timezone);\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [timezoneSerialized]\n  );\n\n  React.useEffect(() => {\n    setForceUpdate();\n    setDndChannelUuid({ index: -1, uuid: \"\" });\n  }, [isVerticalMode]);\n\n  const {\n    isLayoutBottom,\n    isLayoutRight,\n    containerRef,\n    scrollBoxRef,\n    ...layoutProps\n  } = useLayout({\n    isVerticalMode,\n    isToday,\n    isInitialScrollToNow,\n    initialScrollPositions,\n    startDate,\n    endDate,\n    sidebarWidth,\n    width,\n    height,\n    hourWidth,\n    currentDate,\n    hoursInDays,\n    channelsNumber: channelsEpg.length,\n  });\n\n  React.useEffect(() => {\n    return () => {\n      resetLayoutScreenCloneElements();\n    };\n  }, []);\n\n  const { scrollX, scrollY, layoutWidth, layoutHeight } = layoutProps;\n  const { onScroll, onScrollToNow, onScrollTop, onScrollLeft, onScrollRight } =\n    layoutProps;\n\n  //-------- Variables --------\n  const timelineHeight = getTimelineHeight(customTimelineHeight, mode);\n\n  const channelsEpgSerialized = React.useMemo(\n    () => JSON.stringify(channelsEpg),\n    [channelsEpg]\n  );\n  const channelOverlapsCountSerialized = React.useMemo(\n    () => channelOverlapsCount,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [JSON.stringify(channelOverlapsCount)]\n  );\n  const channels = React.useMemo(\n    () => {\n      // Convert channels\n      return getConvertedChannels(\n        isOverlapEnabled,\n        overlap.mode,\n        overlap.layerOverlapLevel as number,\n        channelsEpg,\n        itemHeight,\n        channelMapKey,\n        channelOverlapsCount\n      );\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      isOverlapEnabled,\n      overlap.mode,\n      overlap.layerOverlapLevel,\n      channelsEpgSerialized,\n      channelOverlapsCountSerialized,\n      itemHeight,\n      channelMapKey,\n      newOverlaps,\n      updateChannels,\n    ]\n  );\n\n  const startDateTime = formatTime(startDate);\n  const endDateTime = formatTime(endDate);\n  const channelsSerialized = React.useMemo(\n    () => JSON.stringify(channels),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [channels]\n  );\n  const overlapsSerialized = React.useMemo(\n    () => overlaps,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [JSON.stringify(overlaps)]\n  );\n\n  const { programs, programOverlaps } = React.useMemo(\n    () => {\n      const data = getConvertedPrograms({\n        isVerticalMode,\n        isOverlapEnabled,\n        programChannelMapKey,\n        data: epg,\n        channels,\n        startDate: startDateTime,\n        endDate: endDateTime,\n        hoursInDays,\n        itemHeight,\n        hourWidth,\n      });\n\n      if (isOverlapEnabled) {\n        const _overlaps = overlaps;\n\n        const { overlaps: itemsOverlaps, channelOverlaps } = checkOverlaps(\n          isMultirowsDnd,\n          isVerticalMode,\n          dndChannelUuid,\n          _overlaps,\n          data\n        );\n\n        setChannelOverlapsCount({\n          ...channelOverlapsCount,\n          ...channelOverlaps,\n        });\n        setNewOverlaps((prev) => prev + 1);\n        setOverlaps(itemsOverlaps);\n        return {\n          programs: data,\n          programOverlaps: itemsOverlaps,\n        };\n      }\n      return { programs: data, programOverlaps: {} };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      isMultirowsDnd,\n      isOverlapEnabled,\n      isVerticalMode,\n      epg,\n      channelsSerialized,\n      overlapsSerialized,\n      startDateTime,\n      endDateTime,\n      itemHeight,\n      hourWidth,\n      hoursInDays,\n      programChannelMapKey,\n      timezoneSerialized,\n      update,\n    ]\n  );\n\n  const gridItems = React.useMemo(\n    () => {\n      if (!grid.enabled) return [];\n      return getConvertedGridItems({\n        isVerticalMode,\n        channels,\n        dayWidth,\n        hourWidth,\n        timelineHeight,\n        sidebarWidth,\n        mode,\n        dayWidthResources: dayWidthResourcesProps,\n        daysResources,\n      });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      grid.enabled,\n      channelsSerialized,\n      mode.type,\n      dayWidthResourcesProps.numberOfHoursInDay,\n      dayWidthResourcesProps.numberOfMonths,\n      daysResources.numberOfDays,\n      dayWidth,\n      hourWidth,\n      sidebarWidth,\n      timelineHeight,\n      isVerticalMode,\n    ]\n  );\n\n  const theme: Theme = { ...defaultTheme, ...customTheme };\n\n  // -------- Handlers --------\n  const isProgramVisible = React.useCallback(\n    (position: Position, overlapsCount: number) => {\n      return getItemVisibility({\n        isVerticalMode,\n        itemOverscan,\n        overlapsCount,\n        position,\n        scrollY,\n        scrollX,\n        containerHeight: layoutHeight,\n        containerWidth: layoutWidth,\n      });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [isVerticalMode, itemOverscan, layoutHeight, layoutWidth, scrollY, scrollX]\n  );\n\n  const isChannelVisible = React.useCallback(\n    (position: Pick<Position, \"top\" | \"height\">) =>\n      getSidebarItemVisibility({\n        isVerticalMode,\n        itemOverscan,\n        position,\n        scrollX,\n        scrollY,\n        containerHeight: layoutHeight,\n        containerWidth: layoutWidth,\n      }),\n\n    [isVerticalMode, itemOverscan, scrollY, scrollX, layoutHeight, layoutWidth]\n  );\n\n  const isTimelineVisible = React.useCallback(\n    (position: Pick<Position, \"left\" | \"width\">) =>\n      getTimelineItemVisibility({\n        position,\n        scrollY,\n        scrollX,\n        containerHeight: layoutHeight,\n        containerWidth: layoutWidth,\n        isVerticalMode,\n      }),\n    [scrollY, scrollX, layoutHeight, layoutWidth, isVerticalMode]\n  );\n\n  const dndOnSuccessCb = React.useCallback(\n    (event: ProgramWithOmittedUuid) => dnd?.onDnDSuccess?.(event),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n  const resizeMouseUp = React.useCallback(\n    (props: ResizeMouseUp) => {\n      const newTime = calculateItemDragSinceTill({\n        ...props,\n        hourWidth,\n        startDate,\n      });\n\n      epg[props.index].since = newTime.since;\n      epg[props.index].till = newTime.till;\n      setDndChannelUuid({\n        index: epg[props.index].channelIndex,\n        uuid: epg[props.index][programChannelMapKey] as string,\n      });\n      dndOnSuccessCb(epg[props.index]);\n      setForceUpdate();\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [isVerticalMode, startDate, hourWidth, programs]\n  );\n\n  const dragMouseUp = React.useCallback(\n    async (props: DragMouseUp) => {\n      const newTime = calculateItemDragSinceTill({\n        ...props,\n        hourWidth,\n        startDate,\n      });\n      const element = { ...epg[props.index] };\n\n      const checkChannelTopOutRange = () => {\n        const elementChannel = element.channelPosition;\n        if (\n          props.top > elementChannel.top + elementChannel.height - 1 ||\n          props.top < elementChannel.top - 1\n        ) {\n          return true;\n        }\n        return false;\n      };\n      const checkChannelTopInRange = () => {\n        const elementChannel = element.channelPosition;\n        return elementChannel.top <= props.top &&\n          props.top <= elementChannel.top + elementChannel.height\n          ? true\n          : false;\n      };\n\n      const isChannelTopInRange = checkChannelTopInRange();\n\n      const isChannelTopOutRange = checkChannelTopOutRange();\n      if (isMultirowsDnd && isChannelTopOutRange) {\n        const newChannel = channels.find(\n          (channel) => channel.position.top === props.top\n        );\n        const newChannelRange = channels.find(\n          (channel) =>\n            channel.position.top <= props.top &&\n            props.top <= channel.position.top + channel.position.height\n        );\n\n        if (newChannel) {\n          const newChannelEpgIndexes = getChannelEpgIndexes(\n            newChannel[channelMapKey]\n          );\n          if (newChannelEpgIndexes) {\n            epg[props.index].since = newTime.since;\n            epg[props.index].till = newTime.till;\n            epg[props.index][programChannelMapKey] = newChannel[\n              channelMapKey\n            ] as string;\n            epg[props.index].channelIndex = newChannel.index as number;\n            epg[props.index].channelPosition = {\n              top: newChannel.position.top,\n              height: newChannel.position.height,\n              left: newChannel.position.left,\n            };\n          } else {\n            setChannelEpgIndexes({\n              uuid: newChannel[channelMapKey],\n              first: props.index,\n              last: props.index,\n            });\n            epg[props.index].since = newTime.since;\n            epg[props.index].till = newTime.till;\n            epg[props.index][programChannelMapKey] = newChannel[\n              channelMapKey\n            ] as string;\n            epg[props.index].channelIndex = newChannel.index as number;\n            epg[props.index].channelPosition = {\n              top: newChannel.position.top,\n              height: newChannel.position.height,\n              left: newChannel.position.left,\n            };\n          }\n        } else if (newChannelRange) {\n          epg[props.index].since = newTime.since;\n          epg[props.index].till = newTime.till;\n          epg[props.index][programChannelMapKey] = newChannelRange[\n            channelMapKey\n          ] as string;\n          epg[props.index].channelIndex = newChannelRange.index as number;\n          epg[props.index].channelPosition = {\n            top: newChannelRange.position.top,\n            height: newChannelRange.position.height,\n            left: newChannelRange.position.left,\n          };\n        }\n      } else if (isMultirowsDnd && isChannelTopInRange) {\n        epg[props.index].since = newTime.since;\n        epg[props.index].till = newTime.till;\n      } else {\n        epg[props.index].since = newTime.since;\n        epg[props.index].till = newTime.till;\n        setDndChannelUuid({\n          index: epg[props.index].channelIndex,\n          uuid: epg[props.index][programChannelMapKey] as string,\n        });\n      }\n      dndOnSuccessCb(epg[props.index]);\n      setForceUpdate();\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [isMultirowsDnd, startDate, hourWidth, programs]\n  );\n\n  const handleGetLayoutData = React.useCallback(\n    (events: ProgramItem[]) => events.map((event) => ({ ...event.data })),\n    []\n  );\n\n  const handleOpenChannelGroupTree = React.useCallback(\n    (data: ChannelWithPosition) => {\n      channelsEpg[data.index].isOpen = !channelsEpg[data.index].isOpen;\n      setForceChannelsUpdate();\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [channels]\n  );\n\n  const handleGetDropItemData = React.useCallback(\n    (data: ProgramWithOmittedUuid) => setUpdatedLayoutItem(data, mode.type),\n    [mode.type]\n  );\n\n  const getEpgProps = () => ({\n    isVerticalMode,\n    isRTL,\n    isSidebar,\n    isLine,\n    isTimeline,\n    width,\n    height,\n    sidebarWidth,\n    timelineHeight,\n    ref: containerRef,\n    theme,\n    globalStyles,\n  });\n\n  const getLayoutProps = () => ({\n    isVerticalMode,\n    isRTL,\n    isBaseTimeFormat,\n    isSidebar,\n    isTimeline,\n    isLine,\n    isCurrentTime,\n    isProgramVisible,\n    isChannelVisible,\n    isTimelineVisible,\n    isToday,\n    isResize,\n    programs,\n    programOverlaps,\n    channels,\n    channelOverlapsCount,\n    layerOverlapLevel: overlap.layerOverlapLevel as number,\n    snap,\n    grid,\n    gridItems,\n    dnd,\n    startDate,\n    endDate,\n    hoursInDays,\n    liveRefreshTime,\n    scrollY,\n    dayWidth,\n    hourWidth,\n    sidebarWidth,\n    timelineHeight,\n    itemHeight,\n    currentDate,\n    mode,\n    timezone,\n    timelineDividers,\n    overlapMode: overlap.mode,\n    overlap,\n    areas,\n    openChannelGroupTree: handleOpenChannelGroupTree,\n    onScroll,\n    dragMouseUp,\n    resizeMouseUp,\n    ...daysResources,\n    ...dayWidthResourcesProps,\n    ref: scrollBoxRef,\n  });\n\n  return {\n    isLayoutBottom,\n    isLayoutRight,\n    getEpgProps,\n    getLayoutProps,\n    getLayoutData: handleGetLayoutData,\n    getDropItemData: handleGetDropItemData,\n    onScrollToNow,\n    onScrollTop,\n    onScrollLeft,\n    onScrollRight,\n    scrollY,\n    scrollX,\n  };\n}\n","import React from \"react\";\n\n// Import helpers\nimport { useIsomorphicLayoutEffect } from \"../helpers\";\n\nexport function useInterval(callback: () => void, delay: number | null) {\n  const useIsomorphicEffect = useIsomorphicLayoutEffect();\n  const savedCallback = React.useRef(callback);\n\n  useIsomorphicEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  React.useEffect(() => {\n    if (!delay && delay !== 0) {\n      return;\n    }\n\n    const id = setInterval(() => savedCallback.current(), delay);\n\n    return () => clearInterval(id);\n  }, [delay]);\n}\n","import React from \"react\";\n\nexport function useIsTouchDevice() {\n  const [isMobile, setIsMobile] = React.useState(false);\n\n  React.useEffect(() => {\n    function checkDevice() {\n      const iOS =\n        /iPad|iPhone|iPod/.test(navigator.userAgent) ||\n        (navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document);\n      const androidOrWebOS = /Android|webOS/.test(navigator.userAgent);\n\n      const isMobileDevice = iOS || androidOrWebOS;\n\n      const isTouchScreen =\n        \"ontouchstart\" in window ||\n        navigator.maxTouchPoints > 0 ||\n        (window.matchMedia &&\n          window.matchMedia(\"(any-pointer: coarse)\").matches);\n\n      setIsMobile(isMobileDevice || isTouchScreen);\n    }\n\n    checkDevice();\n\n    window.addEventListener(\"resize\", checkDevice);\n\n    return () => {\n      window.removeEventListener(\"resize\", checkDevice);\n    };\n  }, []);\n\n  return isMobile;\n}\n","import { useRef, useState, useCallback, MouseEvent, useEffect } from \"react\";\n// Import interfaces\nimport { Program } from \"../helpers/interfaces\";\n// Import types\nimport { DragMouseUp, Position } from \"../helpers/types\";\n// Import helpers\nimport { getDefaultDragProps } from \"../helpers\";\n// Import hooks\nimport { useIsTouchDevice } from \"./useIsTouchDevice\";\n\ninterface DndPosition {\n  x: number;\n  y: number;\n}\n\ninterface UseDragProps {\n  isVerticalMode: boolean;\n  isDndEnabled: boolean;\n  isDndMutlirows: boolean;\n  initialPosition: Omit<Position, \"edgeEnd\">;\n  data: Program;\n  dayWidth: number;\n  itemHeight: number;\n  contentHeight: number;\n  dndSnapX?: number;\n  dndSnapY?: number;\n  elementRef: React.RefObject<HTMLDivElement>;\n  mouseUpCb: (props: DragMouseUp) => void;\n  dndMouseUpCb?: (props: DragMouseUp, data: Program) => void;\n}\n\nexport function useDrag(props: UseDragProps) {\n  const {\n    isDndEnabled,\n    isDndMutlirows,\n    isVerticalMode,\n    initialPosition,\n    data,\n    dayWidth,\n    itemHeight,\n    contentHeight,\n    dndSnapX,\n    dndSnapY = itemHeight,\n    elementRef,\n    mouseUpCb,\n    dndMouseUpCb,\n  } = props;\n  const isClicked = useRef<boolean>(false);\n  const isMouseMove = useRef<boolean>(false);\n  const isTouchDevice = useIsTouchDevice();\n\n  const [isDragging, setIsDragging] = useState(false);\n  const [isPreventScroll, setIsPreventScroll] = useState(false);\n\n  const [position, setPosition] = useState<DndPosition>({\n    x: initialPosition.left,\n    y: initialPosition.top,\n  });\n\n  const [coords, setCoords] = useState<{\n    startY: number;\n    lastY: number;\n    startX: number;\n    lastX: number;\n  }>({\n    startY: initialPosition.top,\n    lastY: initialPosition.top,\n    startX: initialPosition.left,\n    lastX: initialPosition.left,\n  });\n\n  const { id, index, since, till, channelPosition } = data;\n\n  const handleMouseDown = useCallback(\n    (e: MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>) => {\n      e.stopPropagation();\n      isClicked.current = true;\n\n      isTouchDevice && setIsPreventScroll(true);\n      setIsDragging(true);\n      const event = (\n        isTouchDevice ? (e as React.TouchEvent<HTMLDivElement>).touches[0] : e\n      ) as MouseEvent<HTMLDivElement>;\n      coords.startY = event.clientY;\n      coords.startX = event.clientX;\n    },\n    [isTouchDevice, coords]\n  );\n\n  const handleMouseClick = useCallback((e: MouseEvent<HTMLDivElement>) => {\n    if (isMouseMove.current) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }, []);\n\n  const handleMouseUp = useCallback(\n    async () => {\n      if (isVerticalMode) {\n        coords.lastY = elementRef.current?.offsetTop as number;\n        coords.lastX = elementRef.current?.offsetLeft as number;\n      } else {\n        coords.lastY = elementRef.current?.offsetTop as number;\n        coords.lastX = elementRef.current?.offsetLeft as number;\n      }\n\n      const options = {\n        id,\n        index,\n        since,\n        till,\n      };\n\n      if (\n        !isVerticalMode &&\n        isClicked.current &&\n        (initialPosition.left !== coords.lastX ||\n          initialPosition.top !== coords.lastY)\n      ) {\n        const optionsYX = {\n          ...options,\n          top: coords.lastY,\n          left: coords.lastX,\n          initialPositionLeft: initialPosition.left,\n          initialPositionTop: initialPosition.top,\n        };\n        const isDndMouseUpSuccess = await dndMouseUpCb?.(optionsYX, data);\n        if (isDndMouseUpSuccess) {\n          mouseUpCb(optionsYX);\n        } else {\n          elementRef.current!.style.left = `${initialPosition.left}px`;\n          elementRef.current!.style.top = `${initialPosition.top}px`;\n          setPosition((prev) => ({\n            ...prev,\n            x: initialPosition.left,\n            y: initialPosition.top,\n          }));\n        }\n      }\n      if (\n        isVerticalMode &&\n        isClicked.current &&\n        (initialPosition.left !== coords.lastX ||\n          initialPosition.top !== coords.lastY)\n      ) {\n        const optionsY = {\n          ...options,\n          top: coords.lastX,\n          left: coords.lastY,\n          initialPositionLeft: initialPosition.top,\n          initialPositionTop: initialPosition.left,\n        };\n        const isDndMouseUpSuccess = await dndMouseUpCb?.(optionsY, data);\n        if (isDndMouseUpSuccess) {\n          mouseUpCb(optionsY);\n        } else {\n          elementRef.current!.style.left = `${initialPosition.left}px`;\n          elementRef.current!.style.top = `${initialPosition.top}px`;\n          setPosition((prev) => ({\n            ...prev,\n            x: initialPosition.left,\n            y: initialPosition.top,\n          }));\n        }\n      }\n      isClicked.current = false;\n      setIsDragging(false);\n      if (isTouchDevice) {\n        setIsPreventScroll(false);\n      }\n      setTimeout(() => (isMouseMove.current = false), 0);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      isVerticalMode,\n      initialPosition.top,\n      initialPosition.left,\n      coords,\n      id,\n      index,\n      since,\n      till,\n      mouseUpCb,\n    ]\n  );\n\n  const initialPositionSerialized = JSON.stringify(initialPosition);\n  useEffect(() => {\n    // if (isVerticalMode) {\n    //   setCoords({\n    //     startY: initialPosition.top,\n    //     lastY: initialPosition.top,\n    //     startX: initialPosition.left,\n    //     lastX: initialPosition.left,\n    //   });\n    // }\n    setCoords({\n      startY: initialPosition.top,\n      lastY: initialPosition.top,\n      startX: initialPosition.left,\n      lastX: initialPosition.left,\n    });\n    setPosition({\n      x: initialPosition.left,\n      y: initialPosition.top,\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isVerticalMode, initialPositionSerialized]);\n\n  useEffect(() => {\n    function handleMouseMove(e: globalThis.MouseEvent | TouchEvent) {\n      if (isPreventScroll) {\n        e.preventDefault();\n      }\n      if (!isDndEnabled) return;\n      if (!isClicked.current) return;\n      if (!elementRef.current) return;\n      isMouseMove.current = true;\n\n      const event = (\n        isTouchDevice ? (e as TouchEvent).touches[0] : e\n      ) as globalThis.MouseEvent;\n\n      const offsetWidth = (\n        isVerticalMode\n          ? elementRef.current?.offsetHeight\n          : elementRef.current?.offsetWidth\n      ) as number;\n      const offsetHeight = (\n        isVerticalMode\n          ? elementRef.current?.offsetWidth\n          : elementRef.current?.offsetHeight\n      ) as number;\n      const elementChannel = channelPosition;\n\n      if (isVerticalMode) {\n        const nextYValue = event.clientY - coords.startY + coords.lastY;\n        const nextY = dndSnapX\n          ? Math.round(nextYValue / dndSnapX) * dndSnapX\n          : nextYValue;\n\n        if (isDndMutlirows) {\n          const nextX = event.clientX - coords.startX + coords.lastX;\n          const nextXSnap = Math.round(nextX / dndSnapY) * dndSnapY;\n          if (\n            nextXSnap >= 0 &&\n            nextXSnap <= contentHeight - offsetHeight &&\n            nextY >= 0 &&\n            nextY <= dayWidth - offsetWidth\n          ) {\n            const checkTopRange = () => {\n              if (nextXSnap > elementChannel.top + elementChannel.height - 1) {\n                return true;\n              } else if (nextXSnap < elementChannel.top - 1) {\n                return true;\n              }\n              return false;\n            };\n            const isOutTopRange = checkTopRange();\n\n            if (!isOutTopRange) {\n              elementRef.current!.style.top = `${nextY}px`;\n              elementRef.current!.style.left = `${initialPosition.left}px`;\n              setPosition((prev) => ({\n                ...prev,\n                y: nextY,\n                x: initialPosition.left,\n              }));\n            } else {\n              elementRef.current!.style.top = `${nextY}px`;\n              elementRef.current!.style.left = `${nextXSnap}px`;\n              setPosition((prev) => ({ ...prev, y: nextY, x: nextXSnap }));\n            }\n          }\n        } else if (nextY >= 0 && nextY <= dayWidth - offsetWidth) {\n          elementRef.current!.style.top = `${nextY}px`;\n          setPosition((prev) => ({ ...prev, y: nextY }));\n        }\n      } else {\n        const nextXValue = event.clientX - coords.startX + coords.lastX;\n        const nextX = dndSnapX\n          ? Math.round(nextXValue / dndSnapX) * dndSnapX\n          : nextXValue;\n\n        if (isDndMutlirows) {\n          const nextY = event.clientY - coords.startY + coords.lastY;\n          const nextYSnap = Math.round(nextY / dndSnapY) * dndSnapY;\n          if (\n            nextYSnap >= 0 &&\n            nextYSnap <= contentHeight - offsetHeight &&\n            nextX >= 0 &&\n            nextX <= dayWidth - offsetWidth\n          ) {\n            const checkTopRange = () => {\n              if (nextYSnap > elementChannel.top + elementChannel.height - 1) {\n                return true;\n              } else if (nextYSnap < elementChannel.top - 1) {\n                return true;\n              }\n              return false;\n            };\n            const isOutTopRange = checkTopRange();\n\n            if (!isOutTopRange) {\n              elementRef.current!.style.left = `${nextX}px`;\n              elementRef.current!.style.top = `${initialPosition.top}px`;\n              setPosition((prev) => ({\n                ...prev,\n                x: nextX,\n                y: initialPosition.top,\n              }));\n            } else {\n              elementRef.current!.style.top = `${nextYSnap}px`;\n              elementRef.current!.style.left = `${nextX}px`;\n              setPosition((prev) => ({ ...prev, x: nextX, y: nextYSnap }));\n            }\n          }\n        } else if (nextX >= 0 && nextX <= dayWidth - offsetWidth) {\n          elementRef.current!.style.left = `${nextX}px`;\n          setPosition((prev) => ({ ...prev, x: nextX }));\n        }\n      }\n    }\n\n    const mouseMoveEvent = isTouchDevice ? \"touchmove\" : \"mousemove\";\n    const mouseUpEvent = isTouchDevice ? \"touchend\" : \"mouseup\";\n    const options = isTouchDevice ? { passive: false } : undefined;\n    if (isDndEnabled) {\n      document.addEventListener(mouseMoveEvent, handleMouseMove, options);\n      document.addEventListener(mouseUpEvent, handleMouseUp);\n    }\n\n    return () => {\n      document.removeEventListener(mouseMoveEvent, handleMouseMove);\n      document.removeEventListener(mouseUpEvent, handleMouseUp);\n    };\n  }, [\n    isTouchDevice,\n    isPreventScroll,\n    isDndEnabled,\n    isVerticalMode,\n    isDragging,\n    isDndMutlirows,\n    initialPosition.top,\n    initialPosition.left,\n    channelPosition,\n    dndSnapX,\n    dndSnapY,\n    coords,\n    dayWidth,\n    itemHeight,\n    contentHeight,\n    elementRef,\n    handleMouseUp,\n  ]);\n\n  if (isDndEnabled) {\n    const events = isTouchDevice\n      ? {\n          onTouchStart: handleMouseDown,\n          onTouchEnd: handleMouseUp,\n        }\n      : { onMouseDown: handleMouseDown, onMouseUp: handleMouseUp };\n    return {\n      dndEvents: {\n        isDragging,\n        ref: elementRef,\n        onClick: handleMouseClick,\n        ...events,\n      },\n      currentPositionX: isVerticalMode ? position.y : position.x,\n    };\n  }\n\n  return getDefaultDragProps(initialPosition.left);\n}\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\n// Import interfaces\nimport { Program } from \"../helpers/interfaces\";\n// Import types\nimport { Position, ResizeMouseUp } from \"../helpers/types\";\n// Import hooks\nimport { useIsTouchDevice } from \"./useIsTouchDevice\";\n\ninterface UseResizeProps {\n  isVerticalMode: boolean;\n  isResize: boolean;\n  initialPosition: Omit<Position, \"edgeEnd\">;\n  data: Program;\n  dayWidth: number;\n  contentHeight: number;\n  snapX?: number;\n  elementRef: React.RefObject<HTMLDivElement>;\n  mouseUpCb: (props: ResizeMouseUp) => void;\n}\n\ninterface DndPosition {\n  x: number;\n  y: number;\n  width: number;\n}\n\nexport function useResize({\n  isResize,\n  isVerticalMode,\n  data,\n  dayWidth,\n  contentHeight,\n  initialPosition,\n  snapX,\n  elementRef,\n  mouseUpCb,\n}: UseResizeProps) {\n  const isClicked = useRef<boolean>(false);\n  const isMouseMove = useRef<boolean>(false);\n  const isTouchDevice = useIsTouchDevice();\n\n  // State\n  const [isPreventScroll, setIsPreventScroll] = useState(false);\n  const [isResizing, setIsResizing] = useState(false);\n  const [isResizingLeft, setIsResizingLeft] = useState(false);\n  const [isResizingRight, setIsResizingRight] = useState(false);\n\n  const [mouseOffsetX, setMouseOffsetX] = useState<number>(0);\n\n  const [position, setPosition] = useState<DndPosition>({\n    x: initialPosition.left,\n    y: initialPosition.top,\n    width: isVerticalMode ? initialPosition.height : initialPosition.width,\n  });\n\n  const [coords, setCoords] = useState<{\n    startY: number;\n    lastY: number;\n    startX: number;\n    lastX: number;\n  }>({\n    startY: initialPosition.top,\n    lastY: initialPosition.top,\n    startX: initialPosition.left,\n    lastX: initialPosition.left,\n  });\n\n  const { id, index, since, till } = data;\n\n  const initialWidth = useMemo(\n    () => (isVerticalMode ? initialPosition.height : initialPosition.width),\n    [isVerticalMode, initialPosition.height, initialPosition.width]\n  );\n\n  const handleMouseDown = useCallback(\n    (left: boolean = false) =>\n      (e: React.MouseEvent | React.TouchEvent) => {\n        e.stopPropagation();\n        isClicked.current = true;\n\n        isTouchDevice && setIsPreventScroll(true);\n        setIsResizing(true);\n\n        const container = elementRef.current;\n        if (!container) return;\n\n        const event = (\n          isTouchDevice ? (e as React.TouchEvent<HTMLDivElement>).touches[0] : e\n        ) as React.MouseEvent;\n        setMouseOffsetX(isVerticalMode ? event.pageY : event.pageX);\n        coords.startY = event.clientY;\n        coords.startX = event.clientX;\n        if (left) {\n          setIsResizingLeft(true);\n          setIsResizingRight(false);\n        } else {\n          setIsResizingLeft(false);\n          setIsResizingRight(true);\n        }\n      },\n    [isTouchDevice, isVerticalMode, coords, elementRef]\n  );\n\n  const handleMouseClick = useCallback(\n    (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n      if (isMouseMove.current) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    },\n    []\n  );\n\n  const handleMouseUp = useCallback(\n    () => {\n      if (isVerticalMode) {\n        coords.lastY = elementRef.current?.offsetTop as number;\n        coords.lastX = elementRef.current?.offsetLeft as number;\n        position.width = elementRef.current?.offsetHeight as number;\n      } else {\n        coords.lastY = elementRef.current?.offsetTop as number;\n        coords.lastX = elementRef.current?.offsetLeft as number;\n        position.width = elementRef.current?.offsetWidth as number;\n      }\n\n      const options = {\n        id,\n        index,\n        since,\n        till,\n      };\n      if (\n        !isVerticalMode &&\n        isClicked.current &&\n        (initialPosition.left !== coords.lastX ||\n          initialPosition.width !== position.width)\n      ) {\n        mouseUpCb({\n          ...options,\n          top: coords.lastY,\n          left: coords.lastX,\n          width: position.width,\n          initialPositionTop: initialPosition.top,\n          initialPositionLeft: initialPosition.left,\n          initialWidth: initialPosition.width,\n        });\n      }\n      if (\n        isVerticalMode &&\n        isClicked.current &&\n        (initialPosition.top !== coords.lastY ||\n          initialPosition.width !== position.width)\n      ) {\n        mouseUpCb({\n          ...options,\n          top: coords.lastX,\n          left: coords.lastY,\n          width: position.width,\n          initialPositionTop: initialPosition.left,\n          initialPositionLeft: initialPosition.top,\n          initialWidth: initialPosition.height,\n        });\n      }\n      setIsResizing(false);\n      isClicked.current = false;\n      if (isTouchDevice) {\n        setIsPreventScroll(false);\n      }\n      setTimeout(() => (isMouseMove.current = false), 0);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      isTouchDevice,\n      isVerticalMode,\n      id,\n      index,\n      since,\n      till,\n      initialWidth,\n      initialPosition.left,\n      initialPosition.width,\n      mouseUpCb,\n    ]\n  );\n\n  const initialPositionSerialized = JSON.stringify(initialPosition);\n  useEffect(() => {\n    // if (isVerticalMode) {\n    //   setCoords({\n    //     startY: initialPosition.top,\n    //     lastY: initialPosition.top,\n    //     startX: initialPosition.left,\n    //     lastX: initialPosition.left,\n    //   });\n    // }\n    setCoords({\n      startY: initialPosition.top,\n      lastY: initialPosition.top,\n      startX: initialPosition.left,\n      lastX: initialPosition.left,\n    });\n    setPosition({\n      x: initialPosition.left,\n      y: initialPosition.top,\n      width: isVerticalMode ? initialPosition.height : initialPosition.width,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isVerticalMode, initialPositionSerialized]);\n\n  useEffect(() => {\n    function handleMouseMove(e: MouseEvent | TouchEvent) {\n      if (isPreventScroll) {\n        e.preventDefault();\n      }\n      if (!isResizing) return;\n      if (!isClicked.current) return;\n      if (!elementRef.current) return;\n      isMouseMove.current = true;\n\n      const event = (\n        isTouchDevice ? (e as TouchEvent).touches[0] : e\n      ) as MouseEvent;\n\n      const element = elementRef.current;\n      const elementRect = element.getBoundingClientRect();\n\n      if (isVerticalMode) {\n        const offsetHeight = elementRef.current?.offsetHeight as number;\n        const nextY = event.clientY - coords.startY + coords.lastY;\n        const snapYTop = snapX\n          ? Math.round((event.pageY - mouseOffsetX) / snapX) * snapX\n          : event.pageY - mouseOffsetX;\n        const newHeightTop = initialWidth - snapYTop;\n        const newHeightBottom = snapX\n          ? Math.round((event.clientY - elementRect.top + 14) / snapX) * snapX\n          : event.clientY - elementRect.top + 14;\n\n        const isInLeftLayout = nextY >= 0 && nextY <= dayWidth - offsetHeight;\n        // To be used in the future\n        // const isInLeftLayout =\n        //   nextY >= 0 && nextY <= contentHeight - offsetHeight;\n        const isInRightLayout = coords.lastY + newHeightBottom <= dayWidth;\n        if (isResizingLeft && isInLeftLayout && newHeightTop >= 50) {\n          const top = initialPosition.top + snapYTop;\n          element.style.height = `${newHeightTop}px`;\n          element.style.top = `${top}px`;\n          setPosition((prev) => ({ ...prev, y: top, width: newHeightTop }));\n        } else if (\n          isResizingRight &&\n          isInRightLayout &&\n          newHeightBottom >= 50\n        ) {\n          element.style.height = `${newHeightBottom}px`;\n          element.style.top = `${initialPosition.top}px`;\n          setPosition((prev) => ({\n            ...prev,\n            y: initialPosition.top,\n            width: newHeightBottom,\n          }));\n        }\n      } else {\n        const offsetWidth = elementRef.current?.offsetWidth as number;\n        const nextX = event.clientX - coords.startX + coords.lastX;\n        const snapXLeft = snapX\n          ? Math.round((event.pageX - mouseOffsetX) / snapX) * snapX\n          : event.pageX - mouseOffsetX;\n        const newWidthLeft = initialWidth - snapXLeft;\n\n        const newWidthRight = snapX\n          ? Math.round((event.clientX - elementRect.left + 14) / snapX) * snapX\n          : event.clientX - elementRect.left + 14;\n\n        const isInLeftLayout = nextX >= 0 && nextX <= dayWidth - offsetWidth;\n        const isInRightLayout = coords.lastX + newWidthRight <= dayWidth;\n        if (isResizingLeft && isInLeftLayout && newWidthLeft >= 50) {\n          const left = initialPosition.left + snapXLeft;\n\n          element.style.width = `${newWidthLeft}px`;\n          element.style.left = `${left}px`;\n          setPosition((prev) => ({ ...prev, x: left, width: newWidthLeft }));\n        } else if (isResizingRight && isInRightLayout && newWidthRight >= 50) {\n          element.style.width = `${newWidthRight}px`;\n          setPosition((prev) => ({ ...prev, width: newWidthRight }));\n        }\n      }\n    }\n\n    const mouseMoveEvent = isTouchDevice ? \"touchmove\" : \"mousemove\";\n    const mouseUpEvent = isTouchDevice ? \"touchend\" : \"mouseup\";\n    const options = isTouchDevice ? { passive: false } : undefined;\n\n    if (isResize) {\n      document.addEventListener(mouseMoveEvent, handleMouseMove, options);\n      document.addEventListener(mouseUpEvent, handleMouseUp);\n    }\n\n    return () => {\n      document.removeEventListener(mouseMoveEvent, handleMouseMove);\n      document.removeEventListener(mouseUpEvent, handleMouseUp);\n    };\n  }, [\n    isTouchDevice,\n    isPreventScroll,\n    isResize,\n    isVerticalMode,\n    isResizing,\n    isResizingLeft,\n    isResizingRight,\n    dayWidth,\n    contentHeight,\n    initialWidth,\n    initialPosition.top,\n    initialPosition.left,\n    coords,\n    snapX,\n    mouseOffsetX,\n    elementRef,\n    handleMouseUp,\n  ]);\n\n  if (isResize) {\n    const getEvents = (isLeft?: boolean) => {\n      if (isTouchDevice) {\n        return {\n          onTouchStart: handleMouseDown(isLeft),\n          onTouchEnd: handleMouseUp,\n        };\n      }\n      return {\n        onMouseDown: handleMouseDown(isLeft),\n        onMouseUp: handleMouseUp,\n      };\n    };\n\n    return {\n      width: position.width,\n      initialWidth: isVerticalMode\n        ? initialPosition.height\n        : initialPosition.width,\n      currentPositionX: isVerticalMode ? position.y : position.x,\n      resizeEvents: {\n        isResizing,\n        resources: { ref: elementRef, isResizing },\n        eventsLeft: {\n          isResize,\n          isVerticalMode,\n          left: true,\n          onClick: handleMouseClick,\n          ...getEvents(true),\n        },\n        eventsRight: {\n          isResize,\n          isVerticalMode,\n          onClick: handleMouseClick,\n          ...getEvents(),\n        },\n      },\n    };\n  }\n\n  return {\n    currentPositionX: isVerticalMode\n      ? initialPosition.top\n      : initialPosition.left,\n    width: isVerticalMode ? initialPosition.height : initialPosition.width,\n    resizeEvents: {\n      isResizing: false,\n      resources: {},\n      eventsLeft: {},\n      eventsRight: {},\n    },\n  };\n}\n","import React, { useCallback, useRef } from \"react\";\nimport { format } from \"date-fns\";\n\n// Import interfaces\nimport { DragAndDrop, Mode, Program, Snap } from \"../helpers/interfaces\";\n\n// Import types\nimport {\n  ProgramItem,\n  BaseTimeFormat,\n  DragMouseUp,\n  ResizeMouseUp,\n  DateTime,\n} from \"../helpers/types\";\n\n// Import helpers\nimport {\n  TIME_FORMAT,\n  calculateItemDragSinceTill,\n  getLiveStatus,\n  omit,\n} from \"../helpers\";\n\n// Import hooks\nimport { useInterval } from \"./useInterval\";\nimport { useDrag } from \"./useDrag\";\nimport { useResize } from \"./useResize\";\n\ninterface useProgramProps<T> {\n  isVerticalMode?: boolean;\n  isRTL?: boolean;\n  isBaseTimeFormat: BaseTimeFormat;\n  isResize?: boolean;\n  startDate: DateTime;\n  contentHeight: number;\n  dayWidth: number;\n  hourWidth: number;\n  program: T;\n  liveRefreshTime: number;\n  minWidth?: number;\n  itemHeight: number;\n  snap?: Snap;\n  mode: Mode;\n  dnd: DragAndDrop;\n  dragMouseUp: (data: DragMouseUp) => void;\n  resizeMouseUp: (data: ResizeMouseUp) => void;\n}\n\nexport function useProgram<T extends ProgramItem>({\n  isVerticalMode = false,\n  isRTL = false,\n  isResize = false,\n  isBaseTimeFormat,\n  startDate,\n  contentHeight,\n  dayWidth,\n  itemHeight,\n  hourWidth,\n  minWidth = 200,\n  program,\n  liveRefreshTime,\n  mode,\n  snap,\n  dnd,\n  dragMouseUp,\n  resizeMouseUp,\n}: useProgramProps<T>) {\n  const elementRef = useRef<HTMLDivElement>(null);\n\n  const { data, position } = program;\n  const { width, height } = position;\n  const { since, till } = data;\n\n  // Hooks\n  const [isLive, setIsLive] = React.useState<boolean>(() =>\n    getLiveStatus(since, till)\n  );\n\n  const options = {\n    isVerticalMode,\n    initialPosition: position,\n    data,\n    dayWidth,\n    contentHeight,\n    elementRef,\n  };\n\n  const resizeOptions = {\n    ...options,\n    isResize,\n    snapX: snap?.x,\n    mouseUpCb: resizeMouseUp,\n  };\n\n  const {\n    currentPositionX: resizeCurrentPositionX,\n    width: resizeWidth,\n    resizeEvents,\n  } = useResize(resizeOptions);\n\n  const dndMouseUpCb = React.useCallback(\n    (props: DragMouseUp, data: Program) => {\n      const newTime = calculateItemDragSinceTill({\n        ...props,\n        hourWidth,\n        startDate,\n      });\n      const options = {\n        ...newTime,\n        id: props.id,\n        data,\n      };\n\n      return dnd?.onDnDMouseUp?.(options) ?? true;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n  const dragOptions = {\n    ...options,\n    isDndEnabled: dnd.enabled ? !resizeEvents.resources.isResizing : false,\n    isDndMutlirows: dnd.mode === \"multi-rows\",\n    dndSnapX: snap?.x,\n    dndSnapY: snap?.y,\n    itemHeight,\n    dndMouseUpCb,\n    mouseUpCb: dragMouseUp,\n  };\n\n  const { currentPositionX, dndEvents } = useDrag(dragOptions);\n\n  // Variables\n  const newPosition = { ...omit(position, \"egdeEnd\") };\n  const styles = { width, position: newPosition };\n\n  const formatTime = (\n    date: string | number | Date,\n    formatType: string = TIME_FORMAT.HOURS_MIN\n  ) => format(new Date(date), formatType).replace(/\\s/g, \"\");\n\n  const set12HoursTimeFormat = () => {\n    if (mode.type === \"week\" || mode.type === \"month\") {\n      if (isBaseTimeFormat) return TIME_FORMAT.BASE_DAY_MONTH;\n      return TIME_FORMAT.DAY_MONTH;\n    }\n\n    if (isBaseTimeFormat) return TIME_FORMAT.BASE_HOURS_TIME;\n    return TIME_FORMAT.HOURS_MIN;\n  };\n\n  const getRTLSinceTime = (since: string | number | Date) =>\n    isRTL ? till : since;\n\n  const getRTLTillTime = (till: string | number | Date) =>\n    isRTL ? since : till;\n\n  // Effects\n  useInterval(() => {\n    const status = getLiveStatus(since, till);\n    setIsLive(status);\n  }, liveRefreshTime);\n\n  const isMinWidth = isVerticalMode ? height > minWidth : width > minWidth;\n\n  const getMouseEventTempTime = () => {\n    const left = resizeEvents.isResizing\n      ? resizeCurrentPositionX\n      : currentPositionX;\n\n    let options = {\n      id: data.id,\n      index: data.index,\n      since: data.since,\n      till: data.till,\n      top: 0,\n      left,\n      initialPositionTop: position.top,\n      initialPositionLeft: position.left,\n      initialWidth: width,\n      width: resizeWidth,\n      hourWidth,\n    };\n\n    if (isVerticalMode) {\n      options.initialPositionLeft = position.top;\n      options.initialPositionTop = position.left;\n      options.initialWidth = height;\n    }\n\n    const { since, till } = calculateItemDragSinceTill(options);\n    const formatTempTime = (time: string) =>\n      formatTime(getRTLSinceTime(time), set12HoursTimeFormat()).toLowerCase();\n\n    return { since: formatTempTime(since), till: formatTempTime(till) };\n  };\n\n  const getMouseEvents = useCallback(\n    () => ({\n      ...resizeEvents.resources,\n      ...dndEvents,\n    }),\n    [dndEvents, resizeEvents.resources]\n  );\n  const isMouseEvent =\n    dndEvents.isDragging ||\n    (resizeEvents.resources.isResizing as boolean) ||\n    false;\n  return {\n    isMouseEvent,\n    isLive,\n    isMinWidth,\n    isRTL,\n    resizeEvents,\n    formatTime,\n    set12HoursTimeFormat,\n    getMouseEvents,\n    getMouseEventTempTime,\n    getRTLSinceTime,\n    getRTLTillTime,\n    styles,\n  };\n}\n","import { useMemo } from \"react\";\nimport { format } from \"date-fns\";\nimport { toDate } from \"date-fns-tz\";\n\n// Import interfaces\nimport { Timeline as ITimeline } from \"../helpers/interfaces\";\n\n// Import helpers\nimport {\n  TIME_FORMAT,\n  generateArray,\n  generateTimelineSlots,\n  HOURS_IN_DAY,\n  getTimelineMonthsWidth,\n  getFormattedWeekMonthDate,\n  getTodayHoursInDays,\n} from \"../helpers\";\n\ntype UseTimelineProps = ITimeline;\n\nexport function useTimeline(props: UseTimelineProps) {\n  const { isBaseTimeFormat, isRTL, isSidebar, isVerticalMode } = props;\n  const { timezone, dayWidth, hourWidth, sidebarWidth, timelineHeight } = props;\n  const {\n    mode,\n    startDate,\n    endDate,\n    hoursInDays,\n    days,\n    liveRefreshTime,\n    months,\n    numberOfDays,\n    numberOfHoursInDay,\n    numberOfMonths,\n    offsetStartHoursRange,\n    timelineDividers,\n    renderCurrentTime,\n  } = props;\n\n  // Handlers\n  const getTime = (index: number | string) => {\n    if (typeof index === \"string\") return { time: index, isNewDay: true };\n\n    const date = new Date();\n    const baseDate = format(date, TIME_FORMAT.DATE);\n    const time = index < 10 ? `0${index}` : index;\n\n    if (isBaseTimeFormat) {\n      const date = new Date(`${baseDate}T${time}:00:00`);\n      const baseFormat = format(date, TIME_FORMAT.BASE_HOURS_TIME)\n        .toLowerCase()\n        .replace(/\\s/g, \"\");\n\n      return { time: baseFormat, isNewDay: false };\n    }\n\n    return { time: `${time}:00`, isNewDay: false };\n  };\n\n  const formatWeekMonthDate = (date: string) =>\n    getFormattedWeekMonthDate({ date, mode, isBaseTimeFormat });\n\n  const getDayMonthName = (date: string) => {\n    const dateFormat =\n      mode.type === \"week\" ? TIME_FORMAT.DAY : TIME_FORMAT.YEAR;\n    return format(toDate(date), dateFormat);\n  };\n\n  const getCurrentTimeProps = () => ({\n    isBaseTimeFormat,\n    isVerticalMode,\n    isRTL,\n    timezone,\n    mode,\n    startDate,\n    endDate,\n    hoursInDays,\n    dayWidth,\n    timelineHeight,\n    hourWidth,\n    sidebarWidth,\n    liveRefreshTime,\n    renderCurrentTime,\n  });\n\n  const getTimelineProps = () => ({\n    isSidebar,\n    isVerticalMode,\n    dayWidth,\n    sidebarWidth,\n    timelineHeight,\n  });\n\n  // Variables\n  const timeSlots = useMemo(() => {\n    const options = {\n      isBaseTimeFormat,\n      days,\n      hoursInDays,\n      months,\n      numberOfDays,\n      numberOfHoursInDay,\n      numberOfMonths,\n      offsetStartHoursRange,\n    };\n\n    return generateTimelineSlots(mode.type, options);\n  }, [\n    mode.type,\n    isBaseTimeFormat,\n    days,\n    hoursInDays,\n    months,\n    numberOfDays,\n    numberOfHoursInDay,\n    numberOfMonths,\n    offsetStartHoursRange,\n  ]);\n  const isWeekMode = mode.type === \"week\";\n  const isMonthMode = mode.type === \"month\";\n  const isWeekMonthMode = isWeekMode || isMonthMode;\n  const isTodayInHoursInDays = getTodayHoursInDays(hoursInDays);\n  const areHoursInDays = hoursInDays.length > 0;\n\n  const weekDayWidth = hourWidth * HOURS_IN_DAY;\n  const monthsWidth = useMemo(\n    () => getTimelineMonthsWidth({ months, weekDayWidth }),\n    [months, weekDayWidth]\n  );\n  const dividers = generateArray(timelineDividers);\n\n  return {\n    isWeekMonthMode,\n    isMonthMode,\n    isTodayInHoursInDays,\n    areHoursInDays,\n    time: timeSlots,\n    weekDayWidth,\n    monthsWidth,\n    timelineHeight,\n    dividers,\n    timelineDividers,\n    formatWeekMonthDate,\n    getTime,\n    getDayMonthName,\n    getTimelineProps,\n    getCurrentTimeProps,\n  };\n}\n","import React from \"react\";\nimport { startOfDay } from \"date-fns\";\n\n// Import interfaces\nimport { HoursInDayDiffTime, Timezone } from \"../helpers/interfaces\";\n\n// Import types\nimport { DateTime } from \"../helpers/types\";\n\n// Import helpers\nimport {\n  SECONDS_IN_MINUTE,\n  HOUR_IN_MINUTES,\n  getPositionX,\n  getTodayHoursInDays,\n  getHoursInDaysPositionX,\n} from \"../helpers\";\n\n// Import hooks\nimport { useInterval } from \".\";\nimport { getNewDateTz } from \"../utils/time\";\n\ninterface useLineProps {\n  timezone: Timezone;\n  startDate: DateTime;\n  endDate: DateTime;\n  dayWidth: number;\n  hourWidth: number;\n  sidebarWidth: number;\n  hoursInDays: HoursInDayDiffTime[];\n  liveRefreshTime: number;\n}\n\nexport function useLine({\n  timezone,\n  startDate,\n  endDate,\n  hoursInDays,\n  dayWidth,\n  hourWidth,\n  sidebarWidth,\n  liveRefreshTime,\n}: useLineProps) {\n  const [showLine, setShowLine] = React.useState<boolean>(true);\n  const [positionX, setPositionX] = React.useState<number>(getInitialState);\n\n  // Variables\n  const timezoneSerialized = JSON.stringify(timezone);\n  const hoursInDaysSerialized = JSON.stringify(hoursInDays);\n  const liveIntervalTime = liveRefreshTime * 1000;\n  const isDayEnd = positionX <= dayWidth;\n  const isScrollX = React.useMemo(\n    () => (isDayEnd ? liveIntervalTime : null),\n    [isDayEnd, liveIntervalTime]\n  );\n\n  // Helpers\n  function getInitialState() {\n    if (hoursInDays.length > 0)\n      return getHoursInDaysPositionX({\n        hoursInDays,\n        hourWidth,\n        sidebarWidth,\n        cb: setShowLine,\n      });\n\n    const positionX = getPositionX(\n      startOfDay(new Date(startDate)),\n      new Date(),\n      startDate,\n      endDate,\n      hourWidth\n    );\n    return positionX + sidebarWidth;\n  }\n\n  // Effects\n  useInterval(() => {\n    const offset = hourWidth / HOUR_IN_MINUTES;\n    const step = offset / SECONDS_IN_MINUTE;\n    const positionOffset = step * liveRefreshTime;\n\n    if (hoursInDays.length > 0) {\n      const idCurrentDay = getTodayHoursInDays(hoursInDays);\n\n      if (idCurrentDay) {\n        setShowLine(true);\n\n        setPositionX((prev) => prev + positionOffset);\n      } else {\n        setShowLine(false);\n      }\n    } else {\n      setPositionX((prev) => prev + positionOffset);\n    }\n  }, isScrollX);\n\n  React.useEffect(() => {\n    if (hoursInDays.length > 0) {\n      const newPositionX = getHoursInDaysPositionX({\n        hoursInDays,\n        hourWidth,\n        sidebarWidth,\n        cb: setShowLine,\n      });\n      setPositionX(newPositionX);\n    } else {\n      const date = new Date(startDate);\n      const positionX = getPositionX(\n        startOfDay(date),\n        getNewDateTz(),\n        startDate,\n        endDate,\n        hourWidth\n      );\n      const newPositionX = positionX + sidebarWidth;\n      setPositionX(newPositionX);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    startDate,\n    endDate,\n    sidebarWidth,\n    hourWidth,\n    hoursInDaysSerialized,\n    timezoneSerialized,\n  ]);\n\n  return { showLine, positionX };\n}\n","import React from \"react\";\nimport { format } from \"date-fns\";\n// Import types\nimport { BaseTimeFormat } from \"../helpers/types\";\n// Import helpers\nimport { Mode, TIME_FORMAT } from \"../helpers\";\n// Import utils\nimport { getNewDateTz } from \"../utils/time\";\n// Import styles\nimport { boxStyles } from \"../styles/CurrentTime.styles\";\n\ninterface useCurrentTimeProps {\n  isVerticalMode?: boolean;\n  isBaseTimeFormat?: BaseTimeFormat;\n  mode: Mode;\n  positionX: number;\n  timelineHeight: number;\n  sidebarWidth: number;\n}\n\nexport function useCurrentTime({\n  isVerticalMode,\n  isBaseTimeFormat,\n  mode,\n  positionX,\n  timelineHeight,\n  sidebarWidth,\n}: useCurrentTimeProps) {\n  const formatTime = () => {\n    const date = getNewDateTz();\n\n    if (mode.type === \"month\") {\n      if (isBaseTimeFormat) return format(date, TIME_FORMAT.BASE_DAY_MONTH);\n      return format(date, TIME_FORMAT.DAY_MONTH);\n    }\n\n    const baseTime = format(date, TIME_FORMAT.HOURS_MIN);\n\n    if (isBaseTimeFormat) {\n      const baseFormat = format(date, TIME_FORMAT.BASE_HOURS_TIME)\n        .toLowerCase()\n        .replace(/\\s/g, \"\");\n\n      return baseFormat;\n    }\n\n    return baseTime;\n  };\n\n  const handleGetCurrentTimeStyles = () => {\n    const {\n      position,\n      top,\n      height,\n      width: styleWidth,\n    } = boxStyles({ width: timelineHeight });\n    const width = isVerticalMode ? styleWidth : \"auto\";\n    const commonStyles = {\n      position: position,\n      width,\n      height: height,\n    };\n\n    if (isVerticalMode) {\n      return {\n        position: {\n          top: positionX - sidebarWidth,\n          left: top,\n          ...commonStyles,\n        },\n      };\n    }\n\n    return {\n      position: {\n        top: top,\n        left: positionX - sidebarWidth,\n        ...commonStyles,\n      },\n    };\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const time = React.useMemo(() => formatTime(), [positionX, isBaseTimeFormat]);\n\n  return { time, getCurrentTimeStyles: handleGetCurrentTimeStyles };\n}\n","import { useCallback } from \"react\";\n// Import interfaces\nimport { Mode, Grid as IGrid, HoursInDayDiffTime } from \"../helpers/interfaces\";\n// Import types\nimport {\n  BaseTimeFormat,\n  ChannelWithPosition,\n  Position,\n} from \"../helpers/types\";\n// Import helpers\nimport { getClickGridItemData } from \"../helpers\";\n\ninterface UseGridProps {\n  isVerticalMode: boolean;\n  isBaseTimeFormat: BaseTimeFormat;\n  hourWidth: number;\n  dayWidth: number;\n  days: string[];\n  hoursInDays: HoursInDayDiffTime[];\n  months: string[];\n  numberOfDays: number;\n  numberOfHoursInDay: number;\n  numberOfMonths: number;\n  offsetStartHoursRange: number;\n  grid: IGrid;\n  mode: Mode;\n  sidebarWidth: number;\n  timelineHeight: number;\n  timelineDividers: number;\n}\n\nexport function useGrid({\n  mode,\n  grid,\n  timelineHeight,\n  sidebarWidth,\n  hourWidth,\n  dayWidth,\n  ...rest\n}: UseGridProps) {\n  const {\n    isVerticalMode,\n    isBaseTimeFormat,\n    days,\n    hoursInDays,\n    months,\n    numberOfDays,\n    numberOfHoursInDay,\n    numberOfMonths,\n    offsetStartHoursRange,\n    timelineDividers,\n  } = rest;\n\n  const handleItemClick = useCallback(\n    (\n        item: { position: Position; channel: ChannelWithPosition },\n        index?: number\n      ) =>\n      () => {\n        getClickGridItemData({\n          isVerticalMode,\n          index,\n          item,\n          grid,\n          mode,\n          dayWidth,\n          hourWidth,\n          timelineHeight,\n          sidebarWidth,\n          isBaseTimeFormat,\n          days,\n          hoursInDays,\n          months,\n          numberOfDays,\n          numberOfHoursInDay,\n          numberOfMonths,\n          offsetStartHoursRange,\n          timelineDividers,\n        });\n      },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      isVerticalMode,\n      hourWidth,\n      dayWidth,\n      sidebarWidth,\n      isBaseTimeFormat,\n      days,\n      hoursInDays,\n      months,\n      numberOfDays,\n      numberOfHoursInDay,\n      numberOfMonths,\n      offsetStartHoursRange,\n      mode.type,\n    ]\n  );\n  const handleItemDrop = useCallback(\n    (\n        item: { position: Position; channel: ChannelWithPosition },\n        index?: number,\n        dataAttributes?: Record<string, string>\n      ) =>\n      () => {\n        getClickGridItemData({\n          isDrop: true,\n          isVerticalMode,\n          index,\n          item,\n          grid,\n          mode,\n          dayWidth,\n          hourWidth,\n          timelineHeight,\n          sidebarWidth,\n          isBaseTimeFormat,\n          days,\n          hoursInDays,\n          months,\n          numberOfDays,\n          numberOfHoursInDay,\n          numberOfMonths,\n          offsetStartHoursRange,\n          timelineDividers,\n          dataAttributes,\n        });\n      },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      isVerticalMode,\n      hourWidth,\n      dayWidth,\n      sidebarWidth,\n      isBaseTimeFormat,\n      days,\n      hoursInDays,\n      months,\n      numberOfDays,\n      numberOfHoursInDay,\n      numberOfMonths,\n      offsetStartHoursRange,\n      mode.type,\n    ]\n  );\n  return {\n    onItemClick: handleItemClick,\n    onItemDrop: handleItemDrop,\n  };\n}\n","import React, { useCallback } from \"react\";\n// Types\nimport { ChannelWithPosition, GridEvent, Position } from \"../helpers/types\";\n\ninterface useGridCellItemProps {\n  onItemDrop?: GridEvent;\n}\n\nexport function useGridExternalDnD({ onItemDrop }: useGridCellItemProps = {}) {\n  const dropAreaRef = React.useRef(null);\n  const [isDragOver, setIsDragOver] = React.useState(false);\n  const handleDrop = useCallback(\n    (\n        item: {\n          position: Position;\n          channel: ChannelWithPosition;\n        },\n        index: number\n      ) =>\n      (e: React.DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n        if (dropAreaRef.current) {\n          setIsDragOver(false);\n\n          const droppedItemId = e.dataTransfer.getData(\"text/plain\");\n          const droppedItem = document.getElementById(droppedItemId);\n\n          if (droppedItem) {\n            // Loop through all attributes\n            const attributes = droppedItem.attributes;\n            const dataAttributes = {} as Record<string, string>;\n\n            for (let i = 0; i < attributes.length; i++) {\n              const attribute = attributes[i];\n              if (attribute.name.startsWith(\"data-\")) {\n                dataAttributes[attribute.name.replace(\"data-\", \"\")] =\n                  attribute.value;\n              }\n            }\n\n            // Call the onDrop callback with the dropped item, attributes, and position\n            onItemDrop?.(item, index, dataAttributes)();\n          }\n        }\n      },\n\n    [onItemDrop]\n  );\n\n  const handleDragEnter = useCallback((e: React.DragEvent<HTMLDivElement>) => {\n    if (e) {\n      e.preventDefault();\n      if (dropAreaRef.current) {\n        setIsDragOver(true);\n      }\n    }\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    if (dropAreaRef.current) {\n      setIsDragOver(false);\n    }\n  }, []);\n\n  return {\n    isDragOver,\n    dropAreaRef,\n    onDrop: handleDrop,\n    onDragEnter: handleDragEnter,\n    onDragLeave: handleDragLeave,\n  };\n}\n","import React from \"react\";\n\n// Import interfaces\nimport { GridDividerItemProps } from \"../helpers/interfaces\";\n// Import hooks\nimport { useGridExternalDnD } from \"../hooks/useGridExternalDnD\";\n// Import styles\nimport { GridStyled } from \"../styles\";\n\nconst { GridDivider } = GridStyled;\n\nexport function GridDividerItem({\n  index,\n  item,\n  dividerProps,\n}: GridDividerItemProps) {\n  const { styles, props } = dividerProps;\n  const { onItemClick, onItemDrop, ...restProps } = props;\n  const { isDragOver, onDrop, onDragEnter, onDragLeave, dropAreaRef } =\n    useGridExternalDnD({\n      onItemDrop,\n    });\n  return (\n    <GridDivider\n      className=\"planby-grid-item-divider\"\n      ref={dropAreaRef}\n      key={index}\n      {...styles}\n      left={styles.left(index)}\n      {...restProps}\n      onClick={onItemClick(item, index)}\n      // Drag\n      isDragOver={isDragOver}\n      onDragEnter={onDragEnter}\n      onDragLeave={onDragLeave}\n      onDrop={onDrop(item, index)}\n    />\n  );\n}\n","import * as React from \"react\";\n// Import interfaces\nimport { GridCell } from \"../helpers/interfaces\";\n// Import types\nimport { ChannelWithPosition, GridEvent, Position } from \"../helpers/types\";\n// Import helpers\nimport { generateArray } from \"../helpers\";\n// Import styles\nimport { GridStyled } from \"../styles\";\nimport { GridDividerItem } from \"./GridDividerItem\";\nimport { useGridExternalDnD } from \"../hooks/useGridExternalDnD\";\n\nconst { GridItem } = GridStyled;\n\ninterface GridCellItemProps {\n  isVerticalMode: boolean;\n  isHoverHighlight: boolean | undefined;\n  isProgramVisible: (position: Position, overlapsCount: number) => boolean;\n  isItemClickable: boolean;\n  isDayMode: boolean;\n  item: { position: Position; channel: ChannelWithPosition };\n  index: number;\n  channelOverlapsCount: Record<string, number>;\n  hourWidth: number;\n  timelineDividers: number;\n  renderGridCell?: (props: GridCell) => React.ReactNode;\n  onItemClick: GridEvent;\n  onItemDrop: GridEvent;\n}\n\nexport function GridCellItem({\n  isVerticalMode,\n  isProgramVisible,\n  isHoverHighlight,\n  isDayMode,\n  isItemClickable,\n  item,\n  index,\n  channelOverlapsCount,\n  hourWidth,\n  timelineDividers,\n  renderGridCell,\n  onItemClick,\n  onItemDrop,\n}: GridCellItemProps) {\n  const overlapsCount = channelOverlapsCount[item.channel.uuid] ?? 1;\n  const isVisible = isProgramVisible(item.position, overlapsCount);\n\n  const { isDragOver, dropAreaRef, onDrop, onDragEnter, onDragLeave } =\n    useGridExternalDnD({\n      onItemDrop,\n    });\n\n  if (!isVisible) return null;\n\n  const gridItemClickProps = isDayMode\n    ? { isItemClickable: false }\n    : { onClick: onItemClick(item), isItemClickable };\n\n  const dividerProps = {\n    styles: {\n      left: (index: number) => index * (hourWidth / timelineDividers),\n      width: hourWidth / timelineDividers,\n    },\n    props: {\n      isVerticalMode,\n      isHoverHighlight: isHoverHighlight as boolean,\n      isItemClickable,\n      onItemClick,\n      onItemDrop,\n    },\n  };\n\n  const gridItemDnDProps = isDayMode\n    ? {}\n    : {\n        isDragOver: isDragOver,\n        onDragEnter,\n        onDragLeave,\n        onDrop: onDrop(item, index),\n      };\n\n  if (renderGridCell) {\n    const id = item.channel.uuid + index;\n    return renderGridCell({\n      isDayMode,\n      id,\n      index,\n      item,\n      isHoverHighlight: isHoverHighlight as boolean,\n      timelineDividers,\n      gridDividerProps: dividerProps,\n      timelineDividerArray: generateArray(timelineDividers),\n      gridItemClickProps,\n      gridItemDnDProps,\n    });\n  }\n\n  return (\n    <GridItem\n      ref={dropAreaRef}\n      key={item.channel.uuid + index}\n      className=\"planby-grid-item\"\n      isDayMode={isDayMode}\n      isHoverHighlight={isHoverHighlight as boolean}\n      {...item.position}\n      {...gridItemClickProps}\n      {...gridItemDnDProps}\n    >\n      {isDayMode &&\n        generateArray(timelineDividers).map((_, index) => (\n          <GridDividerItem\n            key={index}\n            index={index}\n            item={item}\n            dividerProps={dividerProps}\n          />\n        ))}\n    </GridItem>\n  );\n}\n","import * as React from \"react\";\n// Import interfaces\nimport {\n  Mode,\n  Grid as IGrid,\n  HoursInDayDiffTime,\n  GridCell,\n} from \"../helpers/interfaces\";\n// Import types\nimport {\n  BaseTimeFormat,\n  ChannelWithPosition,\n  Position,\n} from \"../helpers/types\";\n// Import hooks\nimport { useGrid } from \"../hooks\";\nimport { GridCellItem } from \"./GridCellItem\";\n// Import styles\nimport { GridStyled } from \"../styles\";\n\nconst { GridContainer } = GridStyled;\n\ninterface GridProps {\n  isVerticalMode: boolean;\n  isProgramVisible: (position: Position, overlapsCount: number) => boolean;\n  isBaseTimeFormat: BaseTimeFormat;\n  channelOverlapsCount: Record<string, number>;\n  hourWidth: number;\n  dayWidth: number;\n  days: string[];\n  hoursInDays: HoursInDayDiffTime[];\n  months: string[];\n  numberOfDays: number;\n  numberOfHoursInDay: number;\n  numberOfMonths: number;\n  offsetStartHoursRange: number;\n  gridItems: { position: Position; channel: ChannelWithPosition }[];\n  grid: IGrid;\n  mode: Mode;\n  sidebarWidth: number;\n  timelineHeight: number;\n  timelineDividers: number;\n  renderGridCell?: (props: GridCell) => React.ReactNode;\n}\n\nexport function Grid({\n  isVerticalMode,\n  isProgramVisible,\n  channelOverlapsCount,\n  grid,\n  gridItems,\n  mode,\n  hourWidth,\n  timelineDividers,\n  renderGridCell,\n  ...rest\n}: GridProps) {\n  const { onItemClick, onItemDrop } = useGrid({\n    isVerticalMode,\n    grid,\n    mode,\n    hourWidth,\n    timelineDividers,\n    ...rest,\n  });\n\n  const isDayMode = mode.type === \"day\";\n  const isHoverHighlight = grid.hoverHighlight;\n  const isItemClickable = !!grid.onGridItemClick;\n\n  const renderGridItem = (\n    item: { position: Position; channel: ChannelWithPosition },\n    index: number\n  ) => {\n    const props = {\n      isVerticalMode,\n      isProgramVisible,\n      isHoverHighlight,\n      isDayMode,\n      isItemClickable,\n      item,\n      index,\n      channelOverlapsCount,\n      hourWidth,\n      timelineDividers,\n      renderGridCell,\n      onItemClick,\n      onItemDrop,\n    };\n\n    // @ts-ignore\n    return <GridCellItem key={item.channel.uuid + index} {...props} />;\n  };\n\n  return (\n    <GridContainer className=\"planby-grid\">\n      {gridItems.map((item, index) => renderGridItem(item, index))}\n    </GridContainer>\n  );\n}\n","import React from \"react\";\n\n// Import interfaces\nimport {\n  Area,\n  Grid as IGrid,\n  HoursInDayDiffTime,\n  Line as ILine,\n  Mode,\n  Overlap,\n  ProgramOverlaps,\n  DragAndDrop,\n  Timezone,\n  Snap,\n  GridCell,\n} from \"../helpers/interfaces\";\n\n// Import types\nimport {\n  Timeline as ITimeline,\n  CurrentTimeIndicator,\n} from \"../helpers/interfaces\";\nimport {\n  ProgramItem,\n  ProgramWithPosition,\n  ChannelWithPosition,\n  DateTime,\n  Position,\n  BaseTimeFormat,\n  DragMouseUp,\n} from \"../helpers/types\";\n\n// Import helpers\nimport {\n  deleteLayoutScreenCloneElement,\n  getChannelsContentHeight,\n  getProgramOptions,\n  isFutureTime,\n  setLayoutScreenCloneElement,\n} from \"../helpers\";\n\n// Import styles\nimport { EpgStyled } from \"../styles\";\n\n// Import components\nimport { Areas, Channels, Line, Program, Timeline } from \"../components\";\nimport { LayoutBg } from \"../styles/Epg.styles\";\nimport { Grid } from \"./Grid\";\n\ninterface LayoutProps {\n  isToday: boolean;\n  isVerticalMode?: boolean;\n  isRTL?: boolean;\n  isBaseTimeFormat?: BaseTimeFormat;\n  isSidebar?: boolean;\n  isTimeline?: boolean;\n  isLine?: boolean;\n  isCurrentTime?: boolean;\n  isResize?: boolean;\n  programs: ProgramItem[];\n  programOverlaps: ProgramOverlaps;\n  layerOverlapLevel: number;\n  channels: ChannelWithPosition[];\n  channelOverlapsCount: Record<string, number>;\n  startDate: DateTime;\n  endDate: DateTime;\n  hoursInDays: HoursInDayDiffTime[];\n  scrollY: number;\n  dayWidth: number;\n  hourWidth: number;\n  days: string[];\n  months: string[];\n  currentDate: string;\n  numberOfDays: number;\n  numberOfHoursInDay: number;\n  numberOfMonths: number;\n  monthWidth: number;\n  offsetStartHoursRange: number;\n  sidebarWidth: number;\n  timelineHeight: number;\n  itemHeight: number;\n  liveRefreshTime: number;\n  snap?: Snap;\n  mode: Mode;\n  dnd: DragAndDrop;\n  overlapMode: Overlap[\"mode\"];\n  timelineDividers: number;\n  timezone: Timezone;\n  areas: Area[];\n  gridItems: { position: Position; channel: ChannelWithPosition }[];\n  grid: IGrid;\n  overlap: Overlap;\n  isProgramVisible: (position: Position, overlapsCount: number) => boolean;\n  isChannelVisible: (position: Pick<Position, \"top\" | \"height\">) => boolean;\n  isTimelineVisible: (position: Pick<Position, \"left\" | \"width\">) => boolean;\n  dragMouseUp: (position: DragMouseUp) => void;\n  resizeMouseUp: (data: any) => void;\n  openChannelGroupTree: (data: ChannelWithPosition) => void;\n  onScroll: (\n    e: React.UIEvent<HTMLDivElement, UIEvent> & { target: Element }\n  ) => void;\n  onLayoutBgClick?: () => void;\n  renderProgram?: (v: {\n    program: ProgramItem;\n    isRTL: boolean;\n    isVerticalMode: boolean;\n    isBaseTimeFormat: BaseTimeFormat;\n    startDate: DateTime;\n    liveRefreshTime: number;\n    dayWidth: number;\n    hourWidth: number;\n    itemHeight: number;\n    contentHeight: number;\n    snap?: Snap;\n    mode: Mode;\n    dnd: DragAndDrop;\n    dragMouseUp: (data: DragMouseUp) => void;\n    resizeMouseUp: (data: any) => void;\n  }) => React.ReactNode;\n  renderChannel?: (v: { channel: ChannelWithPosition }) => React.ReactNode;\n  renderTimeline?: (v: ITimeline) => React.ReactNode;\n  renderLine?: (v: ILine) => React.ReactNode;\n  renderCurrentTime?: (v: CurrentTimeIndicator) => React.ReactElement;\n  renderGridCell?: (v: GridCell) => React.ReactElement;\n}\n\nconst { ScrollBox, Content } = EpgStyled;\n\nexport const Layout = React.forwardRef<HTMLDivElement, LayoutProps>(\n  (props, scrollBoxRef) => {\n    const { startDate, endDate, hoursInDays, liveRefreshTime, scrollY } = props;\n\n    const {\n      channels,\n      channelOverlapsCount,\n      programs,\n      programOverlaps,\n      layerOverlapLevel,\n    } = props;\n\n    const {\n      timezone,\n      areas,\n      grid,\n      gridItems,\n      mode,\n      dnd,\n      snap,\n      overlap,\n      overlapMode,\n      timelineDividers,\n    } = props;\n\n    const {\n      dayWidth,\n      hourWidth,\n      monthWidth,\n      sidebarWidth,\n      timelineHeight,\n      itemHeight,\n    } = props;\n\n    const {\n      days,\n      months,\n      numberOfHoursInDay,\n      numberOfDays,\n      numberOfMonths,\n      offsetStartHoursRange,\n    } = props;\n\n    const {\n      isVerticalMode = false,\n      isRTL = false,\n      isSidebar = true,\n      isTimeline = true,\n      isLine = true,\n      isToday,\n      isBaseTimeFormat = false,\n      isCurrentTime = false,\n      isResize = false,\n    } = props;\n\n    const {\n      dragMouseUp,\n      resizeMouseUp,\n      openChannelGroupTree,\n      onLayoutBgClick,\n      onScroll,\n      isProgramVisible,\n      isChannelVisible,\n      isTimelineVisible,\n      renderProgram,\n      renderChannel,\n      renderTimeline,\n      renderLine,\n      renderCurrentTime,\n      renderGridCell,\n    } = props;\n\n    // Calculate the height of the content\n    const channelsLength = channels.length;\n    const programsOverlapsLength = Object.keys(programOverlaps).length;\n    const programOverlapsSerialized = JSON.stringify(programOverlaps);\n    const contentHeight = React.useMemo(\n      () => {\n        if (programsOverlapsLength > 0) {\n          return getChannelsContentHeight(channels);\n        }\n        return channelsLength * itemHeight;\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [\n        channelsLength,\n        programsOverlapsLength,\n        itemHeight,\n        programOverlapsSerialized,\n      ]\n    );\n\n    const showAreas = areas.length > 0;\n    const isFuture = isFutureTime(endDate);\n\n    const renderPrograms = (program: ProgramWithPosition, index: number) => {\n      const { position, data } = program;\n      const overlapsCount = channelOverlapsCount[program.data.channelUuid] ?? 1;\n      const isVisible =\n        data.fixedVisibility ?? isProgramVisible(position, overlapsCount);\n\n      if (isVisible) {\n        setLayoutScreenCloneElement(program, index);\n        const options = getProgramOptions({\n          isVerticalMode,\n          program,\n          programOverlaps,\n          layerOverlapLevel,\n          overlapMode,\n          overlap,\n        });\n        const props = {\n          isRTL,\n          isResize,\n          isVerticalMode,\n          isBaseTimeFormat,\n          startDate,\n          program: options,\n          liveRefreshTime,\n          snap,\n          mode,\n          dnd,\n          dayWidth,\n          contentHeight,\n          itemHeight,\n          hourWidth,\n          dragMouseUp,\n          resizeMouseUp,\n        };\n        if (renderProgram) return renderProgram(props);\n\n        return (\n          <Program\n            key={`${program.data.channelUuid}-${program.data.id}`}\n            {...props}\n          />\n        );\n      }\n      deleteLayoutScreenCloneElement(program);\n      return null;\n    };\n\n    const renderTopbar = () => {\n      const timeProps = {\n        isVerticalMode,\n        isSidebar,\n        isRTL,\n        isTimelineVisible,\n        isToday,\n        isBaseTimeFormat,\n        isCurrentTime,\n        timezone,\n        startDate,\n        endDate,\n        dayWidth,\n        sidebarWidth,\n        timelineHeight,\n        offsetStartHoursRange,\n        monthWidth,\n        numberOfHoursInDay,\n        numberOfMonths,\n        numberOfDays,\n        hourWidth,\n        days,\n        months,\n        hoursInDays,\n        liveRefreshTime,\n        mode,\n        timelineDividers,\n        renderCurrentTime,\n      };\n      if (renderTimeline) {\n        return renderTimeline(timeProps);\n      }\n      return <Timeline {...timeProps} />;\n    };\n\n    return (\n      <ScrollBox\n        ref={scrollBoxRef}\n        id=\"planby-layout-scrollbox\"\n        className=\"planby-layout\"\n        isRTL={isRTL}\n        onScroll={onScroll}\n      >\n        {grid.enabled && (\n          <Grid\n            isVerticalMode={isVerticalMode}\n            isProgramVisible={isProgramVisible}\n            channelOverlapsCount={channelOverlapsCount}\n            isBaseTimeFormat={isBaseTimeFormat}\n            hourWidth={hourWidth}\n            dayWidth={dayWidth}\n            days={days}\n            hoursInDays={hoursInDays}\n            months={months}\n            numberOfDays={numberOfDays}\n            numberOfHoursInDay={numberOfHoursInDay}\n            numberOfMonths={numberOfMonths}\n            offsetStartHoursRange={offsetStartHoursRange}\n            grid={grid}\n            gridItems={gridItems}\n            mode={mode}\n            sidebarWidth={sidebarWidth}\n            timelineHeight={timelineHeight}\n            timelineDividers={timelineDividers}\n            renderGridCell={renderGridCell}\n          />\n        )}\n        {onLayoutBgClick && (\n          <LayoutBg\n            className=\"planby-layout-bg\"\n            isSidebar={isSidebar}\n            isVerticalMode={isVerticalMode}\n            isTimeline={isTimeline}\n            dayWidth={dayWidth}\n            contentHeight={contentHeight}\n            sidebarWidth={sidebarWidth}\n            timelineHeight={timelineHeight}\n            onClick={onLayoutBgClick}\n          />\n        )}\n        {isLine && isToday && isFuture && (\n          <Line\n            isVerticalMode={isVerticalMode}\n            isTimeline={isTimeline}\n            dayWidth={dayWidth}\n            hourWidth={hourWidth}\n            sidebarWidth={sidebarWidth}\n            startDate={startDate}\n            endDate={endDate}\n            height={contentHeight}\n            liveRefreshTime={liveRefreshTime}\n            hoursInDays={hoursInDays}\n            timezone={timezone}\n            renderLine={renderLine}\n          />\n        )}\n\n        {showAreas && (\n          <Areas\n            isVerticalMode={isVerticalMode}\n            sidebarWidth={sidebarWidth}\n            hourWidth={hourWidth}\n            areas={areas}\n            startDate={startDate}\n            endDate={endDate}\n            height={contentHeight}\n            timelineHeight={timelineHeight}\n          />\n        )}\n        {isTimeline && renderTopbar()}\n        {isSidebar && (\n          <Channels\n            isVerticalMode={isVerticalMode}\n            isRTL={isRTL}\n            isTimeline={isTimeline}\n            isChannelVisible={isChannelVisible}\n            timelineHeight={timelineHeight}\n            sidebarWidth={sidebarWidth}\n            contentHeight={contentHeight}\n            channels={channels as ChannelWithPosition[]}\n            scrollY={scrollY}\n            openChannelGroupTree={openChannelGroupTree}\n            renderChannel={renderChannel}\n          />\n        )}\n\n        <Content\n          className=\"planby-content\"\n          data-testid=\"content\"\n          isVerticalMode={isVerticalMode}\n          isSidebar={isSidebar}\n          isTimeline={isTimeline}\n          dayWidth={dayWidth}\n          sidebarWidth={sidebarWidth}\n          timelineHeight={timelineHeight}\n          contentHeight={contentHeight}\n        >\n          {programs.map((program, index) =>\n            renderPrograms(program as ProgramWithPosition, index)\n          )}\n        </Content>\n      </ScrollBox>\n    );\n  }\n);\n","import * as React from \"react\";\n\n// Import interfaces\nimport {\n  DragAndDrop,\n  Mode,\n  Program as ProgramType,\n  Snap,\n} from \"../helpers/interfaces\";\n\n// Import types\nimport {\n  BaseTimeFormat,\n  DateTime,\n  DragMouseUp,\n  ResizeMouseUp,\n} from \"../helpers/types\";\nimport { ProgramItem } from \"../helpers/types\";\n\n// Import styles\nimport { ProgramStyled } from \"../styles\";\n\n// Import hooks\nimport { useProgram } from \"../hooks\";\n\ninterface ProgramProps<T> {\n  isVerticalMode?: boolean;\n  isRTL?: boolean;\n  isResize?: boolean;\n  isBaseTimeFormat: BaseTimeFormat;\n  startDate: DateTime;\n  program: T;\n  liveRefreshTime: number;\n  snap?: Snap;\n  mode: Mode;\n  dnd: DragAndDrop;\n  contentHeight: number;\n  dayWidth: number;\n  hourWidth: number;\n  itemHeight: number;\n  dragMouseUp: (data: DragMouseUp) => void;\n  resizeMouseUp: (data: ResizeMouseUp) => void;\n  onClick?: (v: ProgramType) => void;\n}\n\nconst {\n  ProgramBox,\n  ProgramContent,\n  ProgramResizeHandle,\n  ProgramFlex,\n  ProgramStack,\n  ProgramTitle,\n  ProgramText,\n  ProgramImage,\n} = ProgramStyled;\n\nexport function Program<T extends ProgramItem>({\n  isVerticalMode,\n  program,\n  onClick,\n  ...rest\n}: ProgramProps<T>) {\n  const {\n    isRTL,\n    isLive,\n    isMinWidth,\n    isMouseEvent,\n    styles,\n    resizeEvents,\n    formatTime,\n    getMouseEvents,\n    getMouseEventTempTime,\n    set12HoursTimeFormat,\n    getRTLSinceTime,\n    getRTLTillTime,\n  } = useProgram({\n    isVerticalMode,\n    program,\n    ...rest,\n  });\n\n  const { data } = program;\n  const { image, title, since, till } = data;\n\n  const handleOnContentClick = () => onClick?.(data);\n\n  const sinceTime = formatTime(\n    getRTLSinceTime(since),\n    set12HoursTimeFormat()\n  ).toLowerCase();\n\n  const tillTime = formatTime(\n    getRTLTillTime(till),\n    set12HoursTimeFormat()\n  ).toLowerCase();\n\n  const tempTime = getMouseEventTempTime();\n\n  return (\n    <ProgramBox\n      id={data.id}\n      className=\"planby-program\"\n      data-testid=\"program-item\"\n      width={styles.width}\n      style={styles.position}\n      {...getMouseEvents()}\n    >\n      <ProgramContent\n        className=\"planby-program-content\"\n        data-testid=\"program-content\"\n        width={styles.width}\n        isLive={isLive}\n        isVerticalMode={isVerticalMode}\n        onClick={handleOnContentClick}\n        {...rest}\n      >\n        <ProgramResizeHandle {...resizeEvents.eventsLeft} />\n        <ProgramResizeHandle {...resizeEvents.eventsRight} />\n        <ProgramFlex\n          className=\"planby-program-flex\"\n          isVerticalMode={isVerticalMode}\n        >\n          {isLive && isMinWidth && (\n            <ProgramImage\n              isVerticalMode={isVerticalMode}\n              src={image}\n              alt=\"Preview\"\n            />\n          )}\n          <ProgramStack className=\"planby-program-stack\" isRTL={isRTL}>\n            <ProgramTitle className=\"planby-program-title\">\n              {title}\n            </ProgramTitle>\n            <ProgramText\n              className=\"planby-program-text\"\n              aria-label=\"program time\"\n            >\n              {isMouseEvent ? (\n                <>\n                  {tempTime.since} - {tempTime.till}\n                </>\n              ) : (\n                <>\n                  {sinceTime} - {tillTime}\n                </>\n              )}\n            </ProgramText>\n          </ProgramStack>\n        </ProgramFlex>\n      </ProgramContent>\n    </ProgramBox>\n  );\n}\n","import * as React from \"react\";\n// Import interfaces\nimport { ChannelItem, ChannelWithPosition } from \"../helpers/types\";\n\n// Import helpers\nimport {\n  getChannelGroupTreeProps,\n  getChannelVerticalPosition,\n} from \"../helpers\";\n\n// Import styles\nimport { ChannelsStyled } from \"../styles\";\n\n// Import Components\nimport { Channel } from \"../components\";\n\ninterface ChannelsProps {\n  isVerticalMode: boolean;\n  isTimeline: boolean;\n  isRTL: boolean;\n  isChannelVisible: (position: any) => boolean;\n  channels: ChannelWithPosition[];\n  contentHeight: number;\n  sidebarWidth: number;\n  timelineHeight: number;\n  scrollY: number;\n  openChannelGroupTree: (data: ChannelWithPosition) => void;\n  renderChannel?: (v: ChannelItem) => React.ReactNode;\n}\n\nconst { Box } = ChannelsStyled;\n\nexport function Channels(props: ChannelsProps) {\n  const {\n    channels,\n    scrollY,\n    sidebarWidth,\n    timelineHeight,\n    contentHeight,\n    openChannelGroupTree,\n    renderChannel,\n  } = props;\n  const { isVerticalMode, isRTL, isTimeline, isChannelVisible } = props;\n\n  const renderChannels = (channel: ChannelWithPosition) => {\n    const channelWithPosition = getChannelVerticalPosition(\n      channel,\n      isVerticalMode\n    );\n    const isVisible = isChannelVisible(channelWithPosition.position);\n    const newChannel = getChannelGroupTreeProps(\n      channelWithPosition\n    ) as ChannelWithPosition;\n\n    const groupEventProps = newChannel.groupTree\n      ? { onOpenGroupTree: openChannelGroupTree }\n      : {};\n\n    if (isVisible) {\n      if (renderChannel) {\n        return renderChannel({\n          channel: newChannel,\n          isVerticalMode,\n          isRTL,\n          ...groupEventProps,\n        });\n      }\n\n      return (\n        <Channel\n          key={channel.uuid}\n          channel={newChannel}\n          isVerticalMode={isVerticalMode}\n          {...groupEventProps}\n        />\n      );\n    }\n    return null;\n  };\n\n  return (\n    <Box\n      className=\"planby-channels\"\n      data-testid=\"sidebar\"\n      isVerticalMode={isVerticalMode}\n      isRTL={isRTL}\n      isTimeline={isTimeline}\n      timelineHeight={timelineHeight}\n      sidebarWidth={sidebarWidth}\n      contentHeight={contentHeight}\n      bottom={scrollY}\n    >\n      {channels.map(renderChannels)}\n    </Box>\n  );\n}\n","import * as React from \"react\";\n\n// Import interfaces\nimport { ChannelWithPosition } from \"../helpers/types\";\n\n// Import styles\nimport { ChannelStyled } from \"../styles\";\n\ninterface ChannelProps<T> {\n  isVerticalMode: boolean;\n  channel: T;\n  onOpenGroupTree?: (data: ChannelWithPosition) => void;\n  onClick?: (v: ChannelWithPosition) => void;\n}\n\nconst { ChannelWrapper, ChannelLogo } = ChannelStyled;\n\nexport function Channel<T extends ChannelWithPosition>({\n  isVerticalMode,\n  channel,\n  onOpenGroupTree,\n  onClick,\n  ...rest\n}: ChannelProps<T>) {\n  const { position, logo, groupTree } = channel;\n\n  return (\n    <ChannelWrapper\n      className=\"planby-channel\"\n      data-testid=\"sidebar-item\"\n      isVerticalMode={isVerticalMode}\n      groupTree={groupTree}\n      onClick={() => onOpenGroupTree?.(channel) ?? onClick?.(channel)}\n      {...position}\n      {...rest}\n    >\n      <ChannelLogo src={logo} alt=\"Logo\" />\n    </ChannelWrapper>\n  );\n}\n","import * as React from \"react\";\n\n// Import types\nimport {\n  CurrentTimeIndicator,\n  HoursInDayDiffTime,\n  Mode,\n  Timezone,\n} from \"../helpers/interfaces\";\nimport { DateTime } from \"../helpers/types\";\n\n// Import styles\nimport { CurrentTimeStyled } from \"../styles\";\n\n// Import hooks\nimport { useLine, useCurrentTime } from \"../hooks\";\n\ninterface CurrentTimeProps {\n  isBaseTimeFormat?: boolean;\n  isVerticalMode?: boolean;\n  isRTL?: boolean;\n  timezone: Timezone;\n  mode: Mode;\n  startDate: DateTime;\n  endDate: DateTime;\n  hoursInDays: HoursInDayDiffTime[];\n  dayWidth: number;\n  timelineHeight: number;\n  hourWidth: number;\n  sidebarWidth: number;\n  liveRefreshTime: number;\n  renderCurrentTime?: (v: CurrentTimeIndicator) => React.ReactElement;\n}\n\nconst { CurrentTimeBox, CurrentTimeContent } = CurrentTimeStyled;\n\nexport function CurrentTime(props: CurrentTimeProps) {\n  const { isVerticalMode, isBaseTimeFormat, isRTL } = props;\n  const { timezone, mode, liveRefreshTime, startDate, endDate, hoursInDays } =\n    props;\n  const { dayWidth, timelineHeight, hourWidth, sidebarWidth } = props;\n  const { renderCurrentTime } = props;\n\n  const { showLine, positionX } = useLine({\n    timezone,\n    hoursInDays,\n    startDate,\n    endDate,\n    dayWidth,\n    hourWidth,\n    sidebarWidth,\n    liveRefreshTime,\n  });\n\n  const { time, getCurrentTimeStyles } = useCurrentTime({\n    isVerticalMode,\n    isBaseTimeFormat,\n    mode,\n    positionX,\n    timelineHeight,\n    sidebarWidth,\n  });\n\n  if (!showLine) return null;\n\n  const styles = getCurrentTimeStyles();\n\n  if (renderCurrentTime) {\n    return renderCurrentTime({\n      isVerticalMode,\n      isBaseTimeFormat,\n      isRTL,\n      time,\n      styles,\n    });\n  }\n\n  return (\n    <CurrentTimeBox className=\"planby-current-time\" {...styles.position}>\n      <CurrentTimeContent\n        className=\"planby-current-content\"\n        isVerticalMode={isVerticalMode}\n        isBaseTimeFormat={isBaseTimeFormat}\n        isRTL={isRTL}\n      >\n        {time}\n      </CurrentTimeContent>\n    </CurrentTimeBox>\n  );\n}\n","import * as React from \"react\";\n\n// Import interfaces\nimport { Timeline as ITimeline } from \"../helpers/interfaces\";\n\n// Import styles\nimport { TimelineStyled } from \"../styles\";\n\n// Import components\nimport { CurrentTime } from \"./CurrentTime\";\n\n// Import hooks\nimport { useTimeline } from \"../hooks\";\nimport {\n  TimelineWeekMonthBox,\n  TimelineWeekMonthDate,\n} from \"../styles/Timeline.styles\";\n\nconst {\n  TimelineWrapper,\n  TimelineBox,\n  TimelineTime,\n  TimelineDividers,\n  TimelineDivider,\n} = TimelineStyled;\n\nexport function Timeline(props: ITimeline) {\n  const {\n    isWeekMonthMode,\n    isMonthMode,\n    isTodayInHoursInDays,\n    areHoursInDays,\n    time,\n    ...rest\n  } = useTimeline(props);\n  const {\n    timelineHeight,\n    weekDayWidth,\n    monthsWidth,\n    dividers,\n    timelineDividers,\n  } = rest;\n  const {\n    formatWeekMonthDate,\n    getTime,\n    getDayMonthName,\n    getTimelineProps,\n    getCurrentTimeProps,\n  } = rest;\n\n  const {\n    isToday,\n    isBaseTimeFormat,\n    isCurrentTime,\n    isRTL,\n    isTimelineVisible,\n    isVerticalMode,\n  } = props;\n  const { mode } = props;\n  const { hourWidth } = props;\n\n  // Handlers\n  const renderDay = (item: string | number, index: number) => {\n    const { isNewDay, time } = getTime(item);\n    const position = { left: hourWidth * index, width: hourWidth };\n    const isVisible = isTimelineVisible(position);\n    if (!isVisible) return null;\n\n    return (\n      <TimelineBox\n        className=\"planby-timeline-box\"\n        data-testid=\"timeline-item\"\n        key={index}\n        isToday={isToday}\n        isCurrentTime={isCurrentTime}\n        isVerticalMode={isVerticalMode}\n        isTodayInHoursInDays={isTodayInHoursInDays}\n        areHoursInDays={areHoursInDays}\n        timelineHeight={timelineHeight}\n        {...position}\n      >\n        <TimelineTime\n          className=\"planby-timeline-time\"\n          isNewDay={isNewDay}\n          isBaseTimeFormat={isBaseTimeFormat}\n          isRTL={isRTL}\n          isVerticalMode={isVerticalMode}\n        >\n          {time}\n        </TimelineTime>\n        <TimelineDividers\n          isVerticalMode={isVerticalMode}\n          className=\"planby-timeline-dividers\"\n        >\n          {renderDividers(isNewDay)}\n        </TimelineDividers>\n      </TimelineBox>\n    );\n  };\n  const renderWeekMonth = (item: string, index: number) => {\n    const width = isMonthMode ? monthsWidth[index].width : weekDayWidth;\n    const left = isMonthMode ? monthsWidth[index].left : width * index;\n    const position = {\n      left,\n      width,\n    };\n    const isVisible = isTimelineVisible(position);\n    if (!isVisible) return null;\n    const isModernStyle = mode.style === \"modern\";\n    return (\n      <TimelineWeekMonthBox\n        className=\"planby-timeline-box\"\n        data-testid=\"timeline-item\"\n        key={index}\n        isToday={isToday}\n        isWeekMonthMode={isWeekMonthMode}\n        isCurrentTime={isCurrentTime}\n        isVerticalMode={isVerticalMode}\n        timelineHeight={timelineHeight}\n        styleType={mode.style}\n        {...position}\n      >\n        <TimelineWeekMonthDate\n          className=\"planby-timeline-week-month-date\"\n          isRTL={isRTL}\n          isVerticalMode={isVerticalMode}\n          styleType={mode.style}\n        >\n          {isModernStyle && <span>{getDayMonthName(item)}</span>}\n          <span>{formatWeekMonthDate(item)}</span>\n        </TimelineWeekMonthDate>\n      </TimelineWeekMonthBox>\n    );\n  };\n\n  const renderDividers = (isNewDay: boolean) =>\n    dividers.map((_, index) => (\n      <TimelineDivider\n        key={index}\n        isVerticalMode={isVerticalMode}\n        className=\"planby-timeline-divider\"\n        isNewDay={isNewDay}\n        left={index * (hourWidth / timelineDividers)}\n        width={hourWidth / timelineDividers}\n      />\n    ));\n\n  const renderTimelineItems = (item: string | number, index: number) => {\n    return isWeekMonthMode\n      ? renderWeekMonth(item as string, index)\n      : renderDay(item, index);\n  };\n\n  return (\n    <TimelineWrapper\n      className=\"planby-timeline-wrapper\"\n      data-testid=\"timeline\"\n      {...getTimelineProps()}\n    >\n      {isCurrentTime && isToday && <CurrentTime {...getCurrentTimeProps()} />}\n      {time.map((item, index) => renderTimelineItems(item, index))}\n    </TimelineWrapper>\n  );\n}\n","import * as React from \"react\";\n\n// Import interfaces\nimport {\n  HoursInDayDiffTime,\n  Line as ILine,\n  Timezone,\n} from \"../helpers/interfaces\";\n\n// Import types\nimport { DateTime } from \"../helpers/types\";\n\n// Import helpers\nimport { Layers, getLineStyles } from \"../helpers\";\n\n// Import styles\nimport { LineStyled } from \"../styles\";\n\n// Import components\nimport { useLine } from \"../hooks/useLine\";\n\ninterface LineProps {\n  isTimeline: boolean;\n  isVerticalMode: boolean;\n  height: number;\n  startDate: DateTime;\n  endDate: DateTime;\n  dayWidth: number;\n  hourWidth: number;\n  sidebarWidth: number;\n  liveRefreshTime: number;\n  hoursInDays: HoursInDayDiffTime[];\n  timezone: Timezone;\n  renderLine?: (v: ILine) => React.ReactNode;\n}\n\nconst { lineStyles, LineBox } = LineStyled;\n\nexport function Line({\n  isTimeline,\n  isVerticalMode,\n  height,\n  renderLine,\n  ...rest\n}: LineProps) {\n  const { positionX, showLine } = useLine(rest);\n\n  if (!showLine) return null;\n\n  const position = {\n    height,\n    left: positionX,\n    zIndex: Layers.Line,\n  };\n\n  const styles = getLineStyles({\n    isVerticalMode,\n    isTimeline,\n    lineStyles,\n    position,\n  });\n\n  if (renderLine)\n    return <>{renderLine({ styles, isVerticalMode, isTimeline })}</>;\n\n  return (\n    <LineBox\n      className=\"planby-line\"\n      isVerticalMode={isVerticalMode}\n      isTimeline={isTimeline}\n      {...position}\n    />\n  );\n}\n","import * as React from \"react\";\n\n// Import styles\nimport { LoaderStyled } from \"../styles\";\n\nconst { Box, Shape } = LoaderStyled;\n\nconst Element = ({\n  width,\n  color,\n  animate,\n  marginRight,\n  transition,\n}: {\n  width: number;\n  color: string;\n  transition: { duration: number; ease?: string; delay?: number };\n  animate: { right: string[] };\n  marginRight?: number;\n}) => (\n  <Shape\n    className=\"SHAPE\"\n    width={width}\n    color={color as \"teal\" | \"purple\" | \"pink\"}\n    animate={animate}\n    transition={transition}\n    marginRight={marginRight}\n  />\n);\n\nexport function Loader() {\n  return (\n    <Box aria-label=\"loading\">\n      <div>\n        <div\n          style={{ display: \"flex\", justifyContent: \"end\", marginBottom: 16 }}\n        >\n          <Element\n            animate={{\n              right: [\"0px\", \"75px\", \"0px\"],\n            }}\n            transition={{\n              duration: 1,\n            }}\n            width={217}\n            color={\"teal\"}\n            marginRight={10}\n          />\n          <Element\n            width={122}\n            color={\"purple\"}\n            animate={{\n              right: [\"0px\", \"50px\", \"0px\"],\n            }}\n            transition={{\n              duration: 1,\n              delay: 0.02,\n            }}\n          />\n        </div>\n        <div\n          style={{ display: \"flex\", justifyContent: \"end\", marginBottom: 16 }}\n        >\n          <Element\n            width={267}\n            color={\"pink\"}\n            animate={{\n              right: [\"0px\", \"70px\", \"0px\"],\n            }}\n            transition={{\n              delay: 0.5,\n              duration: 1,\n            }}\n          />\n        </div>\n        <div style={{ display: \"flex\", justifyContent: \"end\" }}>\n          <Element\n            width={217}\n            color={\"purple\"}\n            marginRight={10}\n            animate={{\n              right: [\"0px\", \"95px\", \"0px\"],\n            }}\n            transition={{\n              delay: 0.3,\n              duration: 1,\n            }}\n          />\n          <Element\n            width={80}\n            color={\"teal\"}\n            animate={{\n              right: [\"0px\", \"70px\", \"0px\"],\n            }}\n            transition={{\n              duration: 1,\n              delay: 0.33,\n            }}\n          />\n        </div>\n      </div>\n    </Box>\n  );\n}\n","import { isWithinInterval } from \"date-fns\";\nimport { getPositionX } from \"./epg\";\nimport { Area } from \"./interfaces\";\nimport { DateTime } from \"./types\";\n\ninterface AreasData {\n  area: Area;\n  hourWidth: number;\n  sidebarWidth: number;\n  timelineHeight: number;\n  height: number;\n  startDate: DateTime;\n  endDate: DateTime;\n}\n\nexport const getAreasFields = ({\n  area,\n  startDate,\n  endDate,\n  hourWidth,\n  sidebarWidth,\n  timelineHeight,\n  height,\n}: AreasData) => {\n  const areaStartDate = area.startDate;\n  const areaEndDate = area?.endDate ?? areaStartDate;\n\n  const left =\n    getPositionX(startDate, areaStartDate, startDate, endDate, hourWidth) +\n    sidebarWidth;\n\n  const width = getPositionX(\n    areaStartDate,\n    areaEndDate,\n    startDate,\n    endDate,\n    hourWidth\n  );\n\n  const intervalOptions = {\n    start: new Date(startDate),\n    end: new Date(endDate),\n  };\n  const isStartAreaDateValid = isWithinInterval(\n    new Date(areaStartDate),\n    intervalOptions\n  );\n\n  const showArea = isStartAreaDateValid;\n  const areaFieldStyles = {\n    positionX: left,\n    width,\n    height,\n    timelineHeight,\n  };\n  return {\n    ...area,\n    showArea,\n    areaFieldStyles,\n    areaBgStyles: area.styles,\n  };\n};\n","import { useMemo } from \"react\";\n// Import interfaces\nimport { Area } from \"../helpers/interfaces\";\n// Import types\nimport { DateTime } from \"../helpers/types\";\n// Import helpers\nimport { getAreasFields } from \"../helpers/areas\";\n\ninterface UseAreasProps {\n  areas: Area[];\n  hourWidth: number;\n  sidebarWidth: number;\n  height: number;\n  timelineHeight: number;\n  startDate: DateTime;\n  endDate: DateTime;\n}\n\nexport function useAreas(props: UseAreasProps) {\n  const { startDate, endDate, areas } = props;\n  const { hourWidth, sidebarWidth, timelineHeight, height } = props;\n\n  const areasSerialized = JSON.stringify(areas);\n  const data = useMemo(\n    () => {\n      return areas.map((area) => {\n        const options = {\n          area,\n          hourWidth,\n          sidebarWidth,\n          height,\n          startDate,\n          endDate,\n          timelineHeight,\n        };\n        return getAreasFields(options);\n      });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      areasSerialized,\n      hourWidth,\n      sidebarWidth,\n      height,\n      startDate,\n      endDate,\n      timelineHeight,\n    ]\n  );\n\n  return { data };\n}\n","import React from \"react\";\n\n// Import interfaces\nimport { Area, AreaItem } from \"../helpers/interfaces\";\n// Import types\nimport { DateTime } from \"../helpers/types\";\n// Import hooks\nimport { useAreas } from \"../hooks/useAreas\";\n\n// Import styles\nimport { AreaStyled } from \"../styles\";\n\ninterface AreasProps {\n  isVerticalMode: boolean;\n  areas: Area[];\n  height: number;\n  hourWidth: number;\n  sidebarWidth: number;\n  timelineHeight: number;\n  startDate: DateTime;\n  endDate: DateTime;\n}\n\ntype AreaAnnotationProps = Pick<AreaItem, \"areaFieldStyles\"> & {\n  isLeft: boolean;\n  text: string;\n  styles: AreaItem[\"areaBgStyles\"];\n};\n\nconst { AreaAnnotation, AreaBg, AreaFiled } = AreaStyled;\n\nexport function Areas({ isVerticalMode, ...props }: AreasProps) {\n  const { data } = useAreas(props);\n\n  const renderAreaAnnotation = (props: AreaAnnotationProps) => {\n    const { isLeft, text } = props;\n    const { areaFieldStyles, styles } = props;\n    const className = isLeft ? \"left\" : \"right\";\n    return (\n      <AreaAnnotation\n        className={`planby-area-annotation-${className}`}\n        isVerticalMode={isVerticalMode}\n        isLeft={isLeft}\n        timelineHeight={areaFieldStyles.timelineHeight}\n        width={areaFieldStyles.width}\n        style={styles}\n      >\n        {text}\n      </AreaAnnotation>\n    );\n  };\n\n  const renderArea = (props: AreaItem, index: number) => {\n    const { showArea, annotations, onClick } = props;\n    const { areaBgStyles = {}, areaFieldStyles } = props;\n    if (!showArea) return null;\n\n    const annotationProps = {\n      areaFieldStyles,\n      styles: annotations?.styles ?? {},\n    };\n\n    return (\n      <AreaFiled\n        key={index}\n        className=\"planby-area-field\"\n        isVerticalMode={isVerticalMode}\n        isClickable={!!onClick}\n        onClick={onClick}\n        {...areaFieldStyles}\n      >\n        <AreaBg className=\"planby-area-bg\" style={areaBgStyles} />\n        {annotations && (\n          <>\n            {annotations.textStart &&\n              renderAreaAnnotation({\n                isLeft: true,\n                text: annotations.textStart,\n                ...annotationProps,\n              })}\n            {annotations.textEnd &&\n              renderAreaAnnotation({\n                isLeft: false,\n                text: annotations.textEnd,\n                ...annotationProps,\n              })}\n          </>\n        )}\n      </AreaFiled>\n    );\n  };\n\n  return (\n    <React.Fragment>\n      {data.map((props, index) => renderArea(props, index))}\n    </React.Fragment>\n  );\n}\n","import React from \"react\";\nimport { ThemeProvider, Global } from \"@emotion/react\";\n// Import interfaces\nimport { Theme } from \"./helpers/interfaces\";\n// Import styles\nimport { globalStyles, EpgStyled } from \"./styles\";\n// Import components\nimport { Loader } from \"./components\";\nimport { useGridExternalDnD } from \"./hooks\";\n\ninterface EpgProps {\n  width?: number;\n  height?: number;\n  isVerticalMode?: boolean;\n  isRTL?: boolean;\n  isSidebar: boolean;\n  isTimeline?: boolean;\n  isLoading?: boolean;\n  children: React.ReactNode;\n  loader?: React.ReactNode;\n  theme: Theme;\n  globalStyles?: string;\n  sidebarWidth: number;\n  timelineHeight: number;\n}\n\nconst { Container, Wrapper, Box } = EpgStyled;\n\nexport const Epg = React.forwardRef<HTMLDivElement, EpgProps>(\n  (\n    {\n      children,\n      width,\n      height,\n      sidebarWidth,\n      timelineHeight,\n      theme,\n      globalStyles: customGlobalStyles,\n      isVerticalMode = false,\n      isRTL = false,\n      isSidebar = true,\n      isTimeline = true,\n      isLoading = false,\n      loader: LoaderComponent,\n      ...rest\n    },\n    containerRef\n  ) => {\n    const renderLoader = () => LoaderComponent ?? <Loader />;\n    const epgGlobalStyles = customGlobalStyles ?? globalStyles;\n\n    const blankSpaceStyles = isVerticalMode\n      ? { height: sidebarWidth, width: timelineHeight }\n      : { width: sidebarWidth, height: timelineHeight };\n\n    return (\n      <ThemeProvider theme={theme}>\n        <Global styles={epgGlobalStyles} />\n        <Container\n          className=\"planby\"\n          data-testid=\"container\"\n          width={width}\n          height={height}\n          ref={containerRef}\n          {...rest}\n        >\n          <WrapperDnD>\n            {isSidebar && isTimeline && (\n              <Box\n                className=\"planby-corner-box\"\n                isRTL={isRTL}\n                left={0}\n                top={0}\n                style={blankSpaceStyles}\n              />\n            )}\n            {isLoading && renderLoader()}\n            {children}\n          </WrapperDnD>\n        </Container>\n      </ThemeProvider>\n    );\n  }\n);\n\ninterface WrapperDnDProps {\n  children: React.ReactNode;\n}\nfunction WrapperDnD({ children }: WrapperDnDProps) {\n  const { isDragOver, onDragEnter, onDragLeave, dropAreaRef } =\n    useGridExternalDnD();\n\n  React.useEffect(() => {\n    const gridElement = document.querySelector(\".planby-grid\") as HTMLElement;\n    if (gridElement) {\n      if (isDragOver) {\n        gridElement.style.zIndex = \"5\";\n      } else {\n        gridElement.style.zIndex = \"1\";\n      }\n    }\n  }, [isDragOver]);\n\n  return (\n    <Wrapper\n      ref={dropAreaRef}\n      id=\"planby-wrapper\"\n      onDragOver={onDragEnter}\n      onDragLeaveCapture={onDragLeave}\n      onDrop={onDragLeave}\n    >\n      {children}\n    </Wrapper>\n  );\n}\n","import {\n  ChannelStyled,\n  CurrentTimeStyled,\n  ProgramStyled,\n  TimelineStyled,\n  GridStyled,\n} from \"./styles\";\n\n// Import interfaces\nimport {\n  Line as ILine,\n  Theme as ITheme,\n  Program as IProgram,\n  Timeline as ITimeline,\n  CurrentTimeIndicator as ICurrentTimeIndicator,\n  Mode,\n  GridItemProps as IGridItemProps,\n  GridDividerItemProps as IGridDividerItemProps,\n  DragAndDrop,\n  Snap,\n  GridCell as IGridCell,\n} from \"./helpers/interfaces\";\nimport {\n  ProgramItem as ProgramItemType,\n  ChannelItem as IChannelItem,\n  ChannelWithPosition,\n  BaseTimeFormat as BaseTimeFormatType,\n  DragMouseUp,\n  ResizeMouseUp,\n  DateTime,\n} from \"./helpers/types\";\n\n// Types\nexport type Channel = ChannelWithPosition;\nexport type ChannelItem = IChannelItem;\nexport type CurrentTimeIndicator = ICurrentTimeIndicator;\nexport type Line = ILine;\nexport type Program = IProgram;\nexport type ProgramItem = {\n  program: ProgramItemType;\n  isRTL: boolean;\n  isVerticalMode: boolean;\n  isBaseTimeFormat: BaseTimeFormatType;\n  liveRefreshTime: number;\n  mode: Mode;\n  startDate: DateTime;\n  snap?: Snap;\n  dnd: DragAndDrop;\n  dayWidth: number;\n  itemHeight: number;\n  contentHeight: number;\n  hourWidth: number;\n  dragMouseUp: (data: DragMouseUp) => void;\n  resizeMouseUp: (data: ResizeMouseUp) => void;\n};\nexport type GridItemProps = IGridItemProps;\nexport type GridDividerItemProps = IGridDividerItemProps;\n\nexport type Timeline = ITimeline;\nexport type Theme = ITheme;\nexport type GridCell = Omit<IGridCell, \"id\">;\n\n// Components\nexport { Layout, CurrentTime } from \"./components\";\nexport { Epg } from \"./Epg\";\nexport { useEpg, useProgram, useTimeline, useGridExternalDnD } from \"./hooks\";\n\n// Styles\nconst { ChannelWrapper: ChannelBox, ChannelLogo } = ChannelStyled;\n\nconst { CurrentTimeBox, CurrentTimeContent } = CurrentTimeStyled;\n\nconst { GridItem, GridDivider } = GridStyled;\n\nconst {\n  ProgramBox,\n  ProgramContent,\n  ProgramFlex,\n  ProgramStack,\n  ProgramTitle,\n  ProgramText,\n  ProgramImage,\n  ProgramResizeHandle,\n} = ProgramStyled;\n\nconst {\n  TimelineWrapper,\n  TimelineBox,\n  TimelineTime,\n  TimelineDivider: TimelineDividerStyled,\n  TimelineDividers,\n  TimelineWeekMonthBox,\n  TimelineWeekMonthDate,\n} = TimelineStyled;\n\nexport {\n  // Channel\n  ChannelBox,\n  ChannelLogo,\n  // CurrentTime\n  CurrentTimeBox,\n  CurrentTimeContent,\n  // Program\n  ProgramBox,\n  ProgramContent,\n  ProgramFlex,\n  ProgramStack,\n  ProgramTitle,\n  ProgramText,\n  ProgramImage,\n  ProgramResizeHandle,\n  // Timeline\n  TimelineWrapper,\n  TimelineBox,\n  TimelineWeekMonthBox,\n  TimelineWeekMonthDate,\n  TimelineTime,\n  TimelineDividers,\n  // Grid\n  GridItem,\n  GridDivider,\n};\n\nexport const TimelineDivider = TimelineDividerStyled;\n"],"names":["globalStyles","css","_templateObject","_taggedTemplateLiteralLoose","Layers","DAY_WIDTH","HOURS_IN_DAY","HOUR_IN_MINUTES","SECONDS_IN_MINUTE","TIMELINE_HEIGHT","TIMELINE_HEIGHT_MODERN_STYLE","TIMELINE_DIVIDERS","SIDEBAR_WIDTH","ITEM_HEIGHT","ITEM_OVERSCAN","DEBOUNCE_WAIT","DEBOUNCE_WAIT_MAX","LIVE_REFRESH_TIME","TIME_FORMAT","DEFAULT","DATE","DAY","DAY_DATE","MONTH","DAY_MONTH","BASE_DAY_MONTH","HOURS_MIN","BASE_HOURS_TIME","YEAR","OVERLAP_MODES","STACK","LAYER","TIMEZONE_MODES","UTC_TO_ZONED_TIME","omit","obj","result","_extends","_len","arguments","length","props","Array","_key","_i","_props","property","generateArray","num","fill","getOverlapProgramOptions","_ref","isVerticalMode","program","programOverlaps","layerOverlapLevel","overlapMode","data","position","linkedProgramOverlaps","channelUuid","programOverlapIndex","findIndex","element","id","overlapProgram","channelPosition","top","newTop","Math","abs","switchPosition","isOverlap","width","height","left","getProgramOptions","_ref2","overlap","rest","_objectWithoutPropertiesLoose","_excluded","enabled","_program$position","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","getDate","date","Date","getDayWidthResources","_ref3","dayWidth","startDate","endDate","hoursInDays","modeType","defaultOptions","hourWidth","numberOfMonths","numberOfHoursInDay","monthWidth","offsetStartHoursRange","startDateTime","endDateTime","console","error","endOfMonthTime","startOfMonth","addMonths","numberOfMonthInMonthMode","differenceInMonths","numberOfDaysInWeekMode","differenceInDays","dayWidthInWeekMode","floor","newDayWidthInWeekMode","reduce","acc","curr","diffInHours","newDayWidth","differenceInHours","startOfDay","convertDate","newDate","replace","toDate","getDayResources","_ref4","startDateFormat","format","endDateFormat","modeIncrementValue","diffDays","startToEndInterval","start","end","days","eachDayOfInterval","map","day","months","eachMonthOfInterval","dates","isTodayFns","isToday","some","currentDate","indexOf","numberOfDays","programPosition","generateUUID","generateRandomHex","characters","i","random","formatUUID","parts","substring","LayoutScreenCloneCache","setChannel","event","isChannel","updateLayoutScreenCloneElement","setLayoutScreenCloneElement","index","channels","deleteLayoutScreenCloneElement","resetLayoutScreenCloneElements","getChannelsContentHeight","channel","channelEpgIndexesCache","setChannelEpgIndexes","uuid","_ref$first","first","_ref$last","last","getChannelEpgIndexes","channelsGroupTreeCache","setChannelGroupTree","isOpen","groupTree","setChannelGroupTreeNestedChildren","nestedChildUuid","nestedChildren","concat","_channel$nestedChildr","getChannelsGroupTree","timezoneOptionsCache","zone","mode","setTimezoneOptionsCache","getTimezoneOptionsCache","getNewDateTimeTz","timezone","zonedTime","utcToZonedTime","getTime","getNewDateTz","formatTz","formatTime","formattedZonedTime","tzFormat","timeZone","fnsFormat","zonedDateTimeToUtc","zonedTimeToUtc","getItemDiffWidth","diff","getPositionX","since","till","isTomorrow","isYesterday","diffTime","differenceInMinutes","roundToMinutes","getChannelPosition","channelIndex","itemHeight","getProgramPosition","item","formatTimeTz","isYesterdayTime","edgeEnd","getProgramPositionWithDayHours","find","includes","diffHours","diffLeft","getConvertedPrograms","isOverlapEnabled","programChannelMapKey","next","arr","_arr","_arr2","_channels$channelInde","_channels$channelInde2","parentChannelUuid","_channels$channelInde3","programData","newPositionTop","newPosition","getConvertedChannels","channelMapKey","channelOverlapsCount","isStackMode","isLayerMode","channelsGroupTree","channelGroupTree","largestSizeLength","overlapsLength","push","getItemVisibility","scrollY","scrollX","containerHeight","containerWidth","itemOverscan","overlapsCount","_overlapsCount","getSidebarItemVisibility","_ref5","getTimelineItemVisibility","_ref6","setUpdatedLayoutItem","endOfDay","addDays","title","image","getLiveStatus","nowTime","sinceTime","sinceTill","roundToNearestMinutes","isFutureTime","dateTime","now","getTimeRangeDates","endDateValue","getFormattedWeekMonthDate","isBaseTimeFormat","type","style","dateFormat","getNumberOfHoursInDays","customHoursInDays","itemsDiffInHours","prevItem","startTimeHour","endTimeHour","startTime","Number","endTime","prevItemDiffInHours","getTodayHoursInDays","filter","isWithinInterval","getHoursInDaysPositionX","sidebarWidth","cb","positionX","generateDayHours","dayIndex","from","_","timeFormat","parse","generateTimelineSlots","options","generateWeekTimelineSlots","generateMonthTimelineSlots","getDayHoursTimeSlots","getDayTimeSlots","slots","hours","hoursInDay","sliced","slice","getTimelineMonthsWidth","weekDayWidth","_months$reduce","month","daysInMonth","getDaysInMonth","offsetLeft","getTimelineHeight","timelineHeight","getLineStyles","isTimeline","lineStyles","getChannelVerticalPosition","getChannelGroupTreeProps","isFirstNestedChild","isLastNestedChild","getChanelGroupTree","_channelsGroupTree","channelNestedGroupTree","_channel$parentChanne","_channelNestedGroupTr","_channelNestedGroupTr2","at","getOverlapCount","overlapArray","sinceB","tillB","overlapCount","_iterator","_createForOfIteratorHelperLoose","_step","done","otherProgram","value","sinceOther","tillOther","overlapPosition","newChannelOverlapsCount","levelTop","overlapsOnLevel","overlapsOnLevelUp","_iterator2","_step2","_program","overlapTimes","newHeight","isOverlapStackMode","newProgram","overlapTop","setChannelOverlapCount","programA","channelOverlaps","getOverlaps","itemOverlaps","programs","overlaps","_iterator3","_step3","_loop","_programA$data","sinceA","tillA","_programA$data2","_loop2","programB","j","elementA","elementB","isSameChannelUuid","overlapLinkedId","isElementAExist","el","isElementBExist","channelOverlapsLength","_getOverlapProgramOpt","newProgramA","_getOverlapProgramOpt2","newProgramB","_getOverlapProgramOpt3","getChannelProgramSliced","Map","_iterator4","_step4","has","set","get","Object","fromEntries","getChannelEpdIndexesProgramSliced","dndChannelUuidIndex","_Object$keys","keys","_overlaps$next","_overlaps$next2","undefined","channelEpgIndexes","slicedPrograms","checkOverlaps","isMultirowsDnd","dndChannelUuid","_extends2","slicedOverlapsPrograms","_Object$keys2","getFormattedDndDate","newSince","newTill","utcDateSince","utcDateTill","toISOString","getResizeTill","initialWidth","calculateItemDragSinceTill","initialPositionLeft","minDiff","tillDiffHours","addMinutes","getDefaultDragProps","positionLeft","currentPositionX","dndEvents","isDragging","getConvertedGridItems","dayWidthResources","daysResources","isMonthMode","numberOfSlots","monthsWidth","getGridItemPosition","flatMap","getClickGridItemData","isDrop","_ref2$isDrop","grid","timelineDividers","dataAttributes","isDayMode","timeSlots","itemClickProps","gridItemProps","getDividerGridProps","onGridItemDrop","onGridItemClick","dayTimeSlots","time","sinceTimeInHours","tillTimeInHours","newSinceMin","newTillMin","newNextTill","singleDayWidth","Container","_styled","process","target","label","Wrapper","name","styles","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","ScrollBox","theme","primary","isRTL","scrollbar","thumb","bg","white","_ref7","_ref8","_ref9","_ref10","Box","_ref11","_ref11$top","_ref12","EpgCornerBox","_ref13","_ref13$left","Content","_ref14","isSidebar","_ref15","contentHeight","_ref16","_ref17","_ref18","LayoutBg","_ref19","_ref20","_ref21","_ref22","bottom","_templateObject2","_templateObject3","Sidebar","ChannelWrapper","ChannelLogo","ProgramContent","Program","gradient","blue","isLive","ProgramFlex","Elipsis","ProgramTitle","grey","ProgramText","text","ProgramImage","ProgramStack","ProgramBox","isResizing","ProgramResizeHandle","green","isResize","TimelineTime","isWeekMonthMode","isNewDay","teal","TimelineWeekMonthDate","styleType","TimelineDividers","_templateObject4","TimelineDivider","timeline","divider","_templateObject5","TimelineWrapper","_templateObject6","Timeline","_templateObject7","_templateObject8","TimelineBox","_templateObject9","_templateObject10","_templateObject11","isCurrentTime","isTodayInHoursInDays","areHoursInDays","typeNumberDefault","typeNumberInHoursDays","typeNumber","TimelineWeekMonthBox","_templateObject12","_templateObject13","_templateObject14","LineBox","zIndex","moveLeft","animate","keyframes","right","loader","Loader","Shape","color","marginRight","transition","duration","_transition$ease","ease","_transition$delay","delay","boxStyles","_temp","CurrentTimeBox","CurrentTimeContent","AreaFiled","isClickable","Area","AreaBg","AreaAnnotation","_ref2$isLeft","isLeft","GridContainer","GridItem","isHoverHighlight","isDragOver","highlight","isItemClickable","GridDivider","purple","pink","border","useLayout","isInitialScrollToNow","initialScrollPositions","channelsNumber","useIsomorphicEffect","containerRef","React","useRef","scrollBoxRef","_React$useState","useState","setScrollY","_React$useState2","setScrollX","_React$useState3","layoutWidth","setLayoutWidth","_React$useState4","layoutHeight","setLayoutHeight","scrollBoxInnerHeight","_scrollBoxRef$current","current","scrollHeight","initialScrollPositionsSerialized","JSON","stringify","handleScrollDebounced","useDebouncedCallback","y","x","maxWait","handleOnScroll","useCallback","e","scrollTop","scrollLeft","hoursInDaysSerialized","useMemo","handleOnScrollToNow","_containerRef$current","clientWidth","scrollNow","handleScrollToInitialPositions","isInitialScrollPosition","_initialScrollPositio","_initialScrollPositio2","scrollTo","behavior","handleOnScrollTop","handleOnScrollRight","handleOnScrollLeft","handleResizeDebounced","container","handleCheckIsLayoutBottom","offset","_scrollBoxRef$current2","scrollWidth","_scrollBoxRef$current3","clientHeight","handleCheckIsLayoutRight","_scrollBoxRef$current4","_scrollBoxRef$current5","addEventListener","removeEventListener","isLayoutBottom","isLayoutRight","onScroll","onScrollToNow","onScrollTop","onScrollLeft","onScrollRight","defaultStartDateTime","startOfToday","defaultMode","defaultTimezone","defaultOverlap","defaultGrid","hoverHighlight","defaultDnd","useEpg","_props$isVerticalMode","_props$isRTL","_props$isResize","_props$isBaseTimeForm","_props$isSidebar","_props$isTimeline","_props$isLine","isLine","_props$isCurrentTime","_props$isInitialScrol","channelsEpg","epg","_props$startDate","startDateInput","_props$endDate","endDateInput","_props$hoursInDays","_props$initialScrollP","_props$liveRefreshTim","liveRefreshTime","_props$timelineDivide","snap","_props$mode","customMode","_props$overlap","customOverlap","_props$timezone","customTimezone","_props$areas","areas","_props$grid","_props$dnd","dnd","customTheme","_props$dayWidth","customDayWidth","_props$sidebarWidth","_props$timelineHeight","customTimelineHeight","_props$itemHeight","_props$itemOverscan","_props$channelMapKey","_props$programChannel","_getTimeRangeDates","serializedHoursInDays","_React$useMemo","_React$useMemo2","dayWidthResourcesProps","_excluded2","_React$useReducer","useReducer","update","setForceUpdate","_React$useReducer2","updateChannels","setForceChannelsUpdate","setDndChannelUuid","newOverlaps","setNewOverlaps","setOverlaps","setChannelOverlapsCount","timezoneSerialized","_useLayout","layoutProps","_excluded3","channelsEpgSerialized","channelOverlapsCountSerialized","channelsSerialized","overlapsSerialized","_React$useMemo3","_overlaps","_checkOverlaps","itemsOverlaps","prev","gridItems","defaultTheme","isProgramVisible","isChannelVisible","isTimelineVisible","dndOnSuccessCb","onDnDSuccess","resizeMouseUp","newTime","dragMouseUp","_asyncToGenerator","_regeneratorRuntime","mark","_callee","checkChannelTopOutRange","checkChannelTopInRange","isChannelTopInRange","isChannelTopOutRange","newChannel","newChannelRange","newChannelEpgIndexes","wrap","_callee$","_context","elementChannel","stop","_x","apply","handleGetLayoutData","events","handleOpenChannelGroupTree","handleGetDropItemData","getEpgProps","ref","getLayoutProps","openChannelGroupTree","getLayoutData","getDropItemData","useInterval","callback","savedCallback","setInterval","clearInterval","useIsTouchDevice","isMobile","setIsMobile","checkDevice","iOS","test","navigator","userAgent","document","androidOrWebOS","isMobileDevice","isTouchScreen","maxTouchPoints","matchMedia","matches","useDrag","isDndEnabled","isDndMutlirows","initialPosition","dndSnapX","_props$dndSnapY","dndSnapY","elementRef","mouseUpCb","dndMouseUpCb","isClicked","isMouseMove","isTouchDevice","_useState","setIsDragging","_useState2","isPreventScroll","setIsPreventScroll","_useState3","setPosition","_useState4","startY","lastY","startX","lastX","coords","setCoords","handleMouseDown","stopPropagation","touches","clientY","clientX","handleMouseClick","preventDefault","handleMouseUp","_elementRef$current","_elementRef$current2","_elementRef$current3","_elementRef$current4","optionsYX","isDndMouseUpSuccess","optionsY","_isDndMouseUpSuccess","offsetTop","initialPositionTop","sent","setTimeout","initialPositionSerialized","handleMouseMove","offsetWidth","_elementRef$current5","offsetHeight","_elementRef$current6","_elementRef$current7","_elementRef$current8","nextYValue","nextY","round","nextX","nextXSnap","checkTopRange","isOutTopRange","nextXValue","nextYSnap","mouseMoveEvent","mouseUpEvent","passive","onTouchStart","onTouchEnd","onMouseDown","onMouseUp","onClick","useResize","snapX","setIsResizing","isResizingLeft","setIsResizingLeft","isResizingRight","setIsResizingRight","_useState5","mouseOffsetX","setMouseOffsetX","_useState6","_useState7","pageY","pageX","elementRect","getBoundingClientRect","snapYTop","newHeightTop","newHeightBottom","isInLeftLayout","isInRightLayout","snapXLeft","newWidthLeft","newWidthRight","getEvents","resizeEvents","resources","eventsLeft","eventsRight","useProgram","_ref$isVerticalMode","_ref$isRTL","_ref$isResize","_ref$minWidth","minWidth","setIsLive","resizeOptions","_useResize","resizeCurrentPositionX","resizeWidth","_dnd$onDnDMouseUp","onDnDMouseUp","dragOptions","_useDrag","formatType","set12HoursTimeFormat","getRTLSinceTime","getRTLTillTime","status","isMinWidth","getMouseEventTempTime","_calculateItemDragSin","formatTempTime","toLowerCase","getMouseEvents","isMouseEvent","useTimeline","renderCurrentTime","baseDate","baseFormat","formatWeekMonthDate","getDayMonthName","getCurrentTimeProps","getTimelineProps","isWeekMode","dividers","useLine","showLine","setShowLine","getInitialState","setPositionX","liveIntervalTime","isDayEnd","isScrollX","step","positionOffset","idCurrentDay","newPositionX","useCurrentTime","baseTime","handleGetCurrentTimeStyles","_boxStyles","styleWidth","commonStyles","getCurrentTimeStyles","useGrid","handleItemClick","handleItemDrop","onItemClick","onItemDrop","useGridExternalDnD","dropAreaRef","setIsDragOver","handleDrop","droppedItemId","dataTransfer","getData","droppedItem","getElementById","attributes","attribute","startsWith","handleDragEnter","handleDragLeave","onDrop","onDragEnter","onDragLeave","GridStyled","GridDividerItem","dividerProps","restProps","_useGridExternalDnD","className","key","GridCellItem","renderGridCell","_channelOverlapsCount","isVisible","gridItemClickProps","gridItemDnDProps","gridDividerProps","timelineDividerArray","Grid","_useGrid","renderGridItem","EpgStyled","Layout","forwardRef","onLayoutBgClick","renderProgram","renderChannel","renderTimeline","renderLine","channelsLength","programsOverlapsLength","programOverlapsSerialized","showAreas","isFuture","renderPrograms","_data$fixedVisibility","fixedVisibility","renderTopbar","timeProps","Line","Areas","Channels","ProgramStyled","_useProgram","handleOnContentClick","tillTime","tempTime","src","alt","ChannelsStyled","renderChannels","channelWithPosition","groupEventProps","onOpenGroupTree","Channel","ChannelStyled","logo","_onOpenGroupTree","CurrentTimeStyled","CurrentTime","_useLine","_useCurrentTime","TimelineStyled","_useTimeline","renderDay","_getTime","renderDividers","renderWeekMonth","isModernStyle","renderTimelineItems","LineStyled","LoaderStyled","Element","display","justifyContent","marginBottom","getAreasFields","area","areaStartDate","areaEndDate","_area$endDate","intervalOptions","isStartAreaDateValid","showArea","areaFieldStyles","areaBgStyles","useAreas","areasSerialized","AreaStyled","_useAreas","renderAreaAnnotation","renderArea","annotations","_props$areaBgStyles","annotationProps","_annotations$styles","textStart","textEnd","Fragment","Epg","children","customGlobalStyles","_ref$isSidebar","_ref$isTimeline","_ref$isLoading","isLoading","LoaderComponent","renderLoader","epgGlobalStyles","blankSpaceStyles","ThemeProvider","Global","WrapperDnD","gridElement","querySelector","onDragOver","onDragLeaveCapture","ChannelBox","TimelineDividerStyled"],"mappings":"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"}